{
    "docs": [
        {
            "location": "/", 
            "text": "Citrix XenServer 7.0 \u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\n\n\n\u7b80\u4ecb\n\n\n\u6b22\u8fce\u4f7f\u7528 XenServer \u5f00\u53d1\u4eba\u5458\u6307\u5357\u3002 \u672c\u6307\u5357\u4e3a\u60a8\u63d0\u4f9b\u4e86\u89e3\u548c\u4f7f\u7528 XenServer \u63d0\u4f9b\u7684\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305 (SDK) \u6240\u9700\u7684\u4fe1\u606f\u3002 \u8fd9\u4e9b\u4fe1\u606f\u63d0\u4f9b\u4e86\u4e00\u4e9b\u67b6\u6784\u6027\u80cc\u666f\u548c\u601d\u8def\uff0c\u6709\u52a9\u4e8e\u60a8\u4e86\u89e3 API\u3001\u5df2\u63d0\u4f9b\u7684\u5de5\u5177\u4ee5\u53ca\u5982\u4f55\u5feb\u901f\u5165\u95e8\u3002\n\n\n\u5165\u95e8\n\n\nXenServer \u5305\u542b\u4e00\u4e2a\u57fa\u4e8e XML-RPC \u7684 API\uff0c\u53ef\u901a\u8fc7\u6b64 API \u4ee5\u7f16\u7a0b\u65b9\u5f0f\u8bbf\u95ee\u4e00\u7ec4\u6570\u91cf\u5e9e\u5927\u7684 XenServer \u7ba1\u7406\u529f\u80fd\u548c\u5de5\u5177\u3002 XenServer API \u53ef\u4ee5\u4ece\u8fdc\u7a0b\u7cfb\u7edf\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u4ece XenServer \u4e3b\u673a\u672c\u5730\u8c03\u7528\u3002 \u867d\u7136\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u539f\u59cb XML-RPC \u8c03\u7528\u7f16\u5199\u4f7f\u7528 XenServer \u7ba1\u7406 API \u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f46\u901a\u8fc7\u4f7f\u7528\u8bed\u8a00\u7ed1\u5b9a\u5c06\u5404 API \u8c03\u7528\u5448\u73b0\u4e3a\u76ee\u6807\u8bed\u8a00\u4e2d\u7684\u7b2c\u4e00\u7c7b\u51fd\u6570\uff0c\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u7b2c\u4e09\u65b9\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u5de5\u4f5c\u3002 XenServer SDK \u63d0\u4f9b C\u3001C#\u3001Java\u3001Python \u548c PowerShell \u7f16\u7a0b\u8bed\u8a00\u7684\u8bed\u8a00\u7ed1\u5b9a\u548c\u793a\u4f8b\u4ee3\u7801\u3002\n\n\n\u7cfb\u7edf\u8981\u6c42\u548c\u51c6\u5907\u5de5\u4f5c\n\n\n\u8981\u4f7f\u7528 SDK\uff0c\u9996\u5148\u9700\u8981\u5b89\u88c5 XenServer\u3002 \u53ef\u4ece http://www.citrix.com/downloads/xenserver/ \u4e0b\u8f7d\u514d\u8d39\u7248\u7684 Citrix XenServer\u3002 \u6709\u5173\u5982\u4f55\u8bbe\u7f6e\u5f00\u53d1\u4e3b\u673a\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\u300aXenServer \u5b89\u88c5\u6307\u5357\u300b\u3002 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u8bf7\u8bb0\u4e0b\u4e3b\u673a IP \u5730\u5740\u548c\u4e3b\u673a\u5bc6\u7801\u3002\n\n\n\u4e0b\u8f7d\n\n\nSDK \u6253\u5305\u4e3a\u4e00\u4e2a ZIP \u6587\u4ef6\uff0c\u53ef\u4ece http://www.citrix.com/downloads/xenserver/ \u514d\u8d39\u4e0b\u8f7d\u3002\n\n\n\u5185\u5bb9\u56fe\n\n\nSDK ZIP \u6587\u4ef6\u7684\u63d0\u53d6\u5185\u5bb9\u4f4d\u4e8e XenServer-SDK \u76ee\u5f55\u4e2d\u3002 \u4e0b\u9762\u7b80\u8981\u6982\u8ff0\u5176\u7ed3\u6784\u3002 \u5fc5\u8981\u65f6\uff0c\u5b50\u76ee\u5f55\u6709\u81ea\u5df1\u5355\u72ec\u7684\u81ea\u8ff0\u6587\u4ef6\u3002 \u5e94\u5f53\u6ce8\u610f\u7684\u662f\uff0c\u63d0\u4f9b\u7684\u793a\u4f8b\u5728\u6240\u6709\u8bed\u8a00\u7ed1\u5b9a\u4e4b\u95f4\u4e0d\u5c3d\u76f8\u540c\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u60f3\u4f7f\u7528\u4e00\u4e2a\u7ed1\u5b9a\uff0c\u5efa\u8bae\u8fd8\u8981\u6d4f\u89c8\u5176\u4ed6\u7ed1\u5b9a\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u3002\n\n\n\n\nXenServer-SDK\u3002 \n\n\nlibxenserver\u3002\u9002\u7528\u4e8e C \u7684 XenServer SDK\u3002 \n\n\nbin\u3002libxenserver \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\n\n\nsrc\u3002libxenserver \u6e90\u4ee3\u7801\u548c\u793a\u4f8b\u4ee5\u53ca\u7528\u4e8e\u6784\u5efa\u5b83\u4eec\u7684 Makefile\u3002\n\n\n\n\n\n\nXenServer.NET\u3002\u9002\u7528\u4e8e C#.NET \u7684 XenServer SDK\u3002 \n\n\nbin\u3002XenServer.NET \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\n\n\nsamples\u3002XenServer.NET \u793a\u4f8b\u3002\n\n\nsrc\u3002XenServer.NET \u6e90\u4ee3\u7801\u3002\n\n\n\n\n\n\nXenServerJava\u3002\u9002\u7528\u4e8e Java \u7684 XenServer SDK\u3002 \n\n\nbin\u3002Java \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\n\n\njavadoc\u3002Java \u6587\u6863\u3002\n\n\nsamples\u3002Java \u793a\u4f8b\u3002\n\n\nsrc\u3002Java \u6e90\u4ee3\u7801\u4ee5\u53ca\u7528\u4e8e\u6784\u5efa\u4ee3\u7801\u548c\u793a\u4f8b\u7684 Makefile\u3002\n\n\n\n\n\n\nXenServerPowerShell\u3002\u9002\u7528\u4e8e PowerShell \u7684 XenServer SDK\u3002 \n\n\nXenServerPSModule\u3002XenServer PowerShell \u6a21\u5757\u3002\n\n\nsamples\u3002PowerShell \u793a\u4f8b\u811a\u672c\u3002\n\n\nsrc\u3002XenServer PowerShell \u6e90\u4ee3\u7801\u3002\n\n\n\n\n\n\nXenServerPython\u3002\u6b64\u76ee\u5f55\u5305\u542b XenServer Python \u6a21\u5757 XenAPI.py\u3002\u5e93 provision.py \u7531\u793a\u4f8b\u4f7f\u7528\u3002 \n\n\nsamples\u3002\u4f7f\u7528 Python \u7684 XenServer API \u793a\u4f8b\u3002\n\n\n\n\n\n\n\n\n\n\n\n\nXenServer API \u6982\u8ff0\n\n\n\u672c\u7ae0\u5c06\u4ecb\u7ecd XenServer API\uff08\u4ee5\u4e0b\u7b80\u79f0\u201cAPI\u201d\uff09\u53ca\u5176\u76f8\u5173\u7684\u5bf9\u8c61\u6a21\u578b\u3002\u8be5 API \u5177\u6709\u4ee5\u4e0b\u4e3b\u8981\u529f\u80fd\uff1a\n\n\n\n\n\n\n\u7ba1\u7406 XenServer \u4e3b\u673a\u7684\u6240\u6709\u65b9\u9762\u3002\u4f7f\u7528\u8be5 API \u53ef\u4ee5\u7ba1\u7406 VM\u3001\u5b58\u50a8\u3001\u7f51\u7edc\u8fde\u63a5\u3001\u4e3b\u673a\u914d\u7f6e\u548c\u6c60\u3002\u8fd8\u53ef\u4ee5\u4ece\u8be5 API \u67e5\u8be2\u6027\u80fd\u548c\u72b6\u6001\u6307\u6807\u3002\n\n\n\n\n\n\n\u6301\u4e45\u6027\u5bf9\u8c61\u6a21\u578b\u3002 \u6240\u6709\u4f1a\u4ea7\u751f\u5176\u4ed6\u5f71\u54cd\u7684\u64cd\u4f5c\uff08\u4f8b\u5982\uff0c\u521b\u5efa\u5bf9\u8c61\u3001\u5220\u9664\u5bf9\u8c61\u548c\u4fee\u6539\u53c2\u6570\uff09\u7684\u7ed3\u679c\u90fd\u5c06\u6c38\u4e45\u4fdd\u7559\u5728\u7531 XenServer \u5b89\u88c5\u7ba1\u7406\u7684\u670d\u52a1\u5668\u7aef\u6570\u636e\u5e93\u4e2d\u3002\n\n\n\n\n\n\n\u4e8b\u4ef6\u673a\u5236\u3002 \u901a\u8fc7\u8be5 API\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u8fdb\u884c\u6ce8\u518c\uff0c\u4ee5\u5728\u6301\u4e45\u6027\uff08\u670d\u52a1\u5668\u7aef\uff09\u5bf9\u8c61\u88ab\u4fee\u6539\u65f6\u6536\u5230\u901a\u77e5\u3002 \u8fd9\u53ef\u4f7f\u5e94\u7528\u7a0b\u5e8f\u8ddf\u8e2a\u7531\u6b63\u5728\u540c\u65f6\u6267\u884c\u7684\u5ba2\u6237\u7aef\u5bf9\u6570\u636e\u6a21\u578b\u8fdb\u884c\u7684\u4fee\u6539\u3002\n\n\n\n\n\n\n\u540c\u6b65\u548c\u5f02\u6b65\u8c03\u7528\u3002 \u53ef\u4ee5\u540c\u6b65\u8c03\u7528\u6240\u6709 API \u8c03\u7528\uff08\u76f4\u5230\u5b8c\u6210\u624d\u4e2d\u65ad\uff09\uff1b\u4e5f\u53ef\u4ee5\u5f02\u6b65\u8c03\u7528\u53ef\u80fd\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u4f55 API \u8c03\u7528\u3002 \u5f02\u6b65\u8c03\u7528\u4f1a\u7acb\u5373\u8fd4\u56de\u5bf9\u4efb\u52a1\u5bf9\u8c61\u7684\u5f15\u7528\u3002 \u53ef\u4ee5\uff08\u901a\u8fc7\u8be5 API\uff09\u67e5\u8be2\u6b64\u4efb\u52a1\u5bf9\u8c61\u7684\u8fdb\u7a0b\u548c\u72b6\u6001\u4fe1\u606f\u3002 \u5f02\u6b65\u8c03\u7528\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u53ef\u4ece\u4efb\u52a1\u5bf9\u8c61\u83b7\u5f97\u7ed3\u679c\uff08\u6216\u9519\u8bef\u4ee3\u7801\uff09\u3002\n\n\n\n\n\n\n\u53ef\u8fdc\u7a0b\u548c\u8de8\u5e73\u53f0\u8bbf\u95ee\u3002 \u53d1\u51fa API \u8c03\u7528\u7684\u5ba2\u6237\u7aef\u4e0d\u5fc5\u4f4d\u4e8e\u8981\u7ba1\u7406\u7684\u4e3b\u673a\u4e0a\uff1b\u4e5f\u4e0d\u5fc5\u901a\u8fc7 ssh \u8fde\u63a5\u5230\u4e3b\u673a\u6765\u6267\u884c\u8be5 API\u3002 API \u8c03\u7528\u4f7f\u7528 XML-RPC \u534f\u8bae\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u8bf7\u6c42\u548c\u54cd\u5e94\u3002\n\n\n\n\n\n\n\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u5b89\u5168\u8bbf\u95ee\u3002 \u5728\u4e3b\u673a\u4e0a\u6267\u884c\u7684 XML-RPC API \u670d\u52a1\u5668\u63a5\u53d7\u5b89\u5168\u5957\u63a5\u5b57\u8fde\u63a5\u3002 \u8fd9\u6837\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u91c7\u7528 http \u534f\u8bae\u6267\u884c API\u3002 \u6b64\u5916\uff0c\u6240\u6709 API \u8c03\u7528\u90fd\u5728\u767b\u5f55\u4f1a\u8bdd\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c\uff0c\u767b\u5f55\u4f1a\u8bdd\u662f\u901a\u8fc7\u5728\u670d\u52a1\u5668\u7aef\u8fdb\u884c\u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1\u751f\u6210\u7684\u3002 \u8fd9\u6837\u4fbf\u53ef\u4ee5\u5bf9 XenServer \u5b89\u88c5\u8fdb\u884c\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u5b89\u5168\u8bbf\u95ee\u3002\n\n\n\n\n\n\nAPI \u5165\u95e8\n\n\n\u5728\u8be5 API \u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u4ecb\u7ecd\u5728 XenServer \u5b89\u88c5\u4e2d\u521b\u5efa\u65b0 VM \u6240\u9700\u7684\u8c03\u7528\uff0c\u7136\u540e\u6267\u884c\u542f\u52a8/\u6302\u8d77/\u6062\u590d/\u505c\u6b62\u5468\u671f\u64cd\u4f5c\u3002 \u65e0\u9700\u5f15\u7528\u4efb\u4f55\u7279\u5b9a\u8bed\u8a00\u7684\u4ee3\u7801\u5373\u53ef\u5b8c\u6210\u6b64\u4efb\u52a1\uff1b\u5728\u6b64\u9636\u6bb5\uff0c\u6211\u4eec\u4ec5\u4ecb\u7ecd\u5b8c\u6210\u201c\u5b89\u88c5\u5e76\u542f\u52a8\u201d\u4efb\u52a1\u7684 RPC \u8c03\u7528\u7684\u975e\u6b63\u5f0f\u5e8f\u5217\u3002\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u5f3a\u70c8\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528 Vm.create \u8c03\u7528\uff0c\u8be5\u8c03\u7528\u5728\u5c06\u6765\u7684 API \u7248\u672c\u4e2d\u53ef\u80fd\u4f1a\u88ab\u5220\u9664\u6216\u66f4\u6539\u3002\u8bf7\u7ee7\u7eed\u9605\u8bfb\u4ee5\u4e86\u89e3\u751f\u6210\u65b0 VM \u7684\u5176\u4ed6\u65b9\u5f0f\u3002\n\n\n\u8eab\u4efd\u9a8c\u8bc1\uff1a\u83b7\u5f97\u4f1a\u8bdd\u5f15\u7528\n\n\n\u7b2c\u4e00\u6b65\u662f\u8c03\u7528 \nSession.login_with_password(\nusername\n, \npassword\n, \nclient_API_version\n, \noriginator\n)\n\u3002 \u6b64 API \u662f\u57fa\u4e8e\u4f1a\u8bdd\u7684\uff0c\u56e0\u6b64\uff0c\u5728\u6267\u884c\u5176\u4ed6\u8c03\u7528\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5411\u670d\u52a1\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u5982\u679c\u7528\u6237\u540d\u548c\u5bc6\u7801\u6b63\u786e\u901a\u8fc7\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u6b64\u8c03\u7528\u7684\u7ed3\u679c\u4e3a\u4e00\u4e2a\u4f1a\u8bdd\u5f15\u7528\u3002 \u540e\u7eed API \u8c03\u7528\u4f7f\u7528\u8be5\u4f1a\u8bdd\u5f15\u7528\u4f5c\u4e3a\u53c2\u6570\u3002 \u901a\u8fc7\u6b64\u65b9\u5f0f\u786e\u4fdd\u53ea\u6709\u9002\u5f53\u83b7\u5f97\u6388\u6743\u7684 API \u7528\u6237\u624d\u53ef\u4ee5\u5728 XenServer \u5b89\u88c5\u4e2d\u6267\u884c\u64cd\u4f5c\u3002 \u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\u540c\u4e00\u4f1a\u8bdd\u6267\u884c\u4efb\u4f55\u6570\u91cf\u7684 API \u8c03\u7528\u3002 \u5b8c\u6210\u8be5\u4f1a\u8bdd\u540e\uff0cCitrix \u5efa\u8bae\u60a8\u8c03\u7528 \nSession.logout(session)\n \u8fdb\u884c\u6e05\u7406\uff1a\u8bf7\u53c2\u9605\u4e0b\u6587\u3002\n\n\n\u83b7\u53d6\u4f5c\u4e3a\u65b0 VM \u5b89\u88c5\u57fa\u7840\u7684\u6a21\u677f\u5217\u8868\n\n\n\u7b2c\u4e8c\u6b65\u662f\u67e5\u8be2\u4e3b\u673a\u4e0a\u7684\u201c\u6a21\u677f\u201d\u5217\u8868\u3002 \u6a21\u677f\u662f\u5177\u6709\u7279\u6b8a\u6807\u8bb0\u7684 VM \u5bf9\u8c61\uff0c\u7528\u4e8e\u4e3a\u5404\u79cd\u53d7\u652f\u6301\u7684\u6765\u5bbe\u7cfb\u7edf\u7c7b\u578b\u6307\u5b9a\u9002\u5f53\u7684\u9ed8\u8ba4\u53c2\u6570\u3002 \uff08\u5982\u679c\u60a8\u5e0c\u671b\u7cfb\u7edf\u5728 XenServer \u5b89\u88c5\u671f\u95f4\u5feb\u901f\u679a\u4e3e\u6a21\u677f\uff0c\u53ef\u4ee5\u6267\u884c xe template-list CLI \u547d\u4ee4\u3002\uff09\u8981\u901a\u8fc7\u8be5 API \u83b7\u53d6\u6a21\u677f\u5217\u8868\uff0c\u9700\u8981\u67e5\u627e\u670d\u52a1\u5668\u4e0a is_a_template \u5b57\u6bb5\u8bbe\u7f6e\u4e3a true \u7684 VM \u5bf9\u8c61\u3002 \u6267\u884c\u6b64\u64cd\u4f5c\u7684\u4e00\u79cd\u65b9\u5f0f\u662f\u8c03\u7528 VM.get_all_records(session)\uff0c\u5176\u4e2d\u4f1a\u8bdd\u53c2\u6570\u662f\u5148\u524d\u4ece Session.login_with_password \u8c03\u7528\u4e2d\u83b7\u5f97\u7684\u5f15\u7528\u3002 \u6b64\u8c03\u7528\u5c06\u67e5\u8be2\u670d\u52a1\u5668\uff0c\u8fd4\u56de\u5305\u542b\u6240\u6709 VM \u5bf9\u8c61\u5f15\u7528\u53ca\u5176\u5b57\u6bb5\u503c\u7684\u5feb\u7167\uff08\u5728\u8c03\u7528\u65f6\u521b\u5efa\uff09\u3002\n\n\n\uff08\u8bf7\u8bb0\u4f4f\uff0c\u5728\u6b64\u9636\u6bb5\uff0c\u6211\u4eec\u4e0d\u5173\u6ce8\u53ef\u901a\u8fc7\u4efb\u4f55\u7279\u5b9a\u5ba2\u6237\u7aef\u8bed\u8a00\u5904\u7406\u8fd4\u56de\u7684\u5bf9\u8c61\u5f15\u7528\u548c\u5b57\u6bb5\u503c\u7684\u7279\u6b8a\u673a\u5236\uff1a\u8be5\u7ec6\u8282\u901a\u8fc7\u7279\u5b9a\u4e8e\u8bed\u8a00\u7684 API \u7ed1\u5b9a\u8fdb\u884c\u5904\u7406\uff0c\u5c06\u5728\u540e\u9762\u7684\u7ae0\u8282\u4e2d\u5177\u4f53\u4ecb\u7ecd\u3002 \u73b0\u5728\u53ea\u9700\u5047\u5b9a\u5b58\u5728\u4e00\u4e2a\u62bd\u8c61\u673a\u5236\uff0c\u7528\u4e8e\u8bfb\u53d6\u548c\u5904\u7406\u7531 API \u8c03\u7528\u8fd4\u56de\u7684\u5bf9\u8c61\u548c\u5b57\u6bb5\u503c\u3002\uff09\n\n\n\u6211\u4eec\u5df2\u5c06\u6240\u6709 VM \u5bf9\u8c61\u7684\u5b57\u6bb5\u503c\u7684\u5feb\u7167\u5b58\u5165\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u7684\u5185\u5b58\uff0c\u73b0\u5728\u6211\u4eec\u53ea\u9700\u8fed\u4ee3\u8fd9\u4e9b\u5bf9\u8c61\uff0c\u5e76\u67e5\u627e is_a_template \u8bbe\u7f6e\u4e3a true \u7684\u90a3\u4e9b\u5bf9\u8c61\u3002 \u5728\u6b64\u9636\u6bb5\uff0c\u6211\u4eec\u5047\u5b9a\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u5c06\u8fdb\u4e00\u6b65\u8fed\u4ee3\u6d4f\u89c8\u6a21\u677f\u5bf9\u8c61\uff0c\u5e76\u8bb0\u4f4f\u201cname_label\u201d\u8bbe\u7f6e\u4e3a\u201cDebian Etch 4.0\u201d\uff08XenServer \u63d0\u4f9b\u7684\u9ed8\u8ba4 Linux \u6a21\u677f\u4e4b\u4e00\uff09\u7684\u5bf9\u8c61\u6240\u5bf9\u5e94\u7684\u5f15\u7528\u3002\n\n\n\u57fa\u4e8e\u6a21\u677f\u5b89\u88c5 VM\n\n\n\u7ee7\u7eed\u6211\u4eec\u7684\u793a\u4f8b\u3002\u73b0\u5728\uff0c\u5fc5\u987b\u57fa\u4e8e\u6240\u9009\u6a21\u677f\u5b89\u88c5\u65b0\u7684 VM\u3002\u5b89\u88c5\u8fc7\u7a0b\u8981\u6c42\u4f7f\u7528 2 \u4e2a API \u8c03\u7528\uff1a\n\n\n\n\n\n\n\u9996\u5148\uff0c\u6211\u4eec\u73b0\u5728\u5fc5\u987b\u8c03\u7528 API \u8c03\u7528 VM.clone(session, t_ref, \u201cmy first VM\u201d)\u3002 \u8fd9\u5c06\u901a\u77e5\u670d\u52a1\u5668\u514b\u9686 t_ref \u5f15\u7528\u7684 VM \u5bf9\u8c61\uff0c\u4ee5\u751f\u6210\u65b0\u7684 VM \u5bf9\u8c61\u3002 \u6b64\u8c03\u7528\u5c06\u8fd4\u56de\u4e0e\u65b0\u521b\u5efa\u7684 VM \u5bf9\u5e94\u7684 VM \u5f15\u7528\u3002 \u6211\u4eec\u79f0\u5176\u4e3a new_vm_ref\u3002\n\n\n\n\n\n\n\u5728\u6b64\u9636\u6bb5\uff0cnew_vm_ref \u5f15\u7528\u7684\u5bf9\u8c61\u4ecd\u7136\u662f\u6a21\u677f\uff08\u6b63\u5982 t_ref \u5f15\u7528\u7684 VM \u5bf9\u8c61\uff0c\u5df2\u4ece\u5176\u514b\u9686\u4e86 VM \u5bf9\u8c61\uff09\u3002 \u8981\u4f7f new_vm_ref \u6210\u4e3a VM \u5bf9\u8c61\uff0c\u9700\u8981\u8c03\u7528 VM.provision(session, new_vm_ref)\u3002 \u5f53\u6b64\u8c03\u7528\u8fd4\u56de\u7ed3\u679c\u540e\uff0cnew_vm_ref \u5bf9\u8c61\u7684 is_a_template \u5b57\u6bb5\u4f1a\u8bbe\u7f6e\u4e3a false\uff0c\u8bf4\u660e new_vm_ref \u73b0\u5728\u5f15\u7528\u4e00\u4e2a\u53ef\u4ee5\u542f\u52a8\u7684\u5e38\u89c4 VM\u3002\n\n\n\n\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u7f6e\u5907\u64cd\u4f5c\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728\u6b64\u8c03\u7528\u671f\u95f4\uff0c\u9700\u8981\u521b\u5efa\u6a21\u677f\u7684\u78c1\u76d8\u6620\u50cf\u3002 \u5982\u679c\u4f7f\u7528\u7684\u662f Debian \u6a21\u677f\uff0c\u5219\u5728\u6b64\u9636\u6bb5\uff0c\u8fd8\u5c06\u4f7f\u7528 Debian \u6839\u6587\u4ef6\u7cfb\u7edf\u586b\u5145\u65b0\u521b\u5efa\u7684\u78c1\u76d8\u3002\n\n\n\u5bf9 VM \u6267\u884c\u542f\u52a8/\u6302\u8d77/\u6062\u590d/\u505c\u6b62\u5468\u671f\u64cd\u4f5c\n\n\n\u73b0\u5728\u6211\u4eec\u6709\u4e86\u8868\u793a\u65b0\u521b\u5efa\u7684 VM \u7684\u5bf9\u8c61\u5f15\u7528\u3002\u63a5\u4e0b\u6765\u5bf9\u5b83\u6267\u884c\u4e00\u4e9b\u751f\u547d\u5468\u671f\u64cd\u4f5c\u5c31\u5f88\u7b80\u5355\u4e86\uff1a\n\n\n\n\n\n\n\u8981\u542f\u52a8 VM\uff0c\u53ea\u9700\u8c03\u7528 VM.start(session, new_vm_ref)\u3002\n\n\n\n\n\n\nVM \u8fd0\u884c\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 VM.suspend(session, new_vm_ref) \u5c06\u5176\u6302\u8d77\uff0c\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7\u8c03\u7528 VM.resume(session, new_vm_ref) \u5c06\u5176\u6062\u590d\u3002\n\n\n\n\n\n\n\u8c03\u7528 VM.shutdown(session, new_vm_ref) \u53ef\u5f7b\u5e95\u5173\u95ed\u8be5 VM\u3002\n\n\n\n\n\n\n\u6ce8\u9500\n\n\n\u5f53\u5e94\u7528\u7a0b\u5e8f\u5b8c\u6210\u4e0e XenServer \u4e3b\u673a\u7684\u4ea4\u4e92\u540e\uff0c\u6700\u597d\u8c03\u7528 Session.logout(session)\u3002 \u8fd9\u5c06\u4f7f\u4f1a\u8bdd\u5f15\u7528\u65e0\u6548\uff08\u56e0\u6b64\uff0c\u8be5\u4f1a\u8bdd\u5f15\u7528\u65e0\u6cd5\u7528\u4e8e\u540e\u7eed API \u8c03\u7528\uff09\uff0c\u540c\u65f6\u4f1a\u91ca\u653e\u7528\u4e8e\u5b58\u50a8\u4f1a\u8bdd\u5bf9\u8c61\u7684\u670d\u52a1\u5668\u7aef\u5185\u5b58\u3002\n\n\n\u867d\u7136\u975e\u6d3b\u52a8\u4f1a\u8bdd\u6700\u7ec8\u4f1a\u8d85\u65f6\uff0c\u4f46\u670d\u52a1\u5668\u4ecd\u7136\u5177\u6709\u6bcf\u4e2a username \u6216 originator \u6700\u591a 500 \u4e2a\u5e76\u53d1\u4f1a\u8bdd\u7684\u786c\u7f16\u7801\u9650\u5236\u3002 \u8fbe\u5230\u6b64\u9650\u5236\u540e\uff0c\u65b0\u7684\u767b\u5f55\u5c06\u6536\u56de\u6700\u65e9\u4f7f\u7528\u7684\u4f1a\u8bdd\u5bf9\u8c61\uff0c\u4ece\u800c\u5bfc\u81f4\u8fd9\u4e9b\u5bf9\u8c61\u7684\u76f8\u5173\u4f1a\u8bdd\u5f15\u7528\u5931\u6548\u3002 \u4e3a\u4e86\u80fd\u591f\u4e0e\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u6210\u529f\u5b9e\u73b0\u4e92\u64cd\u4f5c\uff0c\u4ece\u800c\u53ef\u4ee5\u5e76\u53d1\u8bbf\u95ee\u670d\u52a1\u5668\uff0c\u6700\u4f73\u7b56\u7565\u662f\uff1a\n\n\n\n\n\n\n\u9009\u62e9\u4e00\u4e2a\u53ef\u4ee5\u6807\u8bc6\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u7248\u672c\u7684\u5b57\u7b26\u4e32\u3002\n\n\n\n\n\n\n\u5728\u5f00\u59cb\u65e5\u671f\u521b\u5efa\u5355\u4e00\u4f1a\u8bdd\uff0c\u5c06\u6b64\u6807\u8bc6\u5b57\u7b26\u4e32\u7528\u4e8e Session.login_with_password \u7684 originator \u53c2\u6570\u3002\n\n\n\n\n\n\n\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u6b64\u4f1a\u8bdd\uff08\u8bf7\u6ce8\u610f\uff0c\u53ef\u4ee5\u8de8\u591a\u4e2a\u72ec\u7acb\u7684\u5ba2\u6237\u7aef\u670d\u52a1\u5668\u7f51\u7edc\u8fde\u63a5\u4f7f\u7528\u6b64\u4f1a\u8bdd\uff09\uff0c\u7136\u540e\u5728\u5fc5\u8981\u65f6\u663e\u5f0f\u6ce8\u9500\u3002\n\n\n\n\n\n\n\u5982\u679c\u7f16\u5199\u62d9\u52a3\u7684\u5ba2\u6237\u7aef\u6cc4\u6f0f\u4f1a\u8bdd\u6216\u8005\u8d85\u51fa\u9650\u5236\uff0c\u53ea\u8981\u8be5\u5ba2\u6237\u7aef\u4f7f\u7528\u76f8\u5e94\u7684 originator \u53c2\u6570\uff0c\u5b83\u5c31\u53ef\u4ee5\u4ece XenServer \u65e5\u5fd7\u8f7b\u677e\u8bc6\u522b\uff0c\u800c\u4e14 XenServer \u4ec5\u9500\u6bc1\u975e\u6cd5\u5ba2\u6237\u7aef\u7684\u95f2\u7f6e\u65f6\u95f4\u6700\u957f\u7684\u4f1a\u8bdd\uff1b\u8fd9\u53ef\u80fd\u4f1a\u7ed9\u8be5\u5ba2\u6237\u7aef\u5e26\u6765\u95ee\u9898\uff0c\u4f46\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u5ba2\u6237\u7aef\u3002 \u5982\u679c\u884c\u4e3a\u4e0d\u5f53\u7684\u5ba2\u6237\u7aef\u672a\u6307\u5b9a originator\uff0c\u5b83\u5c06\u8f83\u96be\u8bc6\u522b\uff0c\u56e0\u6b64\u4f1a\u5bfc\u81f4\u4efb\u4f55\u672a\u6307\u5b9a originator \u7684\u5ba2\u6237\u7aef\u7684\u4f1a\u8bdd\u88ab\u8fc7\u65e9\u9500\u6bc1\u3002\n\n\n\u5b89\u88c5\u548c\u542f\u52a8\u793a\u4f8b\uff1a\u6458\u8981\n\n\n\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u8be5 API \u57fa\u4e8e XenServer \u6a21\u677f\u5b89\u88c5 VM \u5e76\u5bf9\u5b83\u6267\u884c\u4e00\u7cfb\u5217\u7684\u751f\u547d\u5468\u671f\u64cd\u4f5c\u3002 \u60a8\u4f1a\u6ce8\u610f\u5230\uff0c\u6211\u4eec\u4e3a\u5f71\u54cd\u8fd9\u4e9b\u64cd\u4f5c\u800c\u5fc5\u987b\u6267\u884c\u7684\u8c03\u7528\u6570\u5f88\u5c11\uff1a\n\n\n\n\n\n\n\u4e00\u4e2a\u8c03\u7528\u7528\u4e8e\u83b7\u53d6\u4f1a\u8bdd\uff1aSession.login_with_password()\n\n\n\n\n\n\n\u4e00\u4e2a\u8c03\u7528\u7528\u4e8e\u67e5\u8be2\u5728 XenServer \u5b89\u88c5\u671f\u95f4\u663e\u793a\u7684 VM\uff08\u548c\u6a21\u677f\uff09\u5bf9\u8c61\uff1aVM.get_all_records()\u3002 \u8bf7\u56de\u5fc6\u4e00\u4e0b\uff0c\u6211\u4eec\u66fe\u4f7f\u7528\u8be5\u8c03\u7528\u6240\u8fd4\u56de\u7684\u4fe1\u606f\u9009\u62e9\u4e86\u4e00\u4e2a\u5408\u9002\u7684\u6a21\u677f\u6765\u57fa\u4e8e\u5b83\u8fdb\u884c\u5b89\u88c5\u3002\n\n\n\n\n\n\n\u4e24\u4e2a\u8c03\u7528\u7528\u4e8e\u57fa\u4e8e\u6240\u9009\u6a21\u677f\u5b89\u88c5 VM\uff1aVM.clone()\uff0c\u540e\u8ddf VM.provision()\u3002\n\n\n\n\n\n\n\u4e00\u4e2a\u8c03\u7528\u7528\u4e8e\u542f\u52a8\u751f\u6210\u7684 VM\uff1aVM.start()\uff08\u4ee5\u53ca\u4e0e\u4e4b\u7c7b\u4f3c\u7684\u5206\u522b\u7528\u4e8e\u6302\u8d77\u3001\u6062\u590d\u548c\u5173\u95ed VM \u7684\u5176\u4ed6\u5355\u4e2a\u8c03\u7528\uff09\n\n\n\n\n\n\n\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u8c03\u7528\u7528\u4e8e\u6ce8\u9500\uff1aSession.logout()\n\n\n\n\n\n\n\u6b64\u5904\u7684\u8981\u70b9\u662f\uff0c\u867d\u7136\u6574\u4e2a API \u529f\u80fd\u9f50\u5168\u4e14\u590d\u6742\uff0c\u4f46\u5e38\u89c1\u4efb\u52a1\uff08\u4f8b\u5982\uff0c\u9488\u5bf9 VM \u7684\u521b\u5efa\u548c\u6267\u884c\u751f\u547d\u5468\u671f\u64cd\u4f5c\uff09\u5f88\u5bb9\u6613\u6267\u884c\uff0c\u53ea\u9700\u5c11\u91cf\u7684\u7b80\u5355 API \u8c03\u7528\u3002 \u5b66\u4e60\u4e0b\u4e00\u8282\uff0c\u521d\u8bfb\u65f6\u60a8\u53ef\u80fd\u4f1a\u611f\u5230\u6709\u4e9b\u56f0\u96be\uff0c\u4f46\u8bf7\u8bb0\u4f4f\u8fd9\u4e00\u70b9\u3002\n\n\n\u5bf9\u8c61\u6a21\u578b\u6982\u8ff0\n\n\n\u672c\u8282\u7c97\u7565\u6982\u8ff0\u4e86 API \u7684\u5bf9\u8c61\u6a21\u578b\u3002 \u300aXenServer API \u53c2\u8003\u300b\u6587\u6863\u4e2d\u6bd4\u8f83\u8be6\u7ec6\u5730\u4ecb\u7ecd\u4e86\u6b64\u5904\u6240\u8ff0\u6bcf\u4e2a\u7c7b\u7684\u53c2\u6570\u548c\u65b9\u6cd5\u3002\n\n\n\u9996\u5148\u7b80\u8981\u6982\u62ec\u4e00\u4e0b\u7ec4\u6210\u8be5 API \u7684\u4e00\u4e9b\u6838\u5fc3\u7c7b\u3002 \uff08\u5982\u679c\u8fd9\u4e9b\u5b9a\u4e49\u521d\u770b\u8d77\u6765\u6709\u4e9b\u62bd\u8c61\uff0c\u8bf7\u4e0d\u8981\u62c5\u5fc3\uff1b\u540e\u9762\u6709\u6bd4\u8f83\u8be6\u5c3d\u7684\u6587\u5b57\u8bf4\u660e\uff0c\u4e0b\u4e00\u7ae0\u4e2d\u8be6\u7ec6\u6f14\u793a\u7684\u4ee3\u7801\u793a\u4f8b\u4e5f\u5c06\u6709\u52a9\u4e8e\u4f7f\u8fd9\u4e9b\u6982\u5ff5\u5177\u4f53\u5316\u3002\uff09\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVM\n\n\nVM \u5bf9\u8c61\u8868\u793a XenServer \u4e3b\u673a\u6216\u8d44\u6e90\u6c60\u4e0a\u7684\u7279\u5b9a\u865a\u62df\u673a\u5b9e\u4f8b\u3002 \u793a\u4f8b\u65b9\u6cd5\u5305\u62ec start\u3001suspend\u3001pool_migrate\uff1b\u793a\u4f8b\u53c2\u6570\u5305\u62ec power_state\u3001memory_static_max \u548c name_label\u3002 \uff08\u5728\u4e0a\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u5df2\u4e86\u89e3\u4e86\u5982\u4f55\u4f7f\u7528 VM \u7c7b\u6765\u8868\u793a\u6a21\u677f\u548c\u5e38\u89c4 VM\u3002\uff09\n\n\n\n\n\n\nHost\n\n\n\u4e3b\u673a\u5bf9\u8c61\u8868\u793a XenServer \u6c60\u4e2d\u7684\u7269\u7406\u4e3b\u673a\u3002\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec reboot \u548c shutdown\u3002\u793a\u4f8b\u53c2\u6570\u5305\u62ec software_version\u3001hostname \u548c [IP] address\u3002\n\n\n\n\n\n\nVDI\n\n\nVDI \u5bf9\u8c61\u8868\u793a\u865a\u62df\u78c1\u76d8\u6620\u50cf\u3002 \u53ef\u4ee5\u5c06\u865a\u62df\u78c1\u76d8\u6620\u50cf\u8fde\u63a5\u5230 VM\uff0c\u8fd9\u6837\uff0c\u5c06\u5728 VM \u5185\u90e8\u663e\u793a\u5757\u8bbe\u5907\uff0c\u901a\u8fc7\u8be5\u8bbe\u5907\u53ef\u4ee5\u8bfb\u53d6\u548c\u5199\u5165\u865a\u62df\u78c1\u76d8\u6620\u50cf\u5c01\u88c5\u7684\u4f4d\u3002 VDI \u7c7b\u7684\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec\u201cresize\u201d\u548c\u201cclone\u201d\u3002 \u793a\u4f8b\u5b57\u6bb5\u5305\u62ec\u201cvirtual_size\u201d\u548c\u201csharable\u201d\u3002 \uff08\u5728\u524d\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u5f53\u5728 VM \u6a21\u677f\u4e0a\u8c03\u7528 VM.provision \u540e\uff0c\u4e00\u4e9b\u8868\u793a\u65b0\u521b\u5efa\u7684\u78c1\u76d8\u7684 VDI \u5bf9\u8c61\u4fbf\u81ea\u52a8\u521b\u5efa\u5e76\u8fde\u63a5\u5230 VM \u5bf9\u8c61\u3002\uff09\n\n\n\n\n\n\nSR\n\n\nSR\uff08\u5b58\u50a8\u5e93\uff09\u805a\u5408 VDI \u7684\u96c6\u5408\u5e76\u5c01\u88c5 VDI \u4f4d\u6240\u5728\u7684\u7269\u7406\u5b58\u50a8\u7684\u5c5e\u6027\u3002 \u793a\u4f8b\u53c2\u6570\u5305\u62ec type\uff08\u786e\u5b9a XenServer \u5b89\u88c5\u7528\u6765\u8bfb/\u5199 SR \u7684 VDI \u7684\u7279\u5b9a\u4e8e\u5b58\u50a8\u7684\u9a71\u52a8\u7a0b\u5e8f\uff09\u548c physical_utilisation\uff1b\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec scan\uff08\u8c03\u7528\u7279\u5b9a\u4e8e\u5b58\u50a8\u7684\u9a71\u52a8\u7a0b\u5e8f\u4ee5\u83b7\u5f97\u5305\u542b\u5728 SR \u4e2d\u7684 VDI \u7684\u5217\u8868\u4ee5\u53ca\u8fd9\u4e9b VDI \u7684\u5c5e\u6027\uff09\u548c create\uff08\u521d\u59cb\u5316\u7269\u7406\u5b58\u50a8\u7684\u5757\uff0c\u4f7f\u5176\u51c6\u5907\u597d\u5b58\u50a8 VDI\uff09\u3002\n\n\n\n\n\n\nNetwork\n\n\n\u7f51\u7edc\u5bf9\u8c61\u8868\u793a\u5b58\u5728\u4e8e XenServer \u4e3b\u673a\u5b9e\u4f8b\u6240\u5728\u7684\u73af\u5883\u4e2d\u7684\u7b2c\u4e8c\u5c42\u7f51\u7edc\u3002 XenServer \u4e0d\u76f4\u63a5\u7ba1\u7406\u7f51\u7edc\uff0c\u56e0\u6b64\uff0c\u8fd9\u662f\u4e00\u4e2a\u8f7b\u578b\u7c7b\uff0c\u4ec5\u7528\u4e8e\u5bf9\u7269\u7406\u548c\u865a\u62df\u7f51\u7edc\u62d3\u6251\u8fdb\u884c\u5efa\u6a21\u3002 \u8fde\u63a5\u5230\u7279\u5b9a\u7f51\u7edc\u5bf9\u8c61\uff08\u901a\u8fc7 VIF \u548c PIF \u5b9e\u4f8b - \u8bf7\u53c2\u9605\u4e0b\u6587\uff09\u7684 VM \u548c\u4e3b\u673a\u5bf9\u8c61\u53ef\u4ee5\u5411\u5f7c\u6b64\u53d1\u9001\u7f51\u7edc\u6570\u636e\u5305\u3002\n\n\n\n\n\n\n\n\n\u6b64\u65f6\uff0c\u8bfb\u8005\u5982\u679c\u8ba4\u4e3a\u8fd9\u6837\u5217\u4e3e\u7c7b\u8fc7\u4e8e\u7b80\u5355\uff0c\u53ef\u4ee5\u8df3\u5230\u4e0b\u4e00\u7ae0\u63d0\u4f9b\u7684\u4ee3\u7801\u90e8\u5206\uff1a\u8be5\u90e8\u5206\u63d0\u4f9b\u4e86\u5927\u91cf\u6709\u7528\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ec5\u4f7f\u7528\u5df2\u7ecf\u4ecb\u7ecd\u7684\u4e00\u4e9b\u7c7b\u5c31\u53ef\u4ee5\u7f16\u5199\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\uff01 \u5bf9\u4e8e\u5e0c\u671b\u7ee7\u7eed\u6309\u6b64\u6458\u8981\u8bf4\u660e\u65b9\u5f0f\u4e86\u89e3\u7c7b\u7684\u8bfb\u8005\uff0c\u8bf7\u63a5\u7740\u9605\u8bfb\u3002\n\n\n\u5728\u4e0a\u9762\u5217\u51fa\u7684\u7c7b\u7684\u9876\u90e8\uff0c\u6709\u53e6\u5916 4 \u4e2a\u7528\u4f5c\u8fde\u63a5\u5668\u7684\u7c7b\uff0c\u7528\u4e8e\u6307\u5b9a VM \u548c\u4e3b\u673a\u3001\u5b58\u50a8\u548c\u7f51\u7edc\u4e4b\u95f4\u7684\u5173\u7cfb\u3002 \u6211\u4eec\u5c06\u4ecb\u7ecd\u5176\u4e2d\u7684\u524d 2 \u4e2a\u7c7b\uff08VBD \u548c VIF\uff09\u786e\u5b9a\u5982\u4f55\u5c06 VM \u5206\u522b\u8fde\u63a5\u5230\u865a\u62df\u78c1\u76d8\u548c\u7f51\u7edc\u5bf9\u8c61\uff1a\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVBD\n\n\nVBD\uff08\u865a\u62df\u5757\u8bbe\u5907\uff09\u5bf9\u8c61\u8868\u793a VM \u548c VDI \u4e4b\u95f4\u7684\u8fde\u63a5\u3002 \u5f15\u5bfc VM \u65f6\uff0c\u5c06\u67e5\u8be2\u5b83\u7684 VBD \u5bf9\u8c61\u4ee5\u786e\u5b9a\u5e94\u8be5\u8fde\u63a5\u54ea\u4e9b\u78c1\u76d8\u6620\u50cf (VDI)\u3002 VBD \u7c7b\u7684\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec\u201cplug\u201d\uff08\u5c06\u78c1\u76d8\u8bbe\u5907\u70ed\u63d2\u5165\u5230\u8fd0\u884c\u4e2d\u7684 VM\uff0c\u4ece\u800c\u4f7f\u6307\u5b9a\u7684 VDI \u53ef\u8bbf\u95ee\uff09\u548c\u201cunplug\u201d\uff08\u4ece\u8fd0\u884c\u4e2d\u7684\u6765\u5bbe\u7cfb\u7edf\u4e2d\u70ed\u62d4\u51fa\u78c1\u76d8\u8bbe\u5907\uff09\uff1b\u793a\u4f8b\u5b57\u6bb5\u5305\u62ec\u201cdevice\u201d\uff08\u786e\u5b9a\u6765\u5bbe\u7cfb\u7edf\u5185\u90e8\u7684\u8bbe\u5907\u540d\u79f0\uff0c\u901a\u8fc7\u8be5\u8bbe\u5907\u4e0b\u53ef\u8bbf\u95ee\u6307\u5b9a\u7684 VDI\uff09\u3002\n\n\n\n\n\n\nVIF\n\n\nVIF\uff08\u865a\u62df\u7f51\u7edc\u63a5\u53e3\uff09\u5bf9\u8c61\u8868\u793a VM \u548c\u7f51\u7edc\u5bf9\u8c61\u4e4b\u95f4\u7684\u8fde\u63a5\u3002 \u5f15\u5bfc VM \u65f6\uff0c\u5c06\u67e5\u8be2\u5b83\u7684 VIF \u5bf9\u8c61\u4ee5\u786e\u5b9a\u5e94\u521b\u5efa\u54ea\u4e9b\u7f51\u7edc\u8bbe\u5907\u3002 VIF \u7c7b\u7684\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec\u201cplug\u201d\uff08\u5c06\u7f51\u7edc\u8bbe\u5907\u70ed\u63d2\u5165\u5230\u8fd0\u884c\u4e2d\u7684 VM\uff09\u548c\u201cunplug\u201d\uff08\u4ece\u8fd0\u884c\u4e2d\u7684\u6765\u5bbe\u7cfb\u7edf\u4e2d\u70ed\u62d4\u51fa\u7f51\u7edc\u8bbe\u5907\uff09\u3002\n\n\n\n\n\n\n\n\n\u6211\u4eec\u8981\u4ecb\u7ecd\u7684\u7b2c\u4e8c\u7ec4\u201c\u8fde\u63a5\u5668\u7c7b\u201d\u786e\u5b9a\u5982\u4f55\u5c06\u4e3b\u673a\u8fde\u63a5\u5230\u7f51\u7edc\u548c\u5b58\u50a8\u3002 \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPIF\n\n\nPIF\uff08\u7269\u7406\u63a5\u53e3\uff09\u5bf9\u8c61\u8868\u793a\u4e3b\u673a\u548c\u7f51\u7edc\u5bf9\u8c61\u4e4b\u95f4\u7684\u8fde\u63a5\u3002 \u5982\u679c\u5c06\u4e3b\u673a\u8fde\u63a5\u5230\u7f51\u7edc\uff08\u901a\u8fc7 PIF\uff09\uff0c\u5219\u6307\u5b9a\u7684\u4e3b\u673a\u63d0\u4f9b\u7684\u6570\u636e\u5305\u53ef\u4ee5\u7531\u5bf9\u5e94\u7684\u4e3b\u673a\u4f20\u8f93/\u63a5\u6536\u3002 PIF \u7c7b\u7684\u793a\u4f8b\u5b57\u6bb5\u5305\u62ec\u201cdevice\u201d\uff08\u6307\u5b9a PIF \u5bf9\u5e94\u7684\u8bbe\u5907\u540d\u79f0\uff0c\u4f8b\u5982 eth0\uff09\u548c\u201cMAC\u201d\uff08\u6307\u5b9a PIF \u8868\u793a\u7684\u57fa\u7840 NIC \u7684 MAC \u5730\u5740\uff09\u3002 \u8bf7\u6ce8\u610f\uff0cPIF \u6307\u7269\u7406\u63a5\u53e3\u548c VLAN \u4e24\u8005\uff08\u540e\u8005\u7531\u201cVLAN\u201d\u5b57\u6bb5\u4e2d\u662f\u5426\u5b58\u5728\u6b63\u6574\u6570\u533a\u5206\uff09\u3002\n\n\n\n\n\n\nPBD\n\n\nPBD\uff08\u7269\u7406\u5757\u8bbe\u5907\uff09\u5bf9\u8c61\u8868\u793a\u4e3b\u673a\u548c SR\uff08\u5b58\u50a8\u5e93\uff09\u5bf9\u8c61\u4e4b\u95f4\u7684\u8fde\u63a5\u3002 \u5b57\u6bb5\u5305\u62ec\u201ccurrently-attached\u201d\u548c\u201cdevice_config\u201d\uff0c\u524d\u8005\u6307\u5b9a\u7531\u6307\u5b9a\u7684 SR \u5bf9\u8c61\u8868\u793a\u7684\u5b58\u50a8\u533a\u5757\u5f53\u524d\u662f\u5426\u5bf9\u4e3b\u673a\u53ef\u7528\uff0c\u540e\u8005\u6307\u5b9a\u53ef\u7528\u6765\u786e\u5b9a\u5982\u4f55\u5728\u6307\u5b9a\u7684\u4e3b\u673a\u4e0a\u914d\u7f6e\u4f4e\u7ea7\u5b58\u50a8\u8bbe\u5907\u7684\u7279\u5b9a\u4e8e\u5b58\u50a8\u9a71\u52a8\u7a0b\u5e8f\u7684\u53c2\u6570\uff0c\u4f8b\u5982\uff0c\u5bf9\u4e8e\u5728 NFS \u6587\u4ef6\u7ba1\u7406\u5668\u4e0a\u5448\u73b0\u7684 SR\uff0cdevice_config \u53ef\u4ee5\u6307\u5b9a\u8be5\u6587\u4ef6\u7ba1\u7406\u5668\u7684\u4e3b\u673a\u540d\u548c SR \u6587\u4ef6\u6240\u5728\u7684\u6587\u4ef6\u7ba1\u7406\u5668\u7684\u8def\u5f84\u3002\n\n\n\n\n\n\n\n\n\u4e0b\u56fe\u663e\u793a\u4e86\u7528\u4e8e\u7ba1\u7406 VM\u3001\u4e3b\u673a\u3001\u5b58\u50a8\u548c\u7f51\u7edc\u8fde\u63a5\u7684 API \u7c7b\u7684\u56fe\u5f62\u6982\u8ff0\u3002 \u4ece\u6b64\u56fe\u53ef\u4ee5\u6e05\u6670\u5730\u770b\u51fa\u5b58\u50a8\u548c\u7f51\u7edc\u914d\u7f6e\u4e4b\u95f4\u4ee5\u53ca\u865a\u62df\u673a\u548c\u4e3b\u673a\u914d\u7f6e\u4e4b\u95f4\u7684\u5bf9\u79f0\u6027\u3002\n\n\n\n\n\u4f7f\u7528 VIF \u548c VBD\n\n\n\u672c\u8282\u5c06\u8be6\u7ec6\u6f14\u793a\u51e0\u4e2a\u8f83\u590d\u6742\u7684\u65b9\u6848\uff0c\u5e76\u5c06\u975e\u6b63\u5f0f\u6027\u5730\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 API \u5b8c\u6210\u4e0e\u865a\u62df\u5b58\u50a8\u548c\u7f51\u7edc\u8bbe\u5907\u76f8\u5173\u7684\u591a\u79cd\u4efb\u52a1\u3002\n\n\n\u521b\u5efa\u78c1\u76d8\u5e76\u5c06\u5176\u8fde\u63a5\u5230 VM\n\n\n\u9996\u5148\uff0c\u8003\u8651\u5982\u4f55\u751f\u6210\u65b0\u7684\u7a7a\u767d\u78c1\u76d8\u6620\u50cf\u5e76\u5c06\u5176\u8fde\u63a5\u5230\u8fd0\u884c\u4e2d\u7684 VM\u3002 \u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u901a\u8fc7\u4e00\u4e9b\u524d\u671f\u5de5\u4f5c\u83b7\u5f97\u4e86\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684 VM\uff0c\u5e76\u4e14\u77e5\u9053\u5176\u76f8\u5e94\u7684 API \u5bf9\u8c61\u5f15\u7528\uff08\u4f8b\u5982\uff0c\u53ef\u80fd\u5df2\u4f7f\u7528\u4e0a\u4e00\u8282\u4ecb\u7ecd\u7684\u8fc7\u7a0b\u521b\u5efa\u4e86\u6b64 VM\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u5df2\u8fd4\u56de\u5176\u5f15\u7528\u3002\uff09\u8fd8\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u5411 XenServer \u5b89\u88c5\u901a\u8fc7\u4e86\u8eab\u4efd\u9a8c\u8bc1\u5e76\u5177\u6709\u76f8\u5e94\u7684\u4f1a\u8bdd\u5f15\u7528\u3002 \u4e3a\u7b80\u8981\u8d77\u89c1\uff0c\u5728\u672c\u7ae0\u7684\u5176\u4f59\u90e8\u5206\u4e2d\u5c06\u4e0d\u518d\u63d0\u53ca\u4f1a\u8bdd\u3002\n\n\n\u521b\u5efa\u65b0\u7684\u7a7a\u767d\u78c1\u76d8\u6620\u50cf\n\n\n\u7b2c\u4e00\u6b65\u662f\u5b9e\u4f8b\u5316\u7269\u7406\u5b58\u50a8\u4e2d\u7684\u78c1\u76d8\u6620\u50cf\u3002\u8fd9\u901a\u8fc7\u8c03\u7528 VDI.create() \u6765\u5b8c\u6210\u3002VDI.create \u8c03\u7528\u4f7f\u7528\u4e00\u4e9b\u53c2\u6570\uff0c\u5305\u62ec\uff1a\n\n\n\n\n\n\nName_label \u548c name_description\uff1a\u78c1\u76d8\u7684\u7528\u6237\u53ef\u8bfb\u540d\u79f0/\u8bf4\u660e\uff08\u4f8b\u5982\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u5728 UI \u4e2d\u663e\u793a\u7b49\uff09\u3002\u5982\u679c\u9700\u8981\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u53ef\u4ee5\u7559\u7a7a\u3002\n\n\n\n\n\n\nSR\uff1a\u5b58\u50a8\u5e93\u7684\u5bf9\u8c61\u5f15\u7528\uff0c\u8868\u793a\u5c06\u653e\u7f6e VDI \u7684\u4f4d\u7684\u7269\u7406\u5b58\u50a8\u3002\n\n\n\n\n\n\nread_only\uff1a\u5c06\u6b64\u5b57\u6bb5\u8bbe\u7f6e\u4e3a true \u8868\u793a VDI \u53ea\u80fd\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u8fde\u63a5\u5230 VM\u3002 \uff08\u5c1d\u8bd5\u4ee5\u8bfb/\u5199\u65b9\u5f0f\u8fde\u63a5 read_only \u5b57\u6bb5\u8bbe\u7f6e\u4e3a true \u7684 VDI \u4f1a\u5f15\u53d1\u9519\u8bef\u3002\uff09\n\n\n\n\n\n\n\u8c03\u7528 VDI.create \u8c03\u7528\u4f1a\u5bfc\u81f4 XenServer \u5b89\u88c5\u5728\u7269\u7406\u5b58\u50a8\u4e2d\u521b\u5efa\u7a7a\u767d\u78c1\u76d8\u6620\u50cf\u3001\u521b\u5efa\u76f8\u5173\u8054\u7684 VDI \u5bf9\u8c61\uff08\u6d89\u53ca\u7269\u7406\u5b58\u50a8\u4e2d\u7684\u78c1\u76d8\u6620\u50cf\u7684 datamodel \u5b9e\u4f8b\uff09\u5e76\u8fd4\u56de\u5bf9\u6b64\u65b0\u5efa\u7684 VDI \u5bf9\u8c61\u7684\u5f15\u7528\u3002\n\n\n\u7269\u7406\u5b58\u50a8\u4e2d\u8868\u793a\u78c1\u76d8\u6620\u50cf\u7684\u65b9\u5f0f\u53d6\u51b3\u4e8e\u521b\u5efa\u7684 VDI \u6240\u5728 SR \u7684\u7c7b\u578b\u3002 \u4f8b\u5982\uff0c\u5982\u679c SR \u4e3a\u201clvm\u201d\u7c7b\u578b\uff0c\u5219\u65b0\u7684\u78c1\u76d8\u6620\u50cf\u5c06\u5448\u73b0\u4e3a LVM \u5377\uff1b\u5982\u679c SR \u4e3a\u201cnfs\u201d\u7c7b\u578b\uff0c\u5219\u65b0\u7684\u78c1\u76d8\u6620\u50cf\u5c06\u5448\u73b0\u4e3a\u5728 NFS \u6587\u4ef6\u7ba1\u7406\u5668\u4e2d\u521b\u5efa\u7684\u7a00\u758f VHD \u6587\u4ef6\u3002 \uff08\u901a\u8fc7 API \u4f7f\u7528 SR.get_type() \u8c03\u7528\u53ef\u4ee5\u67e5\u8be2 SR \u7c7b\u578b\u3002\uff09\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u67d0\u4e9b SR \u7c7b\u578b\u53ef\u80fd\u4f1a\u5bf9 virtual-size \u503c\u8fdb\u884c\u820d\u5165\u5904\u7406\uff0c\u4ee5\u4f7f\u6b64\u503c\u53ef\u88ab\u5df2\u914d\u7f6e\u5757\u7684\u5927\u5c0f\u6574\u9664\u3002\n\n\n\u5c06\u78c1\u76d8\u6620\u50cf\u8fde\u63a5\u5230 VM\n\n\n\u81f3\u6b64\uff0c\u6211\u4eec\u6709\u4e86\u8fd0\u884c\u4e2d\u7684 VM\uff08\u5728\u6b64\u793a\u4f8b\u5f00\u5934\u5df2\u5047\u8bbe\u5b58\u5728\uff09\u548c\u521a\u521b\u5efa\u7684\u65b0 VDI\u3002 \u73b0\u5728\uff0cXenServer \u4e3b\u673a\u4e2d\u5df2\u6709\u4e24\u4e2a\u72ec\u7acb\u5bf9\u8c61\uff0c\u4f46\u6ca1\u6709\u4ec0\u4e48\u5bf9\u8c61\u5c06\u5b83\u4eec\u94fe\u63a5\u8d77\u6765\u3002 \u56e0\u6b64\uff0c\u4e0b\u4e00\u6b65\u8981\u521b\u5efa\u4e00\u4e2a\u8fd9\u6837\u7684\u94fe\u63a5\uff0c\u5c06 VDI \u4e0e VM \u5173\u8054\u8d77\u6765\u3002\n\n\n\u901a\u8fc7\u521b\u5efa\u540d\u4e3a VBD\uff08\u865a\u62df\u5757\u8bbe\u5907\uff09\u7684\u65b0\u201c\u8fde\u63a5\u5668\u201d\u5bf9\u8c61\u5efa\u7acb\u8fde\u63a5\u3002 \u8981\u521b\u5efa VBD\uff0c\u9700\u8981\u8c03\u7528 VBD.create() \u8c03\u7528\u3002 VBD.create() \u8c03\u7528\u5c06\u4f7f\u7528\u591a\u4e2a\u53c2\u6570\uff0c\u5305\u62ec\uff1a\n\n\n\n\n\n\nVM - \u8fde\u63a5 VDI \u7684 VM \u7684\u5bf9\u8c61\u5f15\u7528\u3002\n\n\n\n\n\n\nVDI - \u8981\u8fde\u63a5\u7684 VDI \u7684\u5bf9\u8c61\u5f15\u7528\u3002\n\n\n\n\n\n\nmode - \u6307\u5b9a VDI \u662f\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u8fd8\u662f\u8bfb\u5199\u65b9\u5f0f\u8fde\u63a5\u3002\n\n\n\n\n\n\nuserdevice - \u6307\u5b9a\u6765\u5bbe\u7cfb\u7edf\u4e2d\u7684\u5757\u8bbe\u5907\uff0c\u901a\u8fc7\u8be5\u8bbe\u5907\u6b63\u5728 VM \u4e2d\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u5c06\u80fd\u8bfb/\u5199 VDI \u7684\u4f4d\u3002\n\n\n\n\n\n\ntype - \u6307\u5b9a VDI \u662f\u5e94\u5f53\u4f5c\u4e3a\u5e38\u89c4\u78c1\u76d8\u8fd8\u662f\u4f5c\u4e3a CD \u663e\u793a\u5728 VM \u4e2d\u3002 \uff08\u8bf7\u6ce8\u610f\uff0c\u6b64\u7279\u5b9a\u5b57\u6bb5\u5728 Windows VM \u4e2d\u7684\u542b\u4e49\u6bd4\u5728 Linux VM \u4e2d\u66f4\u4e30\u5bcc\uff0c\u4f46\u5728\u672c\u7ae0\uff0c\u6211\u4eec\u4e0d\u7814\u7a76\u6b64\u7ea7\u522b\u7684\u8be6\u7ec6\u5185\u5bb9\u3002\uff09\n\n\n\n\n\n\n\u8c03\u7528 VBD.create \u5c06\u5728 XenServer \u5b89\u88c5\u4e2d\u751f\u6210 VBD \u5bf9\u8c61\u5e76\u8fd4\u56de\u5176\u5bf9\u8c61\u5f15\u7528\u3002 \u4f46\u662f\uff0c\u6b64\u8c03\u7528\u672c\u8eab\u5bf9\u8fd0\u884c\u4e2d\u7684 VM \u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u5f71\u54cd\uff08\u5373\uff0c\u5982\u679c\u67e5\u770b\u8fd0\u884c\u4e2d\u7684 VM\uff0c\u60a8\u4f1a\u53d1\u73b0\u5e76\u672a\u521b\u5efa\u5757\u8bbe\u5907\uff09\u3002 VBD \u5bf9\u8c61\u7684 currently_attached \u5b57\u6bb5\u8bbe\u7f6e\u4e3a false \u53ef\u53cd\u6620\u5b58\u5728 VBD \u5bf9\u8c61\u4f46\u6765\u5bbe\u7cfb\u7edf\u4e2d\u7684\u5757\u8bbe\u5907\u5904\u4e8e\u975e\u6d3b\u52a8\u72b6\u6001\u3002\n\n\n\u4e3a\u4e86\u8fdb\u884c\u8bf4\u660e\uff0c\u4e0b\u56fe\u63d0\u4f9b\u4e86\u4e00\u4e2a\u56fe\u5f62\u793a\u4f8b\u4ee5\u663e\u793a VM\u3001VBD\u3001VDI \u548c SR \u4e4b\u95f4\u5173\u7cfb\u3002 \u5728\u8be5\u5b9e\u4f8b\u4e2d\uff0c\u4e00\u4e2a VM \u5bf9\u8c61\u8fde\u63a5\u4e24\u4e2a VDI\uff1a\u4e24\u4e2a VBD \u5bf9\u8c61\u6784\u6210 VM \u5bf9\u8c61\u4e0e\u5176 VDI \u4e4b\u95f4\u7684\u8fde\u63a5\uff0c\u8fd9\u4e9b VDI \u4f4d\u4e8e\u540c\u4e00\u4e2a SR \u5185\u3002\n\n\n\n\n\u70ed\u63d2\u62d4 VBD\n\n\n\u5982\u679c\u6211\u4eec\u5728\u8be5\u9636\u6bb5\u91cd\u65b0\u542f\u52a8 VM\uff0c\u5219\u91cd\u65b0\u542f\u52a8\u540e\uff0c\u5c06\u663e\u793a\u5bf9\u5e94\u4e8e VBD \u7684\u5757\u8bbe\u5907\uff1a\u5f15\u5bfc\u65f6\uff0cXenServer \u5c06\u67e5\u8be2 VM \u7684\u6240\u6709 VBD\uff0c\u5e76\u4e3b\u52a8\u8fde\u63a5\u6bcf\u4e2a\u5bf9\u5e94\u7684 VDI\u3002\n\n\n\u91cd\u65b0\u542f\u52a8 VM \u56fa\u7136\u5f88\u597d\uff0c\u8bf7\u8bb0\u4f4f\u6211\u4eec\u60f3\u8981\u5c06\u65b0\u521b\u5efa\u7684\u7a7a\u767d\u78c1\u76d8\u8fde\u63a5\u5230\u8fd0\u884c\u4e2d\u7684 VM\u3002 \u53ef\u901a\u8fc7\u5bf9\u65b0\u521b\u5efa\u7684 VBD \u5bf9\u8c61\u8c03\u7528 plug \u65b9\u6cd5\u5b9e\u73b0\u6b64\u76ee\u7684\u3002 plug \u8c03\u7528\u6210\u529f\u8fd4\u56de\u540e\uff0c\u4e0e VBD \u76f8\u5173\u7684\u5757\u8bbe\u5907\u5c06\u51fa\u73b0\u5728\u8fd0\u884c\u4e2d\u7684 VM \u5185\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ece\u8fd0\u884c\u4e2d\u7684 VM \u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6765\u5bbe\u64cd\u4f5c\u7cfb\u7edf\u5c06\u8ba4\u4e3a\u521a\u521a\u70ed\u63d2\u5165\u4e86\u65b0\u78c1\u76d8\u8bbe\u5907\u3002 \u6b64\u60c5\u51b5\u53cd\u6620\u5728 API \u7684\u6258\u7ba1\u73af\u5883\u4e2d\uff0c\u5373 VBD \u7684 currently_attached \u5b57\u6bb5\u8bbe\u7f6e\u4e3a true\u3002\n\n\nVBD plug \u65b9\u6cd5\u76f8\u5e94\u5730\u5177\u6709\u540d\u4e3a\u201cunplug\u201d\u7684\u65b9\u6cd5\u4e0e\u5176\u5bf9\u5e94\u3002 \u5bf9 VBD \u5bf9\u8c61\u8c03\u7528 unplug \u65b9\u6cd5\u4f1a\u5bfc\u81f4\u4ece\u8fd0\u884c\u4e2d\u7684 VM \u70ed\u62d4\u51fa\u76f8\u5173\u7684\u5757\u8bbe\u5907\uff0c\u76f8\u5e94\u5730\u5bfc\u81f4 VBD \u5bf9\u8c61\u7684 currently_attached \u5b57\u6bb5\u8bbe\u7f6e\u4e3a false\u3002\n\n\n\u521b\u5efa\u7f51\u7edc\u8bbe\u5907\u5e76\u5c06\u5176\u8fde\u63a5\u5230 VM\n\n\n\u5728 VM \u4e2d\u914d\u7f6e\u865a\u62df\u7f51\u7edc\u63a5\u53e3\u6240\u6d89\u53ca\u7684 API \u8c03\u7528\u4e0e\u914d\u7f6e\u865a\u62df\u78c1\u76d8\u8bbe\u5907\u6240\u6d89\u53ca\u7684\u8c03\u7528\u5728\u8bb8\u591a\u65b9\u9762\u90fd\u5f88\u76f8\u4f3c\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u901a\u8fc7\u5b8c\u6574\u7684\u793a\u4f8b\u6765\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 API \u5bf9\u8c61\u6a21\u578b\u521b\u5efa\u7f51\u7edc\u63a5\u53e3\uff1b\u800c\u53ea\u5728\u672c\u8282\u7b80\u8981\u8bf4\u660e\u865a\u62df\u7f51\u7edc\u8fde\u63a5\u8bbe\u5907\u4e0e\u865a\u62df\u5b58\u50a8\u8bbe\u5907\u914d\u7f6e\u4e4b\u95f4\u7684\u5bf9\u79f0\u6027\u3002\n\n\nVBD \u7c7b\u7684\u7f51\u7edc\u8fde\u63a5\u5bf9\u7b49\u5bf9\u8c61\u4e3a VIF \u7c7b\u3002 \u5982\u540c VBD \u662f\u5757\u8bbe\u5907\u5728 VM \u4e2d\u7684 API \u8868\u793a\uff0cVIF\uff08\u865a\u62df\u7f51\u7edc\u63a5\u53e3\uff09\u662f\u7f51\u7edc\u8bbe\u5907\u5728 VM \u4e2d\u7684 API \u8868\u793a\u3002 VBD \u5c06 VM \u5bf9\u8c61\u4e0e VDI \u5bf9\u8c61\u76f8\u5173\u8054\uff0c\u800c VIF \u5c06 VM \u5bf9\u8c61\u4e0e\u7f51\u7edc\u5bf9\u8c61\u76f8\u5173\u8054\u3002 \u5982\u540c VBD\uff0cVIF \u4e5f\u5177\u6709\u51b3\u5b9a\u4e0e VIF \u76f8\u5173\u8054\u7684\u7f51\u7edc\u8bbe\u5907\uff08\u6765\u5bbe\u7cfb\u7edf\u5185\u90e8\uff09\u5f53\u524d\u662f\u5426\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684 currently_attached \u5b57\u6bb5\u3002 \u5982\u540c VBD\uff0c\u5728\u5f15\u5bfc VM \u65f6\uff0c\u7cfb\u7edf\u5c06\u67e5\u8be2 VM \u7684 VIF \u5e76\u5728\u5f15\u5bfc\u7684 VM \u5185\u90e8\u521b\u5efa\u6bcf\u4e2a VIF \u7684\u76f8\u5e94\u7f51\u7edc\u8bbe\u5907\u3002 \u540c\u6837\uff0cVIF \u4e5f\u5177\u6709 plug \u548c unplug \u65b9\u6cd5\uff0c\u7528\u4e8e\u5c06\u7f51\u7edc\u8bbe\u5907\u70ed\u63d2\u5165/\u62d4\u51fa\u8fd0\u884c\u4e2d\u7684 VM\u3002\n\n\n\u7f51\u7edc\u8fde\u63a5\u548c\u5b58\u50a8\u7684\u4e3b\u673a\u914d\u7f6e\n\n\n\u6211\u4eec\u5df2\u77e5\u9053 VBD \u7c7b\u548c VIF \u7c7b\u5206\u522b\u7528\u4e8e\u7ba1\u7406 VM \u4e2d\u5757\u8bbe\u5907\u548c\u7f51\u7edc\u8bbe\u5907\u7684\u914d\u7f6e\u3002\u5b58\u5728\u4e24\u4e2a\u76f8\u4f3c\u7684\u7c7b\u53ef\u7528\u4e8e\u7ba1\u7406\u5b58\u50a8\u548c\u7f51\u7edc\u8fde\u63a5\u7684\u4e3b\u673a\u914d\u7f6e\uff1aPBD\uff08\u7269\u7406\u5757\u8bbe\u5907\uff09\u548c PIF\uff08\u7269\u7406[\u7f51\u7edc]\u63a5\u53e3\uff09\u3002\n\n\n\u4e3b\u673a\u5b58\u50a8\u914d\u7f6e\uff1aPBD\n\n\n\u6211\u4eec\u4ece PBD \u7c7b\u5f00\u59cb\u8ba8\u8bba\u3002PBD.create() \u8c03\u7528\u4f7f\u7528\u591a\u4e2a\u53c2\u6570\uff0c\u5305\u62ec\uff1a\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nhost\n\n\n\u53ef\u4ee5\u5728\u5176\u4e2d\u63d0\u4f9b PBD \u7684\u7269\u7406\u673a\n\n\n\n\n\n\nSR\n\n\nPBD \u6240\u8fde\u63a5\u7684\u5b58\u50a8\u5e93\n\n\n\n\n\n\ndevice_config\n\n\n\u63d0\u4f9b\u7ed9\u4e3b\u673a\u7684 SR \u540e\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u5b57\u7b26\u4e32\u5230\u5b57\u7b26\u4e32\u6620\u5c04\uff0c\u5305\u542b\u914d\u7f6e\u8981\u5728\u5176\u4e0a\u5b9e\u73b0 SR \u7684\u7269\u7406\u5b58\u50a8\u8bbe\u5907\u6240\u9700\u7684\u4f4e\u7ea7\u53c2\u6570\u3002 device_config \u5b57\u6bb5\u7684\u7279\u5b9a\u5185\u5bb9\u53d6\u51b3\u4e8e PBD \u8fde\u63a5\u5230\u7684 SR \u7684\u7c7b\u578b\u3002 \uff08\u6267\u884c xe sm-list \u5c06\u663e\u793a\u53ef\u80fd\u7684 SR \u7c7b\u578b\u7684\u5217\u8868\uff1b\u6b64\u679a\u4e3e\u4e2d\u7684 configuration \u5b57\u6bb5\u5c06\u6307\u5b9a\u6bcf\u4e2a SR \u7c7b\u578b\u6240\u9700\u7684 device_config \u53c2\u6570\u3002\uff09\n\n\n\n\n\n\n\n\n\u4f8b\u5982\uff0c\u5047\u8bbe\u5177\u6709\u201cnfs\u201d\u7c7b\u578b\u7684 SR \u5bf9\u8c61 s\uff08\u8868\u793a\u4ee5 VHD \u6587\u4ef6\u5f62\u5f0f\u5b58\u50a8 VDI \u7684 NFS \u6587\u4ef6\u7ba1\u7406\u5668\u4e2d\u7684\u76ee\u5f55\uff09\uff1b\u5e76\u5047\u8bbe\u9700\u8981\u4e00\u53f0\u4e3b\u673a h \u4ee5\u4fbf\u80fd\u591f\u8bbf\u95ee s\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8c03\u7528 PBD.create()\uff0c\u5728\u5176\u4e2d\u6307\u5b9a\u4e3b\u673a h\u3001SR s \u548c device_config \u53c2\u6570\u7684\u503c\uff0c\u6620\u5c04\u5982\u4e0b\ufe30\n\n\n(\nserver\n, \nmy_nfs_server.example.com\n), (\nserverpath\n, \n/scratch/mysrs/sr1\n)\n\n\n\n\n\n\u901a\u77e5 XenServer \u4e3b\u673a\u5728\u4e3b\u673a h \u4e2d\u53ef\u8bbf\u95ee SR s\uff0c\u5982\u9700\u8fdb\u4e00\u6b65\u8bbf\u95ee SR s\uff0c\u4e3b\u673a\u9700\u8981\u5728\u540d\u4e3a my_nfs_server.example.com \u7684 NFS \u670d\u52a1\u5668\u4e0a\u88c5\u8f7d /scratch/mysrs/sr1 \u76ee\u5f55\u3002\n\n\n\u5982\u540c VBD \u5bf9\u8c61\uff0cPBD \u5bf9\u8c61\u4e5f\u5177\u6709\u540d\u4e3a currently_attached \u7684\u5b57\u6bb5\u3002\u5206\u522b\u901a\u8fc7\u8c03\u7528 PBD.plug \u65b9\u6cd5\u548c PBD.unplug \u65b9\u6cd5\uff0c\u53ef\u4ee5\u4ece\u7ed9\u5b9a\u4e3b\u673a\u8fde\u63a5\u548c\u5206\u79bb\u5b58\u50a8\u5e93\u3002\n\n\n\u4e3b\u673a\u7f51\u7edc\u8fde\u63a5\u914d\u7f6e\uff1aPIF\n\n\n\u4e3b\u673a\u7f51\u7edc\u914d\u7f6e\u901a\u8fc7 PIF \u5bf9\u8c61\u6307\u5b9a\u3002 \u5982\u679c PIF \u5bf9\u8c61\u5c06\u7f51\u7edc\u5bf9\u8c61 n \u8fde\u63a5\u5230\u4e3b\u673a\u5bf9\u8c61 h\uff0c\u5219\u5bf9\u5e94\u4e8e n \u7684\u7f51\u7edc\u5c06\u6865\u63a5\u5230\u7531 PIF \u5bf9\u8c61\u7684\u5b57\u6bb5\u6307\u5b9a\u7684\u7269\u7406\u63a5\u53e3\uff08\u6216\u4e00\u4e2a\u52a0\u4e86 VLAN \u6807\u8bb0\u7684\u7269\u7406\u63a5\u53e3\uff09\u3002\n\n\n\u4f8b\u5982\uff0c\u5047\u8bbe\u5b58\u5728\u5c06\u4e3b\u673a h \u8fde\u63a5\u5230\u7f51\u7edc n \u7684 PIF \u5bf9\u8c61\uff0c\u5e76\u4e14 PIF \u5bf9\u8c61\u7684 device \u5b57\u6bb5\u8bbe\u7f6e\u4e3a eth0\u3002 \u8fd9\u610f\u5473\u7740\uff0c\u7f51\u7edc n \u4e0a\u7684\u6240\u6709\u6570\u636e\u5305\u90fd\u5c06\u901a\u8fc7\u6865\u4f20\u8f93\u5230\u4e3b\u673a\u4e2d\u4e0e\u4e3b\u673a\u7f51\u7edc\u8bbe\u5907 eth0 \u5bf9\u5e94\u7684 NIC\u3002\n\n\n\u5bfc\u51fa\u548c\u5bfc\u5165 VM\n\n\nVM \u53ef\u4ee5\u5bfc\u51fa\u5230\u67d0\u4e2a\u6587\u4ef6\uff0c\u7136\u540e\u518d\u5bfc\u5165\u5230\u4efb\u4f55 XenServer \u4e3b\u673a\u3002 \u5bfc\u51fa\u534f\u8bae\u662f\u7b80\u5355\u7684 HTTP(S) GET\uff0c\u5982\u679c VM \u4f4d\u4e8e\u6c60\u6210\u5458\u4e0a\uff0c\u5e94\u5728\u4e3b\u8282\u70b9\u4e0a\u6267\u884c\u6b64\u534f\u8bae\u3002 \u6388\u6743\u662f\u6807\u51c6 HTTP \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6216\u8005\u5982\u679c\u5df2\u83b7\u5f97\u4e86\u4f1a\u8bdd\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u4f1a\u8bdd\u3002 \u8981\u5bfc\u51fa\u7684 VM \u7531 UUID \u6216\u5f15\u7528\u6307\u5b9a\u3002 \u8981\u8ddf\u8e2a\u5bfc\u51fa\uff0c\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u5e76\u4f7f\u7528\u5176\u5f15\u7528\u4f20\u5165\u3002 \u5982\u679c\u53ea\u80fd\u5728\u6c60\u6210\u5458\u4e0a\u8bbf\u95ee VM \u7684\u78c1\u76d8\uff0c\u5219\u8bf7\u6c42\u53ef\u80fd\u4f1a\u5bfc\u81f4\u91cd\u5b9a\u5411\u3002\n\n\n\u4e0b\u5217\u53c2\u6570\u901a\u8fc7\u547d\u4ee4\u884c\u4f20\u9012\uff1a\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nsession_id\n\n\n\u7528\u4e8e\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u7684\u4f1a\u8bdd\u7684\u5f15\u7528\uff1b\u4ec5\u5728\u4e0d\u4f7f\u7528 HTTP \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\u65f6\u9700\u8981\n\n\n\n\n\n\ntask_id\n\n\n\u7528\u4e8e\u8ddf\u8e2a\u64cd\u4f5c\u7684\u4efb\u52a1\u5bf9\u8c61\u7684\u5f15\u7528\uff1b\u662f\u53ef\u9009\u53c2\u6570\uff0c\u53ea\u6709\u5728\u5df2\u521b\u5efa\u4efb\u52a1\u5bf9\u8c61\u6765\u8ddf\u8e2a\u5bfc\u51fa\u65f6\uff0c\u624d\u9700\u8981\u6b64\u53c2\u6570\n\n\n\n\n\n\nref\n\n\nVM \u7684\u5f15\u7528\uff1b\u4ec5\u5728\u4e0d\u4f7f\u7528 UUID \u65f6\u9700\u8981\n\n\n\n\n\n\nuuid\n\n\nVM \u7684 UUID\uff1b\u4ec5\u5728\u4e0d\u4f7f\u7528\u5f15\u7528\u65f6\u9700\u8981\n\n\n\n\n\n\n\n\n\u4f8b\u5982\uff0c\u4f7f\u7528 Linux \u547d\u4ee4\u884c\u5de5\u5177 cURL\uff1a\n\n\ncurl http://root:foo@myxenserver1/export?uuid=\nvm_uuid\n -o \nexportfile\n\n\n\n\n\n\n\u4f1a\u5c06\u6307\u5b9a VM \u5bfc\u51fa\u5230\u6587\u4ef6 exportfile\u3002\n\n\n\u82e5\u8981\u4ec5\u5bfc\u51fa\u5143\u6570\u636e\uff0c\u8bf7\u4f7f\u7528 URI http://server/export_metadata\u3002\n\n\n\u5bfc\u5165\u534f\u8bae\u4e0e\u5bfc\u51fa\u534f\u8bae\u7c7b\u4f3c\uff0c\u4f7f\u7528\u7684\u662f HTTP(S) PUT\u3002 session_id \u548c task_id \u53c2\u6570\u4e0e\u5bfc\u51fa\u4e00\u6837\u3002 \u4e0d\u4f7f\u7528 ref \u548c uuid\uff1b\u5c06\u4e3a VM \u751f\u6210\u65b0\u5f15\u7528\u548c UUID\u3002 \u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u53c2\u6570\uff1a\n\n\n\n\n\n\n\n\n\u53c2\u6570\n\n\n\u8bf4\u660e\n\n\n\n\n\n\n\n\n\n\nrestore\n\n\n\u5982\u679c\u4e3a true\uff0c\u5219\u5bf9\u5bfc\u5165\u7684\u5904\u7406\u65b9\u5f0f\u662f\u66ff\u6362\u539f\u59cb VM - \u8fd9\u610f\u5473\u7740\u5728\u5f53\u524d\u7684\u60c5\u51b5\u4e0b VIF \u4e0a\u7684 MAC \u5730\u5740\u4e0e\u5bfc\u51fa\u5b8c\u5168\u4e00\u6837\uff0c\u5982\u679c\u539f\u59cb VM \u4ecd\u5728\u8fd0\u884c\uff0c\u5c31\u4f1a\u5bfc\u81f4\u51b2\u7a81\u3002\n\n\n\n\n\n\nforce\n\n\n\u5982\u679c\u4e3a true\uff0c\u5c06\u5ffd\u7565\u6240\u6709\u6821\u9a8c\u548c\u5931\u8d25\uff08\u9ed8\u8ba4\u4e3a\u5728\u68c0\u6d4b\u5230\u6821\u9a8c\u548c\u9519\u8bef\u65f6\u9500\u6bc1 VM\uff09\u3002\n\n\n\n\n\n\nsr_id\n\n\n\u5e94\u5c06 VM \u5bfc\u5165\u5176\u4e2d\u7684 SR \u7684\u5f15\u7528\u3002\u9ed8\u8ba4\u884c\u4e3a\u662f\u5bfc\u5165\u5230 Pool.default_SR\u3002\n\n\n\n\n\n\n\n\n\u4f8b\u5982\uff0c\u518d\u6b21\u4f7f\u7528 cURL\uff1a\n\n\ncurl -T \nexportfile\n http://root:foo@myxenserver2/import\n\n\n\n\n\n\u4f1a\u5c06 VM \u5bfc\u5165\u5230\u670d\u52a1\u5668\u4e0a\u7684\u9ed8\u8ba4 SR\u3002\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u5982\u679c\u5c1a\u672a\u8bbe\u7f6e\u9ed8\u8ba4 SR \u4e14\u672a\u6307\u5b9a sr_uuid\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u6d88\u606f\u201cDEFAULT_SR_NOT_FOUND\u201d\u3002\n\n\n\u53e6\u4e00\u4e2a\u793a\u4f8b\uff1a\n\n\ncurl \n-\nT \nexportfile\n \nhttp://root:foo@myxenserver2/import?sr_id=\nopaque_ref_of_sr\n\n\n\n\n\n\n\u4f1a\u5c06 VM \u5bfc\u5165\u5230\u670d\u52a1\u5668\u4e0a\u7684\u6307\u5b9a SR\u3002\n\n\n\u82e5\u8981\u4ec5\u5bfc\u5165\u5143\u6570\u636e\uff0c\u8bf7\u4f7f\u7528 URI http://server/import_metadata\n\n\nXen Virtual Appliance (XVA) VM \u5bfc\u5165\u683c\u5f0f\n\n\nXenServer \u652f\u6301\u4e00\u79cd\u79f0\u4e3a XVA \u7684\u7528\u6237\u53ef\u8bfb\u7684\u65e7 VM \u8f93\u5165\u683c\u5f0f\u3002\u672c\u8282\u4ecb\u7ecd XVA \u7684\u8bed\u6cd5\u548c\u7ed3\u6784\u3002\n\n\nXVA \u7531\u5305\u542b XML \u5143\u6570\u636e\u548c\u4e00\u7ec4\u78c1\u76d8\u6620\u50cf\u7684\u76ee\u5f55\u7ec4\u6210\u3002 \u7531 XVA \u8868\u793a\u7684 VM \u5e76\u4e0d\u662f\u53ef\u76f4\u63a5\u6267\u884c\u7684\u3002 XVA \u5305\u4e2d\u7684\u6570\u636e\u5df2\u538b\u7f29\uff0c\u5e76\u4e14\u53ef\u5728\u6c38\u4e45\u6027\u5b58\u50a8\u4e0a\u5b58\u6863\u6216\u4f20\u8f93\u5230 VM \u670d\u52a1\u5668\uff08\u5982 XenServer \u4e3b\u673a\uff09\uff0c\u53ef\u5728\u8fd9\u91cc\u8fdb\u884c\u89e3\u538b\u7f29\u548c\u6267\u884c\u3002\n\n\nXVA \u662f\u4e00\u79cd\u4e0d\u4f9d\u8d56\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\u7684\u6253\u5305\u683c\u5f0f\uff1b\u53ef\u4ee5\u521b\u5efa\u7b80\u5355\u5de5\u5177\u6765\u5728\u4efb\u4f55\u5176\u4ed6\u5e73\u53f0\u4e0a\u5b9e\u4f8b\u5316 XVA VM\u3002 XVA \u4e0d\u6307\u5b9a\u4efb\u4f55\u7279\u5b9a\u8fd0\u884c\u65f6\u683c\u5f0f\uff1b\u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06\u78c1\u76d8\u5b9e\u4f8b\u5316\u4e3a\u6587\u4ef6\u6620\u50cf\u3001LVM \u5377\u3001QCoW \u6620\u50cf\u3001VMDK \u6216 VHD \u6620\u50cf\u3002 \u53ef\u4ee5\u5bf9 XVA VM \u8fdb\u884c\u4efb\u610f\u6b21\u6570\u7684\u5b9e\u4f8b\u5316\uff0c\u6bcf\u6b21\u5b9e\u4f8b\u5316\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u8fd0\u884c\u65f6\u683c\u5f0f\u3002\n\n\nXVA \u4e0d\u80fd\uff1a\n\n\n\n\n\n\n\u6307\u5b9a\u4efb\u4f55\u7279\u5b9a\u5e8f\u5217\u5316\u6216\u4f20\u8f93\u683c\u5f0f\n\n\n\n\n\n\n\u63d0\u4f9b\u5b89\u88c5\u65f6\u81ea\u5b9a\u4e49 VM\uff08\u6216\u6a21\u677f\uff09\u7684\u4efb\u4f55\u673a\u5236\n\n\n\n\n\n\n\u89e3\u51b3\u5b89\u88c5\u540e\u5982\u4f55\u5347\u7ea7 VM\n\n\n\n\n\n\n\u5b9a\u4e49\u7528\u4f5c\u8bbe\u5907\u7684\u591a\u4e2a VM \u5982\u4f55\u8fdb\u884c\u901a\u4fe1\n\n\n\n\n\n\n\u8fd9\u4e9b\u95ee\u9898\u5168\u90e8\u7531\u76f8\u5173\u7684\u5f00\u653e\u5f0f\u865a\u62df\u8bbe\u5907\u89c4\u8303\u89e3\u51b3\u3002\n\n\nXVA \u662f\u81f3\u5c11\u5305\u542b\u4e00\u4e2a ova.xml \u6587\u4ef6\u7684\u76ee\u5f55\u3002 \u6b64\u6587\u4ef6\u63cf\u8ff0 XVA \u4e2d\u5305\u542b\u7684 VM\uff0c\u5c06\u5728 3.2 \u8282\u4e2d\u4ecb\u7ecd\u3002\u78c1\u76d8\u5b58\u50a8\u5728\u5b50\u76ee\u5f55\u4e2d\uff0c\u5e76\u901a\u8fc7 ova.xml \u8fdb\u884c\u5f15\u7528\u3002 \u78c1\u76d8\u6570\u636e\u7684\u683c\u5f0f\u7a0d\u540e\u5c06\u5728 3.3 \u8282\u4e2d\u4ecb\u7ecd\u3002\n\n\n\u5728\u672c\u7ae0\u7684\u5176\u4ed6\u90e8\u5206\u4e2d\u5c06\u4f1a\u4f7f\u7528\u4ee5\u4e0b\u672f\u8bed\uff1a\n\n\n\n\n\n\nHVM\uff1a\u672a\u4fee\u6539\u7684\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7684\u4e00\u79cd\u8fd0\u884c\u6a21\u5f0f\uff0c\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\u9700\u8981\u501f\u52a9\u786c\u4ef6\u4e2d\u7684\u865a\u62df\u5316\u652f\u6301\u3002\n\n\n\n\n\n\nPV\uff1a\u7ecf\u8fc7\u7279\u6b8a\u4fee\u6539\u7684\u201c\u534a\u865a\u62df\u5316\u201d\u5185\u6838\u57fa\u4e8e\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\u663e\u5f0f\u8fd0\u884c\u7684\u4e00\u79cd\u6a21\u5f0f\uff0c\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\u4e0d\u9700\u8981\u5bf9\u865a\u62df\u5316\u63d0\u4f9b\u786c\u4ef6\u652f\u6301\u3002\n\n\n\n\n\n\n\u201cova.xml\u201d\n\u6587\u4ef6\u5305\u542b\u4ee5\u4e0b\u5143\u7d20\uff1a\n\n\nappliance\n \nversion=\n0.1\n\n\n\n\n\n\n\u5c5e\u6027\u201cversion\u201d\u4e2d\u7684\u6570\u5b57\u8868\u793a\u6784\u5efa XVA \u7684\u6b64\u89c4\u8303\u7684\u7248\u672c\uff1b\u5728\u672c\u4f8b\u4e2d\u4e3a 0.1\u3002\u5728 \nappliance\n \u4e2d\u53ea\u6709\u4e00\u4e2a \nvm\n\uff1a\uff08\u5728 OVA \u89c4\u8303\u4e2d\uff0c\u5141\u8bb8\u591a\u4e2a \nvm\n\uff09\n\n\nvm\n \nname=\nname\n\n\n\n\n\n\n\u6bcf\u4e2a \n \u5143\u7d20\u63cf\u8ff0\u4e00\u4e2a VM\u3002\u201cname\u201d\u5c5e\u6027\u4ec5\u4f9b\u5c06\u6765\u5728\u5185\u90e8\u4f7f\u7528\uff0c\u4e14\u5728 ova.xml \u6587\u4ef6\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u201cname\u201d\u5c5e\u6027\u53ef\u4ee5\u662f\u4efb\u4f55\u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u4e32\u3002\u6bcf\u4e2a \n \u6807\u8bb0\u5305\u542b\u4ee5\u4e0b\u5fc5\u9700\u5143\u7d20\uff1a\n\n\nlabel\n... text ... \n/label\n\n\n\n\n\n\n\u663e\u793a\u5728 UI \u4e2d\u7684 VM \u7684\u77ed\u540d\u79f0\u3002\n\n\nshortdesc\n ... description ... \n/shortdesc\n\n\n\n\n\n\n\u663e\u793a\u5728 UI \u4e2d\u7684 VM \u7684\u8bf4\u660e\u3002\u8bf7\u6ce8\u610f\uff0c\u5bf9\u4e8e \nlabel\n \u548c \nshortdesc\n \u5185\u5bb9\uff0c\u5c06\u5ffd\u7565\u524d\u5bfc\u7a7a\u683c\u548c\u5c3e\u968f\u7a7a\u683c\u3002\n\n\nconfig\n \nmem_set=\n268435456\n \nvcpus=\n1\n/\n\n\n\n\n\n\n\u8be5 \n \u5143\u7d20\u5305\u542b\u63cf\u8ff0 VM \u5e94\u5177\u6709\u7684\u5185\u5b58\u91cf\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u7684\u5c5e\u6027 (mem_set) \u548c\u63cf\u8ff0\u5e94\u5177\u6709\u7684 CPU \u6570\u7684\u5c5e\u6027 (VCPU)\u3002\n\n\n\u6bcf\u4e2a \n \u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a\u8868\u793a\u5757\u8bbe\u5907\u7684 \nvbd\n \u5143\u7d20\uff0c\u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a\n\n\nvbd\n \ndevice=\nsda\n \nfunction=\nroot\n \nmode=\nw\n \nvdi=\nvdi_sda\n/\n\n\n\n\n\n\n\u8fd9\u4e9b\u5c5e\u6027\u5177\u6709\u4ee5\u4e0b\u542b\u4e49\uff1a\n\n\n\n\n\n\ndevice \u5411 VM \u516c\u5f00\u7684\u7269\u7406\u8bbe\u5907\u7684\u540d\u79f0\u3002\u5bf9\u4e8e Linux \u6765\u5bbe\u7cfb\u7edf\uff0c\u4f7f\u7528\u201csd[a-z]\u201d\uff1b\u5bf9\u4e8e Windows \u6765\u5bbe\u7cfb\u7edf\uff0c\u4f7f\u7528\u201chd[a-d]\u201d\u3002\n\n\n\n\n\n\nfunction \u5982\u679c\u6807\u8bb0\u4e3a\u201croot\u201d\uff0c\u5219\u6b64\u78c1\u76d8\u5c06\u7528\u4e8e\u5f15\u5bfc\u6765\u5bbe\u7cfb\u7edf\u3002 \uff08\u9700\u7279\u522b\u6ce8\u610f\uff0c\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u5b58\u5728 Linux \u6839\u76ee\u5f55\uff0c\u5373 / filesystem\uff09\u53ea\u5e94\u5c06\u4e00\u4e2a\u8bbe\u5907\u6807\u8bb0\u4e3a\u201croot\u201d\u3002 \u8bf7\u53c2\u9605\u4ecb\u7ecd\u201cVM \u5f15\u5bfc\u201d\u7684 3.4 \u8282\u3002 \u5c06\u5ffd\u7565\u4efb\u4f55\u5176\u4ed6\u5b57\u7b26\u4e32\u3002\n\n\n\n\n\n\nmode \u201cw\u201d\u6216\u201cro\u201d\uff0c\u5206\u522b\u8868\u793a\u8bbe\u5907\u5904\u4e8e\u8bfb/\u5199\u6216\u53ea\u8bfb\u72b6\u6001\u3002\n\n\n\n\n\n\nvdi \u78c1\u76d8\u6620\u50cf\u7684\u540d\u79f0\uff08\u7531\u4e00\u4e2a \n \u5143\u7d20\u8868\u793a\uff09\uff0c\u6b64\u5757\u8bbe\u5907\u8fde\u63a5\u5230\u8be5\u78c1\u76d8\u6620\u50cf\n\n\n\n\n\n\n\u6bcf\u4e2a \nvm\n \u53ef\u4ee5\u5305\u542b\u53ef\u9009\u7684 \nhacks\n \u90e8\u5206\uff0c\u4f8b\u5982\uff1a\nhacks is_hvm=\"false\" kernel_boot_cmdline=\"root=/dev/sda1 ro\"/\n \nhacks\n \u5143\u7d20\u5b58\u5728\u4e8e XenServer \u751f\u6210\u7684 XVA \u6587\u4ef6\u4e2d\uff0c\u4f46\u5728\u672a\u6765\u5c06\u4f1a\u5220\u9664\u3002 \u5c5e\u6027\u201cis_hvm\u201d\u4e3a\u201ctrue\u201d\u6216\u201cfalse\u201d\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e VM \u662f\u5426\u5e94\u5728 HVM \u4e2d\u5f15\u5bfc\u3002 \u4f7f\u7528 pygrub \u5f15\u5bfc\u6765\u5bbe\u7cfb\u7edf\u65f6\uff0c\u201ckernel_boot_cmdline\u201d\u5305\u542b\u5176\u4ed6\u5185\u6838\u547d\u4ee4\u884c\u53c2\u6570\u3002\n\n\n\u9664 \nvm\n \u5143\u7d20\u5916\uff0c\nappliance\n \u8fd8\u5c06\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a \nvdi\n \u5143\u7d20\uff0c\u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a\n\n\nvdi\n \nname=\nvdi_sda\n \nsize=\n5368709120\n \nsource=\nfile://sda\n\n\ntype=\ndir-gzipped-chunks\n\n\n\n\n\n\n\u6bcf\u4e2a \nvdi\n \u90fd\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u78c1\u76d8\u6620\u50cf\u3002\u8fd9\u4e9b\u5c5e\u6027\u5177\u6709\u4ee5\u4e0b\u542b\u4e49\uff1a\n\n\nname\uff1aVDI \u7684\u540d\u79f0\uff0c\u7531 \nvbd\n \u5143\u7d20\u7684 vdi \u5c5e\u6027\u5f15\u7528\u3002\u5141\u8bb8\u4f7f\u7528\u4efb\u4f55\u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u4e32\u3002\n\n\nsize\uff1a\u6240\u9700\u6620\u50cf\u7684\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\n\n\nsource\uff1a\u63cf\u8ff0\u5728\u54ea\u91cc\u67e5\u627e\u6620\u50cf\u6570\u636e\u7684 URI\uff0c\u5f53\u524d\u4ec5\u5141\u8bb8\u4f7f\u7528 file:// URI\uff0c\u5e76\u4e14\u5fc5\u987b\u63cf\u8ff0\u4e0e\u5305\u542b ova.xml \u7684\u76ee\u5f55\u76f8\u5bf9\u5e94\u7684\u8def\u5f84\n\n\ntype\uff1a\u63cf\u8ff0\u78c1\u76d8\u6570\u636e\u7684\u683c\u5f0f\uff08\u8bf7\u53c2\u9605 3.3 \u8282\uff09\n\n\n\u6307\u5b9a\u4e86\u5177\u6709\u7c7b\u578b\u201cdir-gzipped-chunks\u201d\u7684\u5355\u4e2a\u78c1\u76d8\u6620\u50cf\u7f16\u7801\uff1a\u6bcf\u4e2a\u6620\u50cf\u7531\u5305\u542b\u6587\u4ef6\u5e8f\u5217\u7684\u76ee\u5f55\u8868\u793a\uff0c\u5982\u4e0b\u6240\u793a\uff1a\n\n\n-rw-r--r-- 1 dscott xendev 458286013    Sep 18 09:51 chunk000000000.gz\n-rw-r--r-- 1 dscott xendev 422271283    Sep 18 09:52 chunk000000001.gz\n-rw-r--r-- 1 dscott xendev 395914244    Sep 18 09:53 chunk000000002.gz\n-rw-r--r-- 1 dscott xendev 9452401      Sep 18 09:53 chunk000000003.gz\n-rw-r--r-- 1 dscott xendev 1096066      Sep 18 09:53 chunk000000004.gz\n-rw-r--r-- 1 dscott xendev 971976       Sep 18 09:53 chunk000000005.gz\n-rw-r--r-- 1 dscott xendev 971976       Sep 18 09:53 chunk000000006.gz\n-rw-r--r-- 1 dscott xendev 971976       Sep 18 09:53 chunk000000007.gz\n-rw-r--r-- 1 dscott xendev 573930       Sep 18 09:53 chunk000000008.gz\n\n\n\n\n\n\u6bcf\u4e2a\u6587\u4ef6\uff08\u540d\u4e3a\n\u201cchunk-XXXXXXXXX.gz\u201d\n\uff09\u90fd\u662f\u51c6\u786e\u5305\u542b 1e9 \u5b57\u8282\uff081 GB\uff0c\u4e0d\u662f 1 GiB\uff09\u539f\u59cb\u5757\u6570\u636e\u7684 gzip \u538b\u7f29\u6587\u4ef6\u3002 \u9009\u62e9\u8f83\u5c0f\u7684\u6587\u4ef6\u5927\u5c0f\u662f\u4e3a\u4e86\u786e\u4fdd\u4e0d\u8d85\u8fc7\u51e0\u79cd\u6587\u4ef6\u7cfb\u7edf\u7684\u6700\u5927\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u3002 \u5982\u679c\u5148\u5c06\u8fd9\u4e9b\u6587\u4ef6\u8fdb\u884c\u89e3\u538b\uff0c\u7136\u540e\u518d\u8fde\u63a5\u5230\u4e00\u8d77\uff0c\u5c06\u6062\u590d\u539f\u59cb\u6620\u50cf\u3002\n\n\nXenServer \u63d0\u4f9b\u4e86\u4e24\u79cd\u5f15\u5bfc VM \u7684\u673a\u5236\uff1a(i) \u4f7f\u7528\u901a\u8fc7 pygrub \u63d0\u53d6\u7684\u534a\u865a\u62df\u5316\u5185\u6838\uff1b(ii) \u4f7f\u7528 HVM\u3002 \u5f53\u524d\u5b9e\u73b0\u5728 \nhacks\n \u90e8\u5206\u4e2d\u4f7f\u7528\u201cis_hvm\u201d\u6807\u5fd7\u6765\u51b3\u5b9a\u8981\u4f7f\u7528\u54ea\u79cd\u673a\u5236\u3002\n\n\n\u672c\u8282\u7684\u5176\u4f59\u5185\u5bb9\u4ecb\u7ecd\u4e00\u4e2a\u6253\u5305\u4e3a XVA \u7684\u975e\u5e38\u7b80\u5355\u7684 Debian VM\u3002 \u6b64 VM \u6709\u4e24\u4e2a\u78c1\u76d8\uff1a\u4e00\u4e2a\u78c1\u76d8\u5927\u5c0f\u4e3a 5120 MiB\uff0c\u7528\u4e8e\u6839\u6587\u4ef6\u7cfb\u7edf\u548c\u4f7f\u7528 pygrub \u5f15\u5bfc\u6765\u5bbe\u7cfb\u7edf\uff1b\u53e6\u4e00\u4e2a\u78c1\u76d8\u5927\u5c0f\u4e3a 512 MiB\uff0c\u7528\u4e8e\u4ea4\u6362\u3002 \u6b64 VM \u7684\u5185\u5b58\u91cf\u4e3a 512MiB \u5e76\u4f7f\u7528\u4e00\u4e2a\u865a\u62df CPU\u3002\n\n\n\u5728\u6700\u9ad8\u7ea7\u522b\uff0c\u8be5\u7b80\u5355 Debian VM \u7531\u4e00\u4e2a\u76ee\u5f55\u8868\u793a\uff1a\n\n\n$ ls -l\ntotal 4\ndrwxr-xr-x \n3\n dscott xendev \n4096\n Oct \n24\n 09:42 very simple Debian VM\n\n\n\n\n\n\u4e3b XVA \u76ee\u5f55\u4e2d\u5305\u542b\u4e24\u4e2a\u5b50\u76ee\u5f55\uff08\u6bcf\u4e2a\u78c1\u76d8\u4e00\u4e2a\uff09\u548c\u4e00\u4e2a\u6587\u4ef6 ova.xml\uff1a\n\n\n$ ls -l very\n\\ \nsimple\n\\ \nDebian\n\\ \nVM/\ntotal 8\n-rw-r--r-- \n1\n dscott xendev \n1016\n Oct \n24\n 09:42 ova.xml\ndrwxr-xr-x \n2\n dscott xendev \n4096\n Oct \n24\n 09:42 sda\ndrwxr-xr-x \n2\n dscott xendev \n4096\n Oct \n24\n 09:53 sdb\n\n\n\n\n\n\u5404\u4e2a\u78c1\u76d8\u5b50\u76ee\u5f55\u4e2d\u90fd\u6709\u4e00\u7ec4\u6587\u4ef6\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6587\u4ef6\u90fd\u5305\u542b\u4f7f\u7528 gzip \u538b\u7f29\u7684 1 GB \u5927\u5c0f\u7684\u539f\u59cb\u78c1\u76d8\u5757\u6570\u636e\uff1a\n\n\n$ ls -l very\n\\ \nsimple\n\\ \nDebian\n\\ \nVM/sda/\ntotal 2053480\n-rw-r--r-- \n1\n dscott xendev \n202121645\n Oct \n24\n 09:43 chunk-000000000.gz\n-rw-r--r-- \n1\n dscott xendev \n332739042\n Oct \n24\n 09:45 chunk-000000001.gz\n-rw-r--r-- \n1\n dscott xendev \n401299288\n Oct \n24\n 09:48 chunk-000000002.gz\n-rw-r--r-- \n1\n dscott xendev \n389585534\n Oct \n24\n 09:50 chunk-000000003.gz\n-rw-r--r-- \n1\n dscott xendev \n624567877\n Oct \n24\n 09:53 chunk-000000004.gz\n-rw-r--r-- \n1\n dscott xendev \n150351797\n Oct \n24\n 09:54 chunk-000000005.gz\n$ ls -l very\n\\ \nsimple\n\\ \nDebian\n\\ \nVM/sdb\ntotal 516\n-rw-r--r-- \n1\n dscott xendev \n521937\n Oct \n24\n 09:54 chunk-000000000.gz\n\n\n\n\n\n\u8be5\u7b80\u5355 Debian VM \u793a\u4f8b\u5c06\u5305\u542b\u4e00\u4e2a XVA \u6587\u4ef6\uff0c\u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a\n\n\n?xml version=\n1.0\n ?\n\n\nappliance\n \nversion=\n0.1\n\n  \nvm\n \nname=\nvm\n\n  \nlabel\n\n  very simple Debian VM\n  \n/label\n\n  \nshortdesc\n\n  the description field can contain any valid UTF-8\n  \n/shortdesc\n\n  \nconfig\n \nmem_set=\n536870912\n \nvcpus=\n1\n/\n\n  \nhacks\n \nis_hvm=\nfalse\n \nkernel_boot_cmdline=\nroot=/dev/sda1 ro \n\n  \n!--\u8fd9\u4e00\u90e8\u5206\u662f\u4e34\u65f6\u6027\u7684\uff0c\u5728\u5c06\u6765\u4f1a\u88ab\u5ffd\u7565\u3002 \u5c5e\u6027\n\n\nis_hvm\uff08\u201ctrue\u201d\u6216\u201cfalse\u201d\uff09\u6307\u793a\u662f\u5426\u5c06\u4ee5 HVM \u6a21\u5f0f\u5f15\u5bfc VM\u3002 \u5c06\u6765\u4f1a\u81ea\u52a8\u68c0\u6d4b\u8fd9\u4e00\u70b9\u3002 \u5c5e\u6027 kernel_boot_cmdline \u5305\u542b\u5185\u6838\u547d\u4ee4\u884c\uff0c\u7528\u4e8e\u6ca1\u6709\u5408\u9002\u7684 grub menu.lst \u65f6\u7684\u60c5\u51b5\u3002 \u5c06\u6765\uff0c\u5f15\u5bfc\u5c06\u53ea\u4f7f\u7528 pygrub\u3002--\n\n  \n/hacks\n\n  \nvbd\n \ndevice=\nsda\n \nfunction=\nroot\n \nmode=\nw\n \nvdi=\nvdi_sda\n/\n\n  \nvbd\n \ndevice=\nsdb\n \nfunction=\nswap\n \nmode=\nw\n \nvdi=\nvdi_sdb\n/\n\n  \n/vm\n\n  \nvdi\n \nname=\nvdi_sda\n \nsize=\n5368709120\n \nsource=\nfile://sda\n \ntype=\ndir-gzippedchunks\n/\n\n  \nvdi\n \nname=\nvdi_sdb\n \nsize=\n536870912\n \nsource=\nfile://sdb\n \ntype=\ndir-gzippedchunks\n/\n\n\n/appliance\n\n\n\n\n\n\nXML-RPC \u8bf4\u660e\n\n\n\u65e5\u671f\u65f6\u95f4\n\n\nAPI \u5728\u5904\u7406\u65e5\u671f\u65f6\u95f4\u65b9\u9762\u4e0e XML-RPC \u89c4\u8303\u6709\u6240\u4e0d\u540c\u3002API \u5c06\u201cZ\u201d\u9644\u52a0\u5230\u65e5\u671f\u65f6\u95f4\u5b57\u7b26\u4e32\u7684\u672b\u5c3e\uff0c\u8fd9\u662f\u4e3a\u4e86\u6307\u793a\u4ee5 UTC \u8868\u793a\u65f6\u95f4\u3002\n\n\n\u5176\u4ed6\u53c2\u8003\u6765\u6e90\n\n\n\u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u4eec\u5df2\u7c97\u7565\u6982\u62ec\u4e86 API \u53ca\u5176\u5bf9\u8c61\u6a21\u578b\u3002 \u672c\u8282\u7684\u76ee\u7684\u4e0d\u662f\u63d0\u4f9b\u8be6\u7ec6\u7684 API \u8bed\u4e49\uff0c\u800c\u53ea\u662f\u4e3a\u60a8\u63d0\u4f9b\u8db3\u591f\u7684\u80cc\u666f\u77e5\u8bc6\uff0c\u5e2e\u52a9\u60a8\u5f00\u59cb\u9605\u8bfb\u4e0b\u4e00\u7ae0\u7684\u4ee3\u7801\u793a\u4f8b\u5e76\u719f\u6089\u5185\u5bb9\u6bd4\u8f83\u8be6\u5c3d\u7684\u300aXenServer API \u53c2\u8003\u300b\u6587\u6863\u3002\n\n\n\u60a8\u53ef\u4ee5\u4ece\u5f88\u591a\u5730\u65b9\u67e5\u627e\u8be6\u7ec6\u4fe1\u606f\uff1a\n\n\n\u300aXenServer \u7ba1\u7406\u5458\u6307\u5357\u300b\u5305\u542b xe CLI \u7684\u6982\u8ff0\u3002 \u7531\u4e8e\u8bb8\u591a xe \u547d\u4ee4\u90fd\u5efa\u7acb\u5728 API \u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u56e0\u6b64\u6700\u597d\u4ece\u4f7f\u7528 xe \u5f00\u59cb\u4e86\u89e3\u672c\u7ae0\u4ecb\u7ecd\u7684 API \u5bf9\u8c61\u6a21\u578b\u3002\n\n\n\u4e0b\u4e00\u7ae0\u4e2d\u7684\u4ee3\u7801\u793a\u4f8b\u63d0\u4f9b\u4e86\u4e00\u4e9b\u91c7\u7528\u591a\u79cd\u5ba2\u6237\u7aef\u8bed\u8a00\u7f16\u7801\u7684 API \u7684\u5177\u4f53\u5b9e\u4f8b\u3002\n\n\n\u300aXenServer API \u53c2\u8003\u300b\n\u6587\u6863\u6bd4\u8f83\u8be6\u7ec6\u5730\u4ecb\u7ecd\u4e86 API \u8bed\u4e49\uff0c\u5e76\u4ecb\u7ecd\u4e86\u76f8\u5173 XML/RPC \u6d88\u606f\u7684\u683c\u5f0f\u3002\n\n\nXenServer \u4e3b\u673a dom0 \u672c\u8eab\u4e2d\u5b58\u5728\u4e00\u4e9b\u4f7f\u7528 API \u7684\u811a\u672c\u3002 \u4f8b\u5982\uff0c\n/opt/xensource/libexec/shutdown\n \u662f\u4e00\u4e2a\u53ef\u5f7b\u5e95\u5173\u95ed VM \u7684 python \u7a0b\u5e8f\u3002 \u5f53\u5173\u95ed\u4e3b\u673a\u672c\u8eab\u65f6\u8c03\u7528\u6b64\u811a\u672c\u3002\n\n\n\u4f7f\u7528 API\n\n\n\u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728\u771f\u5b9e\u7a0b\u5e8f\u4e2d\u4f7f\u7528 XenServer \u7ba1\u7406 API \u6765\u7ba1\u7406 XenServer \u4e3b\u673a\u548c VM\u3002\u672c\u7ae0\u9996\u5148\u6982\u8ff0\u5178\u578b\u7684\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u5e76\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 API \u6267\u884c\u5e38\u89c1\u4efb\u52a1\u3002 \u63d0\u4f9b\u7684\u793a\u4f8b\u4ee3\u7801\u6bb5\u4f7f\u7528 python \u8bed\u6cd5\uff0c\u4f46\u4f7f\u7528\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u7684\u7b49\u6548\u4ee3\u7801\u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\u3002 \u4e4b\u540e\u5c06\u8ba8\u8bba\u8bed\u8a00\u7ed1\u5b9a\u672c\u8eab\uff0c\u5728\u672c\u7ae0\u672b\u5c3e\u4ecb\u7ecd\u4e24\u4e2a\u5b8c\u6574\u793a\u4f8b\u3002\n\n\n\u5256\u6790\u5178\u578b\u5e94\u7528\u7a0b\u5e8f\n\n\n\u672c\u8282\u4ecb\u7ecd\u4f7f\u7528 XenServer \u7ba1\u7406 API \u7684\u5178\u578b\u5e94\u7528\u7a0b\u5e8f\u7684\u7ed3\u6784\u3002 \u5927\u591a\u6570\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u9996\u5148\u8fde\u63a5\u5230 XenServer \u4e3b\u673a\u5e76\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff08\u4f8b\u5982\uff0c\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\u3002 \u5047\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u6210\u529f\uff0c\u670d\u52a1\u5668\u5c06\u521b\u5efa\u4e00\u4e2a\u201c\u4f1a\u8bdd\u201d\u5bf9\u8c61\u5e76\u5c06\u5f15\u7528\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002 \u6b64\u5f15\u7528\u5c06\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u6240\u6709\u540e\u7eed API \u8c03\u7528\u3002 \u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u641c\u7d22\u5176\u4ed6\u6709\u7528\u5bf9\u8c61\uff08\u4f8b\u5982\uff0cXenServer \u4e3b\u673a\u3001VM \u7b49\uff09\u7684\u5f15\u7528\u5e76\u5728\u5176\u4e0a\u8c03\u7528\u64cd\u4f5c\u3002 \u53ef\u540c\u6b65\u6216\u5f02\u6b65\u8c03\u7528\u64cd\u4f5c\uff1b\u7279\u6b8a\u4efb\u52a1\u5bf9\u8c61\u8868\u793a\u5f02\u6b65\u64cd\u4f5c\u7684\u72b6\u6001\u548c\u8fdb\u5ea6\u3002 \u4e0b\u5217\u5404\u8282\u8be6\u7ec6\u4ecb\u7ecd\u6240\u6709\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u5143\u7d20\u3002\n\n\n\u9009\u62e9\u4e00\u79cd\u4f4e\u7ea7\u522b\u4f20\u8f93\n\n\n\u53ef\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u4f20\u8f93\u53d1\u51fa API \u8c03\u7528\uff1a\n\n\n\n\n\n\n\u57fa\u4e8e IP \u7f51\u7edc\u7684\u7aef\u53e3 443 (https) \u4e0a\u7684 SSL \u52a0\u5bc6 TCP\n\n\n\n\n\n\n\u57fa\u4e8e\u672c\u5730 Unix \u57df\u5957\u63a5\u5b57\u7684\u7eaf\u6587\u672c\uff1a/var/xapi/xapi\n\n\n\n\n\n\nSSL \u52a0\u5bc6\u7684 TCP \u4f20\u8f93\u9002\u7528\u4e8e\u6240\u6709\u4e3b\u673a\u5916\u901a\u4fe1\uff0c\u800c Unix \u57df\u5957\u63a5\u5b57\u53ef\u7528\u4e8e\u76f4\u63a5\u5728 XenServer \u4e3b\u673a\u672c\u8eab\u4e0a\u8fd0\u884c\u7684\u670d\u52a1\u3002 \u5728 SSL \u52a0\u5bc6\u7684 TCP \u4f20\u8f93\u4e2d\uff0c\u6240\u6709 API \u8c03\u7528\u90fd\u5e94\u76f4\u63a5\u5b9a\u5411\u5230\u8d44\u6e90\u6c60\u4e3b\u670d\u52a1\u5668\uff1b\u5426\u5219\uff0c\u5c06\u5bfc\u81f4\u51fa\u73b0 HOST_IS_SLAVE \u9519\u8bef\uff0c\u5176\u4e2d\u5305\u542b\u4ee5\u9519\u8bef\u53c2\u6570\u51fa\u73b0\u7684\u4e3b\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002\n\n\n\u7531\u4e8e\u6c60\u7684\u4e3b\u670d\u52a1\u5668\u4e3b\u673a\u53ef\u4ee5\u66f4\u6539\uff08\u7279\u522b\u662f\u5f53\u5728\u6c60\u4e2d\u542f\u7528\u4e86\u9ad8\u53ef\u7528\u6027\u65f6\uff09\uff0c\u56e0\u6b64\u5ba2\u6237\u7aef\u5fc5\u987b\u6267\u884c\u4e0b\u5217\u6b65\u9aa4\u4ee5\u68c0\u6d4b\u4e3b\u670d\u52a1\u5668\u4e3b\u673a\u66f4\u6539\u5e76\u6839\u636e\u9700\u8981\u8fde\u63a5\u5230\u65b0\u4e3b\u670d\u52a1\u5668\uff1a\n\n\n\u5904\u7406\u6c60\u4e3b\u670d\u52a1\u5668\u66f4\u6539\n\n\n\n\n\n\n\u8ba2\u9605\u4e3b\u673a\u670d\u52a1\u5668\u5217\u8868\u4e2d\u7684\u66f4\u65b0\u5e76\u7ef4\u62a4\u6c60\u4e2d\u5f53\u524d\u4e3b\u673a\u7684\u5217\u8868\n\n\n\n\n\n\n\u5982\u679c\u4e0e\u6c60\u4e3b\u670d\u52a1\u5668\u7684\u8fde\u63a5\u65e0\u54cd\u5e94\uff0c\u5219\u5c1d\u8bd5\u4e0e\u5217\u8868\u4e2d\u7684\u6240\u6709\u4e3b\u673a\u8fdb\u884c\u8fde\u63a5\uff0c\u76f4\u5230\u5176\u4e2d\u4e00\u4e2a\u4e3b\u673a\u53d1\u51fa\u54cd\u5e94\n\n\n\n\n\n\n\u53d1\u51fa\u54cd\u5e94\u7684\u7b2c\u4e00\u4e2a\u4e3b\u673a\u5c06\u8fd4\u56de HOST_IS_SLAVE \u9519\u8bef\u6d88\u606f\uff0c\u5176\u4e2d\u5305\u542b\u65b0\u6c60\u4e3b\u670d\u52a1\u5668\u7684\u6807\u8bc6\uff08\u9664\u975e\u8be5\u4e3b\u673a\u4e3a\u65b0\u4e3b\u670d\u52a1\u5668\uff09\n\n\n\n\n\n\n\u8fde\u63a5\u5230\u65b0\u4e3b\u670d\u52a1\u5668\n\n\n\n\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u7279\u6b8a\u60c5\u51b5\uff1a\u901a\u8fc7 Unix \u57df\u5957\u63a5\u5b57\u53d1\u9001\u7684\u6240\u6709\u6d88\u606f\u5c06\u900f\u660e\u5730\u8f6c\u53d1\u7ed9\u6b63\u786e\u8282\u70b9\u3002\n\n\n\u8eab\u4efd\u9a8c\u8bc1\u548c\u4f1a\u8bdd\u5904\u7406\n\n\n\u7edd\u5927\u591a\u6570 API \u8c03\u7528\u91c7\u7528\u4f1a\u8bdd\u5f15\u7528\u4f5c\u4e3a\u5176\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1b\u65e0\u6cd5\u63d0\u4f9b\u6709\u6548\u5f15\u7528\u4f1a\u5bfc\u81f4\u8fd4\u56de SESSION_INVALID \u9519\u8bef\u3002 \u901a\u8fc7\u5411 login_with_password \u51fd\u6570\u63d0\u4f9b\u7528\u6237\u540d\u548c\u5bc6\u7801\u83b7\u53d6\u4f1a\u8bdd\u5f15\u7528\u3002\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u7279\u6b8a\u60c5\u51b5\uff1a\u5982\u679c\u6b64\u8c03\u7528\u901a\u8fc7\u672c\u5730 Unix \u57df\u5957\u63a5\u5b57\u6267\u884c\uff0c\u5219\u4f1a\u5ffd\u7565\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5e76\u4e14\u6b64\u8c03\u7528\u59cb\u7ec8\u90fd\u4f1a\u6210\u529f\u3002\n\n\n\u6bcf\u4e2a\u4f1a\u8bdd\u90fd\u5305\u542b\u4e00\u4e2a\u5173\u8054\u7684\u201clast active\u201d\u65f6\u95f4\u6233\uff0c\u8be5\u65f6\u95f4\u6233\u4f1a\u5728\u6bcf\u6b21\u6267\u884c API \u8c03\u7528\u65f6\u8fdb\u884c\u66f4\u65b0\u3002 \u670d\u52a1\u5668\u8f6f\u4ef6\u5f53\u524d\u5177\u6709 500 \u4e2a\u6d3b\u52a8\u4f1a\u8bdd\u7684\u5185\u7f6e\u9650\u5236\uff0c\u5bf9\u4e8e\u67d0\u4e2a\u7ed9\u5b9a username \u6216 originator\uff0c\u5982\u679c\u8d85\u8fc7\u6b64\u9650\u5236\uff0c\u5c06\u5220\u9664\u201clast active\u201d\u5b57\u6bb5\u6700\u65e9\u7684\u4f1a\u8bdd\u3002 \u6b64\u5916\uff0c\u8fd8\u5c06\u5220\u9664\u201clast active\u201d\u5b57\u6bb5\u65e9\u4e8e 24 \u5c0f\u65f6\u7684\u6240\u6709\u4f1a\u8bdd\u3002 \u56e0\u6b64\uff0c\u8bf7\u52a1\u5fc5\uff1a\n\n\n\n\n\n\n\u5728\u767b\u5f55\u65f6\u6307\u5b9a\u76f8\u5e94\u7684 originator\uff1b\u5e76\u4e14\n\n\n\n\n\n\n\u8bb0\u5f97\u6ce8\u9500\u6d3b\u52a8\u4f1a\u8bdd\u4ee5\u907f\u514d\u5c06\u5176\u6cc4\u9732\uff1b\u5e76\u4e14\n\n\n\n\n\n\n\u5728\u9047\u5230 SESSION_INVALID \u9519\u8bef\u65f6\u51c6\u5907\u518d\u6b21\u767b\u5f55\u5230\u670d\u52a1\u5668\u3002\n\n\n\n\n\n\n\u5728\u4ee5\u4e0b Python \u6bb5\u4e2d\uff0c\u5efa\u7acb\u4e86\u901a\u8fc7 Unix \u57df\u5957\u63a5\u5b57\u7684\u8fde\u63a5\u4e14\u521b\u5efa\u4e86\u4e00\u4e2a\u4f1a\u8bdd\uff1a\n\n\nimport\n \nXenAPI\n\n    \nsession\n \n=\n \nXenAPI\n.\nxapi_local\n()\n\n    \ntry\n:\n\n        \nsession\n.\nxenapi\n.\nlogin_with_password\n(\nroot\n,\n \n,\n \n2.3\n,\n \nMy Widget v0.1\n)\n\n        \n...\n\n    \nfinally\n:\n\n        \nsession\n.\nxenapi\n.\nsession\n.\nlogout\n()\n\n\n\n\n\n\n\u67e5\u627e\u5bf9\u6709\u7528\u5bf9\u8c61\u7684\u5f15\u7528\n\n\n\u5bf9\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u4e0b\u4e00\u6b65\u662f\u83b7\u53d6\u5bf9\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u4ee5\u4fbf\u67e5\u8be2\u5176\u72b6\u6001\u6216\u5728\u5176\u4e0a\u8c03\u7528\u64cd\u4f5c\u3002 \u6240\u6709\u5bf9\u8c61\u90fd\u5305\u62ec\u4e00\u7ec4\u201c\u9690\u5f0f\u201d\u6d88\u606f\uff0c\u8fd9\u4e9b\u6d88\u606f\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n\n\n\n\n\nget_by_name_label\uff1a\u8fd4\u56de\u5177\u6709\u7279\u5b9a\u6807\u7b7e\u7684\u7279\u5b9a\u7c7b\u7684\u6240\u6709\u5bf9\u8c61\u5217\u8868\uff1b\n\n\n\n\n\n\nget_by_uuid\uff1a\u8fd4\u56de\u7531\u5176 UUID \u6307\u5b9a\u7684\u5355\u4e2a\u5bf9\u8c61\uff1b\n\n\n\n\n\n\nget_all\uff1a\u8fd4\u56de\u4e00\u7ec4\u5bf9\u7279\u5b9a\u7c7b\u7684\u6240\u6709\u5bf9\u8c61\u7684\u5f15\u7528\uff1b\n\n\n\n\n\n\nget_all_records\uff1a\u8fd4\u56de\u5bf9\u7279\u5b9a\u7c7b\u7684\u6bcf\u4e2a\u5bf9\u8c61\u7684\u8bb0\u5f55\u7684\u5f15\u7528\u6620\u5c04\u3002\n\n\n\n\n\n\n\u4f8b\u5982\uff0c\u5217\u51fa\u6240\u6709\u4e3b\u673a\uff1a\n\n\nhosts = session.xenapi.host.get_all()\n \u67e5\u627e\u540d\u4e3a\u201cmy first VM\u201d\u7684\u6240\u6709 VM\uff1a\n\n\nvms = session.xenapi.VM.get_by_name_label('my first VM')\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u65e0\u6cd5\u4fdd\u8bc1\u5bf9\u8c61 name_label \u5b57\u6bb5\u662f\u552f\u4e00\u7684\uff0c\u56e0\u6b64 get_by_name_label API \u8c03\u7528\u4f1a\u8fd4\u56de\u4e00\u7ec4\u5f15\u7528\u800c\u4e0d\u662f\u4e00\u4e2a\u5f15\u7528\u3002\n\n\n\u9664\u4e86\u524d\u9762\u4ecb\u7ecd\u7684\u67e5\u627e\u5bf9\u8c61\u7684\u65b9\u6cd5\u4ee5\u5916\uff0c\u5927\u591a\u6570\u5bf9\u8c61\u5728\u5b57\u6bb5\u4e2d\u8fd8\u5305\u542b\u5bf9\u5176\u4ed6\u5bf9\u8c61\u7684\u5f15\u7528\u3002 \u4f8b\u5982\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u4ee5\u4e0b\u5185\u5bb9\u67e5\u627e\u5728\u7279\u6b8a\u4e3b\u673a\u4e0a\u8fd0\u884c\u7684 VM \u7ec4\uff1a\n\n\nvms = session.xenapi.host.get_resident_VMs(host)\n\n\n\n\n\n\u5728\u5bf9\u8c61\u4e0a\u8c03\u7528\u540c\u6b65\u64cd\u4f5c\n\n\n\u83b7\u53d6\u5bf9\u8c61\u5f15\u7528\u540e\uff0c\u53ef\u4ee5\u5728\u5176\u4e0a\u8c03\u7528\u64cd\u4f5c\u3002\u4f8b\u5982\uff0c\u542f\u52a8 VM\uff1a\n\n\nsession.xenapi.VM.start(vm, False, False)\n\n\n\n\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709 API \u8c03\u7528\u90fd\u662f\u540c\u6b65\u7684\uff0c\u5728\u64cd\u4f5c\u5b8c\u6210\u6216\u5931\u8d25\u4e4b\u524d\uff0c\u4e0d\u4f1a\u8fd4\u56de\u3002\u4f8b\u5982\uff0c\u5728\u4f7f\u7528 VM.start \u7684\u60c5\u51b5\u4e0b\uff0c\u5728 VM \u542f\u52a8\u5f15\u5bfc\u4e4b\u524d\uff0c\u8be5\u8c03\u7528\u4e0d\u4f1a\u8fd4\u56de\u3002\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u5728 VM.start \u8c03\u7528\u8fd4\u56de\u65f6\uff0cVM \u5c06\u8fdb\u884c\u5f15\u5bfc\u3002 \u8981\u786e\u5b9a\u5f15\u5bfc\u4f55\u65f6\u5b8c\u6210\uff0c\u8bf7\u7b49\u5f85\u6765\u5bbe\u7cfb\u7edf\u5185\u7684\u4ee3\u7406\u901a\u8fc7 VM_guest_metrics \u5bf9\u8c61\u62a5\u544a\u5185\u90e8\u7edf\u8ba1\u6570\u636e\u3002\n\n\n\u4f7f\u7528\u4efb\u52a1\u7ba1\u7406\u5f02\u6b65\u64cd\u4f5c\n\n\n\u4e3a\u4e86\u7b80\u5316\u975e\u5e38\u8017\u65f6\u7684\u7ba1\u7406\u64cd\u4f5c\uff08\u5982 Vm.clone \u548c VM.copy\uff09\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e24\u79cd\u5f62\u5f0f\u7684\u51fd\u6570\uff1a\u540c\u6b65\u51fd\u6570\uff08\u9ed8\u8ba4\uff09\u548c\u5f02\u6b65\u51fd\u6570\u3002 \u6bcf\u4e2a\u5f02\u6b65\u51fd\u6570\u90fd\u4f1a\u8fd4\u56de\u5bf9\u4efb\u52a1\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5176\u4e2d\u5305\u62ec\u6709\u5173\u6b63\u5728\u8fdb\u884c\u7684\u64cd\u4f5c\u7684\u4fe1\u606f\uff0c\u5305\u62ec\uff1a\n\n\n\n\n\n\n\u64cd\u4f5c\u662f\u5426\u6302\u8d77\n\n\n\n\n\n\n\u64cd\u4f5c\u6210\u529f\u8fd8\u662f\u5931\u8d25\n\n\n\n\n\n\n\u64cd\u4f5c\u7684\u8fdb\u5ea6\uff08\u8303\u56f4\u662f 0-1\uff09\n\n\n\n\n\n\n\u64cd\u4f5c\u8fd4\u56de\u7684\u7ed3\u679c\u6216\u9519\u8bef\u4ee3\u7801\n\n\n\n\n\n\n\u4e00\u4e2a\u60f3\u8981\u8ddf\u8e2a VM.clone \u64cd\u4f5c\u8fdb\u5ea6\u5e76\u663e\u793a\u8fdb\u5ea6\u6761\u7684\u5e94\u7528\u7a0b\u5e8f\u5305\u542b\u7684\u4ee3\u7801\u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a\n\n\nvm\n \n=\n \nsession\n.\nxenapi\n.\nVM\n.\nget_by_name_label\n(\nmy vm\n)\n\n\ntask\n \n=\n \nsession\n.\nxenapi\n.\nAsync\n.\nVM\n.\nclone\n(\nvm\n)\n\n\nwhile\n \nsession\n.\nxenapi\n.\ntask\n.\nget_status\n(\ntask\n)\n \n==\n \npending\n:\n\n        \nprogress\n \n=\n \nsession\n.\nxenapi\n.\ntask\n.\nget_progress\n(\ntask\n)\n\n        \nupdate_progress_bar\n(\nprogress\n)\n\n        \ntime\n.\nsleep\n(\n1\n)\n\n\nsession\n.\nxenapi\n.\ntask\n.\ndestroy\n(\ntask\n)\n\n\n\n\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u8fd0\u884c\u826f\u597d\u7684\u5ba2\u6237\u7aef\u5728\u8bfb\u53d6\u5b8c\u7ed3\u679c\u6216\u9519\u8bef\u65f6\uff0c\u5e94\u8bb0\u5f97\u5220\u9664\u5f02\u6b65\u64cd\u4f5c\u521b\u5efa\u7684\u4efb\u52a1\u3002 \u5982\u679c\u4efb\u52a1\u6570\u8d85\u8fc7\u4e86\u5185\u7f6e\u9608\u503c\uff0c\u5219\u670d\u52a1\u5668\u5c06\u5220\u9664\u6700\u5148\u5b8c\u6210\u7684\u4efb\u52a1\u3002\n\n\n\u8ba2\u9605\u548c\u4fa6\u542c\u4e8b\u4ef6\n\n\n\u670d\u52a1\u5668\u5c06\u5728\u6bcf\u6b21\u4fee\u6539\u5bf9\u8c61\u65f6\u751f\u6210\u4e8b\u4ef6\uff08\u4efb\u52a1\u548c\u6307\u6807\u7c7b\u4f8b\u5916\uff09\u3002 \u5ba2\u6237\u7aef\u53ef\u57fa\u4e8e\u6bcf\u4e2a\u7c7b\u8ba2\u9605\u6b64\u4e8b\u4ef6\u6d41\u5e76\u63a5\u6536\u66f4\u65b0\uff0c\u800c\u4e0d\u662f\u91c7\u53d6\u9891\u7e41\u5730\u8f6e\u8be2\u3002 \u4e8b\u4ef6\u5305\u542b\u4e09\u79cd\u7c7b\u578b\uff1a\n\n\n\n\n\n\nadd - \u521b\u5efa\u67d0\u4e2a\u5bf9\u8c61\u65f6\u751f\u6210\uff1b\n\n\n\n\n\n\ndel - \u5728\u5373\u5c06\u9500\u6bc1\u67d0\u4e2a\u5bf9\u8c61\u4e4b\u524d\u751f\u6210\uff1b\n\n\n\n\n\n\nmod - \u5bf9\u8c61\u7684\u5b57\u6bb5\u66f4\u6539\u65f6\u751f\u6210\u3002\n\n\n\n\n\n\n\u4e8b\u4ef6\u8fd8\u5305\u542b\u5355\u8c03\u9012\u589e\u7684 ID\u3001\u5bf9\u8c61\u7684\u7c7b\u540d\u79f0\u548c\u5bf9\u8c61\u72b6\u6001\u7684\u5feb\u7167\uff0c\u8fd9\u76f8\u5f53\u4e8e\u6267\u884c get_record() \u7684\u7ed3\u679c\u3002\n\n\n\u5ba2\u6237\u7aef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u6ce8\u518c\u4e8b\u4ef6\uff1a\u901a\u8fc7\u7c7b\u540d\u79f0\u5217\u8868\u6216\u7279\u6b8a\u5b57\u7b26\u4e32\u201c*\u201d\u8c03\u7528 event.register()\u3002 \u5ba2\u6237\u7aef\u901a\u8fc7\u6267\u884c event.next() \u6765\u63a5\u6536\u4e8b\u4ef6\uff0c\u8be5\u65b9\u6cd5\u5728\u4e8b\u4ef6\u53ef\u7528\u524d\u5904\u4e8e\u963b\u6b62\u72b6\u6001\u5e76\u8fd4\u56de\u65b0\u4e8b\u4ef6\u3002\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u7531\u4e8e\u670d\u52a1\u5668\u4e0a\u6240\u751f\u6210\u4e8b\u4ef6\u961f\u5217\u7684\u957f\u5ea6\u6709\u9650\uff0c\u901f\u5ea6\u5f88\u6162\u7684\u5ba2\u6237\u7aef\u53ef\u80fd\u65e0\u6cd5\u4ee5\u8db3\u591f\u5feb\u7684\u901f\u5ea6\u8bfb\u53d6\u4e8b\u4ef6\uff1b\u5982\u679c\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u4f1a\u8fd4\u56de EVENTS_LOST \u9519\u8bef\u3002 \u4e3a\u4e86\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\uff0c\u5ba2\u6237\u7aef\u5e94\u91cd\u65b0\u6ce8\u518c\u4e8b\u4ef6\u5e76\u68c0\u67e5\u5728\u672a\u6ce8\u518c\u4e8b\u4ef6\u65f6\u662f\u5426\u672a\u6ee1\u8db3\u5b83\u4eec\u6240\u7b49\u5f85\u7684\u6761\u4ef6\u3002\n\n\n\u4ee5\u4e0b python \u4ee3\u7801\u6bb5\u8bf4\u660e\u5982\u4f55\u6253\u5370\u7cfb\u7edf\u751f\u6210\u7684\u6bcf\u4e2a\u4e8b\u4ef6\u7684\u6458\u8981\uff1a\uff08\nXenserver-SDK/XenServerPython/samples/watch-all-events.py\n \u4e2d\u6709\u7c7b\u4f3c\u4ee3\u7801\uff09\n\n\nfmt = \n%8s  %20s  %5s  %s\n\nsession.xenapi.event.register([\n*\n])\nwhile True:\n    try:\n        for event in session.xenapi.event.next():\n            name = \n(unknown)\n\n            if \nsnapshot\n in event.keys():\n                snapshot = event[\nsnapshot\n]\n                if \nname_label\n in snapshot.keys():\n                    name = snapshot[\nname_label\n]\n            print fmt % (event[\nid\n], event[\nclass\n], event[\noperation\n], name)           \n    except XenAPI.Failure, e:\n        if e.details == [ \nEVENTS_LOST\n ]:\n            print \nCaught EVENTS_LOST; should reregister\n\n\n\n\n\n\n\u8bed\u8a00\u7ed1\u5b9a\n\n\nC\n\n\nSDK \u5728\u76ee\u5f55 /XenServer-SDK/libxenserver/src \u4e2d\u5305\u542b C \u8bed\u8a00\u7ed1\u5b9a\u6e90\uff0c\u4ee5\u53ca\u7528\u4e8e\u5c06\u6b64\u7ed1\u5b9a\u7f16\u8bd1\u5230\u5e93\u4e2d\u7684 Makefile\u3002 \u6bcf\u4e2a API \u5bf9\u8c61\u90fd\u4e0e\u4e00\u4e2a\u5934\u6587\u4ef6\u76f8\u5173\u8054\uff0c\u8be5\u6587\u4ef6\u4e2d\u5305\u542b\u6240\u6709\u8be5\u5bf9\u8c61\u7684 API \u51fd\u6570\u7684\u58f0\u660e\uff1b\u4f8b\u5982\uff0c\u8c03\u7528 VM \u64cd\u4f5c\u6240\u9700\u8981\u7684\u7c7b\u578b\u5b9a\u4e49\u548c\u51fd\u6570\u90fd\u5305\u542b\u5728 xen_vm.h \u4e2d\u3002\n\n\nC \u7ed1\u5b9a\u4f9d\u8d56\u9879\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u652f\u6301\u7684\u5e73\u53f0\uff1a\n\n\nLinux\n\n\n\n\n\n\n\u5e93\uff1a\n\n\n\u6b64\u8bed\u8a00\u7ed1\u5b9a\u4ee5 C \u7a0b\u5e8f\u94fe\u63a5\u7684 libxenserver.so \u7684\u5f62\u5f0f\u751f\u6210\u3002\n\n\n\n\n\n\n\u4f9d\u8d56\u9879\uff1a\n\n\n\n\n\n\n\n\n\n\n\n\nXML \u5e93\uff08GNU Linux \u4e0a\u7684 libxml2.so\uff09\n\n\nCurl \u5e93 (libcurl2.so)\n\n\n\n\n|\n\n\n\u4e0b\u9762\u5217\u51fa\u4e86 C \u7ed1\u5b9a\u968f\u9644\u7684\u7b80\u5355\u793a\u4f8b\uff1a\n\n\n\n\n\n\ntest_vm_async_migrate\uff1a\u8bf4\u660e\u5982\u4f55\u4f7f\u7528\u5f02\u6b65 API \u8c03\u7528\uff0c\u5c06\u8fd0\u884c\u4e2d\u7684 VM \u4ece\u4ece\u5c5e\u4e3b\u673a\u8fc1\u79fb\u5230\u6c60\u4e3b\u670d\u52a1\u5668\u3002\n\n\n\n\n\n\ntest_vm_ops\uff1a\u8bf4\u660e\u5982\u4f55\u67e5\u8be2\u4e3b\u673a\u7684\u529f\u80fd\u3001\u521b\u5efa VM \u4ee5\u53ca\u5982\u4f55\u5c06\u5168\u65b0\u7684\u7a7a\u78c1\u76d8\u6620\u50cf\u8fde\u63a5\u5230 VM\uff0c\u7136\u540e\u6267\u884c\u5404\u79cd\u91cd\u65b0\u542f\u52a8\u64cd\u4f5c\uff1b\n\n\n\n\n\n\ntest_failures\uff1a\u8bf4\u660e\u5982\u4f55\u5c06\u9519\u8bef\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a enum_xen_api_failure\uff0c\u53cd\u4e4b\u4ea6\u7136\uff1b\n\n\n\n\n\n\ntest_event_handling\uff1a\u8bf4\u660e\u5982\u4f55\u4fa6\u542c\u6709\u5173\u8fde\u63a5\u7684\u4e8b\u4ef6\u3002\n\n\n\n\n\n\ntest_enumerate\uff1a\u8bf4\u660e\u5982\u4f55\u679a\u4e3e\u5404\u79cd API \u5bf9\u8c61\u3002\n\n\n\n\n\n\ncsharp\n\n\nC# \u7ed1\u5b9a\u5305\u542b\u5728 XenServer-SDK/XenServer.NET \u76ee\u5f55\u4e2d\uff0c\u5e76\u5305\u542b\u9002\u7528\u4e8e\u5728 Microsoft Visual Studio \u4e0b\u6784\u5efa\u7684\u9879\u76ee\u6587\u4ef6\u3002 \u6bcf\u4e2a API \u5bf9\u8c61\u90fd\u4e0e\u4e00\u4e2a C# \u6587\u4ef6\u76f8\u5173\u8054\uff1b\u4f8b\u5982\uff0c\u5b9e\u73b0 VM \u64cd\u4f5c\u7684\u51fd\u6570\u5305\u542b\u5728 VM.cs \u6587\u4ef6\u4e2d\u3002\n\n\nC# \u7ed1\u5b9a\u4f9d\u8d56\u9879\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u652f\u6301\u7684\u5e73\u53f0\uff1a\n\n\n\u5b89\u88c5\u4e86 .NET 4.5 \u7248\u7684 Windows\n\n\n\n\n\n\n\n\n\u5e93\uff1a\n\n\n\u6b64\u8bed\u8a00\u7ed1\u5b9a\u4ee5 C# \u7a0b\u5e8f\u94fe\u63a5\u7684\u52a8\u6001\u94fe\u63a5\u5e93 XenServer.dll \u7684\u5f62\u5f0f\u751f\u6210\u3002\n\n\n\n\n\n\n\n\n\u4f9d\u8d56\u9879\uff1a\n\n\nXenServer.dll \u9700\u8981\u501f\u52a9 CookComputing.XMLRpcV2.dll \u4e0e xml-rpc \u670d\u52a1\u5668\u901a\u4fe1\u3002 \u6211\u4eec\u63d0\u4f9b\u4e86\u4fee\u8865\u7684 2.1.0.6 \u7248\u672c\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528\u6b64\u7248\u672c\uff0c\u5c3d\u7ba1\u5176\u4ed6\u7248\u672c\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u3002\n\n\n\n\n\n\n\n\nC# \u7ed1\u5b9a\u968f\u9644\u7684\u4e09\u4e2a\u793a\u4f8b\u5305\u542b\u5728 XenServer-SDK/XneServer.NET/samples \u76ee\u5f55\u4e2d\uff0c\u4f5c\u4e3a XenSdkSample.sln \u89e3\u51b3\u65b9\u6848\u7684\u72ec\u7acb\u9879\u76ee\uff1a\n\n\n\n\n\n\nGetVariousRecords\uff1a\u767b\u5f55 XenServer \u4e3b\u673a\uff0c\u663e\u793a\u6709\u5173\u4e3b\u673a\u3001\u5b58\u50a8\u548c\u865a\u62df\u673a\u7684\u4fe1\u606f\uff1b\n\n\n\n\n\n\nGetVmRecords\uff1a\u767b\u5f55 XenServer \u4e3b\u673a\uff0c\u5217\u51fa\u6240\u6709 VM \u8bb0\u5f55\uff1b\n\n\n\n\n\n\nVmPowerStates\uff1a\u767b\u5f55 XenServer \u4e3b\u673a\uff0c\u67e5\u627e VM\uff0c\u4f7f\u5176\u7ecf\u5386\u5404\u79cd\u7535\u6e90\u72b6\u6001\u3002\u8981\u6c42\u5df2\u7ecf\u5b89\u88c5\u5173\u95ed\u7684 VM \u3002\n\n\n\n\n\n\nJava\n\n\nJava \u7ed1\u5b9a\u5305\u542b\u5728 XenServer-SDK/XenServerJava \u76ee\u5f55\u4e2d\uff0c\u5e76\u5305\u542b\u9002\u7528\u4e8e\u5728 Microsoft Visual Studio \u4e0b\u6784\u5efa\u7684\u9879\u76ee\u6587\u4ef6\u3002 \u6bcf\u4e2a API \u5bf9\u8c61\u90fd\u4e0e\u4e00\u4e2a Java\u6587\u4ef6\u76f8\u5173\u8054\uff1b\u4f8b\u5982\uff0c\u5b9e\u73b0 VM \u64cd\u4f5c\u7684\u51fd\u6570\u5305\u542b\u5728 VM.java \u6587\u4ef6\u4e2d\u3002\n\n\nJava \u7ed1\u5b9a\u4f9d\u8d56\u9879\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u652f\u6301\u7684\u5e73\u53f0\uff1a\n\n\nLinux \u548c Windows\n\n\n\n\n\n\n\n\n\u5e93\uff1a\n\n\n\u6b64\u8bed\u8a00\u7ed1\u5b9a\u4ee5 Java \u7a0b\u5e8f\u94fe\u63a5\u7684 Java \u5b58\u6863\u6587\u4ef6 xenserver-7.0.jar \u7684\u5f62\u5f0f\u751f\u6210\u3002\n\n\n\n\n\n\n\n\n\u4f9d\u8d56\u9879\uff1a\n\n\n\n\n\n\n\n\n\n\n\n\nxenserver.jar \u9700\u8981\u501f\u52a9 xmlrpc-client-3.1.jar \u4e0e xml-rpc \u670d\u52a1\u5668\u901a\u4fe1\u3002\n\n\n\u8fd0\u884c\u793a\u4f8b\u9700\u8981 ws-commons-util-1.0.2.jar\u3002\n\n\n\n\n|\n\n\n\u8fd0\u884c\u4e3b\u6587\u4ef6 XenServer-SDK/XenServerJava/samples/RunTests.java \u5c06\u8fd0\u884c\u5305\u542b\u5728\u540c\u4e00\u76ee\u5f55\u4e2d\u7684\u4e00\u7cfb\u5217\u793a\u4f8b\uff1a\n\n\n\n\n\n\nAddNetwork\uff1a\u6dfb\u52a0\u672a\u8fde\u63a5\u5230\u4efb\u4f55 NIC \u7684\u65b0\u5185\u90e8\u7f51\u7edc\uff1b\n\n\n\n\n\n\nSessionReuse\uff1a\u8bf4\u660e\u5982\u4f55\u5728\u591a\u4e2a\u8fde\u63a5\u4e4b\u95f4\u5171\u4eab\u4f1a\u8bdd\u5bf9\u8c61\uff1b\n\n\n\n\n\n\nAsyncVMCreate\uff1a\u4ee5\u5f02\u6784\u65b9\u5f0f\u57fa\u4e8e\u5185\u7f6e\u6a21\u677f\u521b\u5efa\u65b0 VM\uff0c\u7136\u540e\u542f\u52a8\u5e76\u505c\u6b62\u5b83\uff1b\n\n\n\n\n\n\nVdiAndSrOps\uff1a\u6267\u884c\u5404\u79cd SR \u548c VDI \u6d4b\u8bd5\uff0c\u5305\u62ec\u521b\u5efa\u865a\u62df SR\uff1b\n\n\n\n\n\n\nCreateVM\uff1a\u5229\u7528\u7f51\u7edc\u548c DVD \u9a71\u52a8\u5668\uff0c\u5728\u9ed8\u8ba4 SR \u4e0a\u521b\u5efa VM\uff1b\n\n\n\n\n\n\nDeprecatedMethod\uff1a\u6d4b\u8bd5\u8c03\u7528\u88ab\u5f03\u7528\u7684 API \u65b9\u6cd5\u65f6\u662f\u5426\u663e\u793a\u8b66\u544a\uff1b\n\n\n\n\n\n\nGetAllRecordsOfAllTypes\uff1a\u68c0\u7d22\u6240\u6709\u5bf9\u8c61\u7c7b\u578b\u7684\u6240\u6709\u8bb0\u5f55\uff1b\n\n\n\n\n\n\nSharedStorage\uff1a\u521b\u5efa\u5171\u4eab NFS SR\uff1b\n\n\n\n\n\n\nStartAllVMs\uff1a\u8fde\u63a5\u5230\u4e3b\u673a\uff0c\u5e76\u5c1d\u8bd5\u542f\u52a8\u4e3b\u673a\u4e0a\u7684\u6bcf\u4e2a VM\u3002\n\n\n\n\n\n\nPowerShell\n\n\nPowerShell \u7ed1\u5b9a\u5305\u542b\u5728 XenServer-SDK/XenServerPowerShell \u76ee\u5f55\u4e2d\u3002 \u6211\u4eec\u63d0\u4f9b PowerShell \u6a21\u5757 XenServerPSModule \u548c\u6e90\u4ee3\u7801\uff0c\u4f7f XenServer API \u5448\u73b0\u4e3a Windows PowerShell cmdlet\u3002\n\n\nPowerShell \u7ed1\u5b9a\u4f9d\u8d56\u9879\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u652f\u6301\u7684\u5e73\u53f0\uff1a\n\n\n\u5b89\u88c5\u4e86 .NET Framework 4.5 \u548c PowerShell v4.0 \u7684 Windows\n\n\n\n\n\n\n\n\n\u5e93\uff1a\n\n\nXenServerPSModule\n\n\n\n\n\n\n\n\n\u4f9d\u8d56\u9879\uff1a\n\n\n\u9700\u8981 CookComputing.XMLRpcV2.dll \u624d\u80fd\u4e0e xml-rpc \u670d\u52a1\u5668\u901a\u4fe1\u3002\u6211\u4eec\u63d0\u4f9b\u4e86\u4fee\u8865\u7684 2.1.0.6 \u7248\u672c\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528\u6b64\u7248\u672c\uff0c\u5c3d\u7ba1\u5176\u4ed6\u7248\u672c\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u3002\n\n\n\n\n\n\n\n\nXenServer-SDK/XenServerPowerShell/samples \u76ee\u5f55\u4e2d\u7684 PowerShell \u7ed1\u5b9a\u968f\u9644\u4ee5\u4e0b\u793a\u4f8b\u811a\u672c\uff1a\n\n\n\n\n\n\nAutomatedTestCore.ps1\uff1a\u8bf4\u660e\u5982\u4f55\u767b\u5f55 XenServer \u4e3b\u673a\u3001\u521b\u5efa\u5b58\u50a8\u5e93\u548c VM\uff0c\u7136\u540e\u6267\u884c\u5404\u79cd\u91cd\u542f\u64cd\u4f5c\u3002\n\n\n\n\n\n\nHttpTest.ps1\uff1a\u8bf4\u660e\u5982\u4f55\u767b\u5f55 XenServer \u4e3b\u673a\u3001\u521b\u5efa VM\uff0c\u7136\u540e\u6267\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u4f8b\u5982\uff0c\u5bfc\u5165\u548c\u5bfc\u51fa VM\u3001\u4e0a\u8f7d\u4fee\u8865\u7a0b\u5e8f\u4ee5\u53ca\u68c0\u7d22\u6027\u80fd\u7edf\u8ba1\u4fe1\u606f\u3002\n\n\n\n\n\n\nPython\n\n\npython \u7ed1\u5b9a\u5305\u542b\u5728\u5355\u4e2a XenServer-SDK/XenServerPython/XenAPI.py \u6587\u4ef6\u4e2d\u3002\n\n\nPython \u7ed1\u5b9a\u4f9d\u8d56\u9879\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u652f\u6301\u7684\u5e73\u53f0\uff1a\n\n\nLinux\n\n\n\n\n\n\n\n\n\u5e93\uff1a\n\n\nXenAPI.py\n\n\n\n\n\n\n\n\n\u4f9d\u8d56\u9879\uff1a\n\n\n\u65e0\n\n\n\n\n\n\n\n\nSDK \u5305\u542b 7 \u4e2a python \u793a\u4f8b\uff1a\n\n\n\n\n\n\nfixpbds.py - \u91cd\u65b0\u914d\u7f6e\u7528\u4e8e\u8bbf\u95ee\u5171\u4eab\u5b58\u50a8\u7684\u8bbe\u7f6e\uff1b\n\n\n\n\n\n\ninstall.py - \u5b89\u88c5 Debian VM\u3001\u5c06\u5176\u8fde\u63a5\u5230\u7f51\u7edc\u3001\u542f\u52a8\u5e76\u7b49\u5f85\u5b83\u62a5\u544a\u5176 IP \u5730\u5740\uff1b\n\n\n\n\n\n\nlicense.py - \u5c06\u5168\u65b0\u8bb8\u53ef\u8bc1\u4e0a\u8f7d\u5230 XenServer \u4e3b\u673a\uff1b\n\n\n\n\n\n\npermute.py - \u9009\u62e9\u4e00\u7ec4 VM \u5e76\u4f7f\u7528 XenMotion \u5728\u4e3b\u673a\u4e4b\u95f4\u540c\u65f6\u79fb\u52a8\u5b83\u4eec\uff1b\n\n\n\n\n\n\npowercycle.py - \u9009\u62e9\u4e00\u7ec4 VM \u5e76\u5bf9\u5176\u6267\u884c\u91cd\u65b0\u542f\u52a8\u64cd\u4f5c\uff1b\n\n\n\n\n\n\nshell.py - \u7528\u4e8e\u6d4b\u8bd5\u7684\u7b80\u5355\u4ea4\u4e92 shell\uff1b\n\n\n\n\n\n\nvm_start_async.py - \u8bf4\u660e\u5982\u4f55\u5f02\u6b65\u8c03\u7528\u64cd\u4f5c\uff1b\n\n\n\n\n\n\nwatch-all-events.py - \u6ce8\u518c\u6240\u6709\u4e8b\u4ef6\uff0c\u5e76\u5728\u8fd9\u4e9b\u4e8b\u4ef6\u53d1\u751f\u65f6\u663e\u793a\u8be6\u7ec6\u4fe1\u606f\u3002\n\n\n\n\n\n\n\u547d\u4ee4\u884c\u63a5\u53e3 (CLI)\n\n\n\u9664\u4e86\u4f7f\u7528\u539f\u59cb XML-RPC \u6216\u63d0\u4f9b\u7684\u5176\u4e2d\u4e00\u4e2a\u8bed\u8a00\u7ed1\u5b9a\u4e4b\u5916\uff0c\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u4eba\u5458\u8fd8\u53ef\u4ee5\u4f7f\u7528 XE \u547d\u4ee4\u884c\u63a5\u53e3 xe \u4e0e XenServer \u4e3b\u673a\u96c6\u6210\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cxe CLI \u5b89\u88c5\u5728 XenServer \u4e3b\u673a\u4e0a\uff1b\u5355\u673a\u7248\u8fdc\u7a0b CLI \u4e5f\u9002\u7528\u4e8e Linux\u3002 \u5728 Windows \u4e0a\uff0cxe.exe CLI \u53ef\u6267\u884c\u6587\u4ef6\u968f XenCenter \u4e00\u8d77\u5b89\u88c5\u3002\n\n\nCLI \u4f9d\u8d56\u9879\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u652f\u6301\u7684\u5e73\u53f0\uff1a\n\n\nLinux \u548c Windows\n\n\n\n\n\n\n\n\n\u5e93\uff1a\n\n\n\u65e0\n\n\n\n\n\n\n\n\n\u4e8c\u8fdb\u5236\uff1a\n\n\nxe\uff08Windows \u4e0a\u7684 xe.exe\uff09\n\n\n\n\n\n\n\n\n\u4f9d\u8d56\u9879\uff1a\n\n\n\u65e0\n\n\n\n\n\n\n\n\nCLI \u5141\u8bb8\u4ece\u811a\u672c\u6216\u5176\u4ed6\u7a0b\u5e8f\u76f4\u63a5\u8c03\u7528\u51e0\u4e4e\u6bcf\u4e2a API \u8c03\u7528\uff0c\u4ee5\u9759\u9ed8\u65b9\u5f0f\u5b8c\u6210\u6240\u9700\u7684\u4f1a\u8bdd\u7ba1\u7406\u3002 XE CLI \u8bed\u6cd5\u548c\u529f\u80fd\u5728\u300aXenServer \u7ba1\u7406\u5458\u6307\u5357\u300b\u4e2d\u6709\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u6709\u5173\u66f4\u591a\u8d44\u6e90\u548c\u793a\u4f8b\uff0c\u8bf7\u8bbf\u95ee \nCitrix \u77e5\u8bc6\u4e2d\u5fc3\n\u3002\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u5f53\u4ece XenServer \u4e3b\u673a\u63a7\u5236\u53f0\u8fd0\u884c CLI \u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 Tab \u952e\u81ea\u52a8\u8865\u9f50\u547d\u4ee4\u540d\u79f0\u548c\u53c2\u6570\u3002\n\n\n\u5b8c\u6574\u7684\u5e94\u7528\u7a0b\u5e8f\u793a\u4f8b\n\n\n\u672c\u8282\u4ecb\u7ecd\u4e86\u4e24\u4e2a\u4f7f\u7528 API \u7684\u771f\u5b9e\u7a0b\u5e8f\u7684\u5b8c\u6574\u793a\u4f8b\u3002\n\n\n\u4f7f\u7528 XenMotion \u540c\u65f6\u8fc1\u79fb VM\n\n\n\u6b64 python \u793a\u4f8b\uff08\u5305\u542b\u5728 XenServer-SDK/XenServerPython/samples/permute.py \u4e2d\uff09\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 XenMotion \u5728\u8d44\u6e90\u6c60\u4e2d\u7684\u4e3b\u673a\u4e4b\u95f4\u540c\u65f6\u79fb\u52a8 VM\u3002 \u6b64\u793a\u4f8b\u4f7f\u7528\u5f02\u6b65 API \u8c03\u7528\u5e76\u663e\u793a\u5982\u4f55\u7b49\u5f85\u5b8c\u6210\u4e00\u7ec4\u4efb\u52a1\u3002\n\n\n\u6b64\u7a0b\u5e8f\u5f00\u5934\u90e8\u5206\u662f\u4e00\u4e9b\u6807\u51c6\u6837\u672c\u5e76\u5bfc\u5165 API \u7ed1\u5b9a\u6a21\u5757\n\n\nimport\n \nsys\n,\n \ntime\n\n\nimport\n \nXenAPI\n\n\n\n\n\n\n\u63a5\u4e0b\u6765\u6b64\u7a0b\u5e8f\u89e3\u6790\u5305\u542b\u670d\u52a1\u5668 URL\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u548c\u5927\u91cf\u8fed\u4ee3\u7684\u547d\u4ee4\u884c\u53c2\u6570\u3002 \u7528\u6237\u540d\u548c\u5bc6\u7801\u7528\u4e8e\u5efa\u7acb\u4f20\u9012\u5230\u51fd\u6570 main \u7684\u4f1a\u8bdd\uff0c\u8be5\u51fd\u6570\u4ee5\u5faa\u73af\u5f62\u5f0f\u8fdb\u884c\u591a\u6b21\u8c03\u7528\u3002 \u8bf7\u6ce8\u610f\u4f7f\u7528 try: finally: \u786e\u4fdd\u7a0b\u5e8f\u5728\u7ed3\u675f\u65f6\u4ece\u5176\u4f1a\u8bdd\u6ce8\u9500\u3002\n\n\nif __name__ == \n__main__\n:\n    if len(sys.argv) \n 5:\n        print \nUsage:\n\n        print sys.argv[0], \n \nurl\n \nusername\n \npassword\n \niterations\n\n        sys.exit(1)\n    url = sys.argv[1]\n    username = sys.argv[2]\n    password = sys.argv[3]\n    iterations = int(sys.argv[4])\n    # First acquire a valid session by logging in:\n    session = XenAPI.Session(url)\n    session.xenapi.login_with_password(username, password, \n2.3\n,\n                                       \nExample migration-demo v0.1\n)\n    try:\n        for i in range(iterations):\n            main(session, i)\n    finally:\n        session.xenapi.session.logout()\n\n\n\n\n\nmain \u51fd\u6570\u68c0\u67e5\u7cfb\u7edf\u4e2d\u6bcf\u4e2a\u8fd0\u884c\u4e2d\u7684 VM\uff0c\u8fc7\u6ee4\u51fa\u63a7\u5236\u57df\uff08\u63a7\u5236\u57df\u662f\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0c\u4e0d\u53ef\u7531\u7528\u6237\u63a7\u5236\uff09\u3002 \u8be5\u51fd\u6570\u5c06\u6784\u5efa\u8fd0\u884c\u4e2d\u7684 VM \u53ca\u5176\u5f53\u524d\u4e3b\u673a\u7684\u5217\u8868\u3002\n\n\ndef main(session, iteration):\n    # Find a non-template VM object\n    all = session.xenapi.VM.get_all()\n    vms = []\n    hosts = []\n    for vm in all:\n        record = session.xenapi.VM.get_record(vm)\n        if not(record[\nis_a_template\n]) and \\\n           not(record[\nis_control_domain\n]) and \\\n           record[\npower_state\n] == \nRunning\n:\n            vms.append(vm)\n            hosts.append(record[\nresident_on\n])\n    print \n%d: Found %d suitable running VMs\n % (iteration, len(vms))\n\n\n\n\n\n\u63a5\u4e0b\u6765\u5bf9\u4e3b\u673a\u5217\u8868\u6267\u884c\u5faa\u73af\u64cd\u4f5c\uff1a\n\n\n#use a rotation as a permutation\n    hosts = [hosts[-1]] + hosts[:(len(hosts)-1)]\n\n\n\n\n\n\u7136\u540e\uff0c\u4f7f\u7528 XenMotion \u5c06\u6bcf\u4e2a VM \u79fb\u52a8\u5230\u6b64\u5faa\u73af\u4e0b\u7684\u65b0\u4e3b\u673a\uff08\u4f8b\u5982\uff0c\u5c06\u5728\u5217\u8868\u4e2d\u4f4d\u7f6e 2 \u7684\u4e3b\u673a\u4e0a\u8fd0\u884c\u7684 VM \u79fb\u52a8\u5230\u4f4d\u4e8e\u5217\u8868\u4e2d\u4f4d\u7f6e 1 \u7684\u4e3b\u673a\u7b49\uff09\u3002\u4e3a\u4e86\u5e76\u884c\u6267\u884c\u6bcf\u4e2a\u79fb\u52a8\uff0c\u4f7f\u7528 VM.pool_migrate \u7684\u5f02\u6b65\u7248\u672c\u5e76\u6784\u5efa\u4efb\u52a1\u5f15\u7528\u5217\u8868\u3002 \u8bf7\u6ce8\u610f\u4f20\u9012\u5230 VM.pool_migrate \u7684 live \u6807\u5fd7\uff1b\u5b83\u4f1a\u4f7f VM \u5728\u79fb\u52a8\u65f6\u4ecd\u4fdd\u6301\u8fd0\u884c\u72b6\u6001\u3002\n\n\ntasks = []\n    for i in range(0, len(vms)):\n        vm = vms[i]\n        host = hosts[i]\n        task = session.xenapi.Async.VM.pool_migrate(vm, host, { \nlive\n: \ntrue\n })\n        tasks.append(task)\n\n\n\n\n\n\u7136\u540e\uff0c\u8f6e\u8be2\u4efb\u52a1\u5217\u8868\u4ee5\u67e5\u770b\u5b8c\u6210\u60c5\u51b5\uff1a\n\n\nfinished = False\n    records = {}\n    while not(finished):\n        finished = True\n        for task in tasks:\n            record = session.xenapi.task.get_record(task)\n            records[task] = record\n            if record[\nstatus\n] == \npending\n:\n                finished = False\n        time.sleep(1)\n\n\n\n\n\n\u5f53\u6240\u6709\u4efb\u52a1\u90fd\u9000\u51fa\u6302\u8d77\u72b6\u6001\uff08\u5373\u5df2\u6210\u529f\u5b8c\u6210\u3001\u5df2\u5931\u8d25\u6216\u5df2\u53d6\u6d88\uff09\u540e\uff0c\u5c06\u518d\u6b21\u8f6e\u8be2\u8fd9\u4e9b\u4efb\u52a1\u4ee5\u67e5\u770b\u662f\u5426\u5df2\u5168\u90e8\u6210\u529f\u5b8c\u6210\uff1a\n\n\nallok = True\n    for task in tasks:\n        record = records[task]\n        if record[\nstatus\n] \n \nsuccess\n:\n            allok = False\n\n\n\n\n\n\u5982\u679c\u4efb\u4e00\u4efb\u52a1\u5931\u8d25\uff0c\u5219\u4f1a\u6253\u5370\u8be6\u7ec6\u4fe1\u606f\u3001\u5f15\u53d1\u5f02\u5e38\u5e76\u4fdd\u7559\u4efb\u52a1\u5bf9\u8c61\u4ee5\u4f9b\u5c06\u6765\u68c0\u67e5\u3002 \u5982\u679c\u6240\u6709\u4efb\u52a1\u90fd\u6210\u529f\u5b8c\u6210\uff0c\u5219\u9500\u6bc1\u4efb\u52a1\u5bf9\u8c61\uff0c\u4e14\u51fd\u6570\u5c06\u8fd4\u56de\u3002\n\n\nif\n \nnot\n(\nallok\n):\n\n        \nprint\n \nOne of the tasks didn\nt succeed at\n,\n \n\\\n\n            \ntime\n.strftime\n(\n%F:%HT%M:%SZ\n,\n \ntime\n.gmtime\n())\n\n        \nidx\n \n=\n \n0\n\n        \nfor\n \ntask\n \nin\n \ntasks\n:\n\n            \nrecord\n \n=\n \nrecords\n[\ntask\n]\n\n            \nvm_name\n \n=\n \nsession\n.xenapi.VM.get_name_label\n(\nvms\n[\nidx\n]\n)\n\n            \nhost_name\n \n=\n \nsession\n.xenapi.host.get_name_label\n(\nhosts\n[\nidx\n]\n)\n\n            \nprint\n \n%s : %12s %s -\n %s \n[\n \nstatus\n:\n \n%\ns\n;\n \nresult\n =\n \n%\ns\n;\n \nerror\n =\n \n%\ns\n \n]\n \n%\n \n\\\n\n                  \n(\nrecord\n[\nuuid\n]\n,\n \nrecord\n[\nname_label\n]\n,\n \nvm_name\n,\n \nhost_name\n,\n      \n\\\n\n                   \nrecord\n[\nstatus\n]\n,\n \nrecord\n[\nresult\n]\n,\n \nrepr\n(\nrecord\n[\nerror_info\n]\n))\n\n            \nidx\n \n=\n \nidx\n \n+\n \n1\n\n        \nraise\n \nTask failed\n\n    \nelse\n:\n\n        \nfor\n \ntask\n \nin\n \ntasks\n:\n\n            \nsession\n.xenapi.task.destroy\n(\ntask\n)\n\n\n\n\n\n\n\u4f7f\u7528 XE CLI \u514b\u9686 VM\n\n\n\u6b64\u793a\u4f8b\u662f\u4e00\u4e2a bash \u811a\u672c\uff0c\u5b83\u4f7f\u7528 XE CLI \u6765\u514b\u9686 VM\uff08\u5982\u679c\u6b64 VM \u5df2\u542f\u52a8\uff0c\u5148\u5c06\u5176\u5173\u95ed\uff09\u3002\n\n\n\u6b64\u793a\u4f8b\u5f00\u5934\u90e8\u5206\u662f\u4e00\u4e9b\u6837\u672c\uff0c\u8fd9\u4e9b\u6837\u672c\u9996\u5148\u68c0\u67e5\u662f\u5426\u8bbe\u7f6e\u4e86\u73af\u5883\u53d8\u91cf XE\uff1a\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u53d8\u91cf\uff0c\u5219\u5c06\u5176\u89c6\u4e3a\u6307\u5411 CLI \u7684\u5b8c\u6574\u8def\u5f84\uff1b\u5426\u5219\u8ba4\u4e3a XE CLI \u5728\u5f53\u524d\u8def\u5f84\u4e2d\u3002 \u63a5\u4e0b\u6765\uff0c\u8be5\u811a\u672c\u63d0\u793a\u7528\u6237\u8f93\u5165\u670d\u52a1\u5668\u540d\u79f0\u3001\u7528\u6237\u540d\u548c\u5bc6\u7801\uff1a\n\n\n# Allow the path to the \nxe\n binary to be overridden by the XE environment variable\nif [ -z \n${\nXE\n}\n ]; then\n  XE=xe\nfi\nif [ ! -e \n${\nHOME\n}\n/.xe\n ]; then\n  read -p \nServer name: \n SERVER\n  read -p \nUsername: \n USERNAME\n  read -p \nPassword: \n PASSWORD\n  XE=\n${\nXE\n}\n -s \n${\nSERVER\n}\n -u \n${\nUSERNAME\n}\n -pw \n${\nPASSWORD\n}\n\nfi\n\n\n\n\n\n\u63a5\u4e0b\u6765\u8be5\u811a\u672c\u4f1a\u68c0\u67e5\u5176\u547d\u4ee4\u884c\u53c2\u6570\u3002\u53ea\u9700\u8981\u4e00\u4e2a\u53c2\u6570\uff1a\u8981\u514b\u9686\u7684 VM \u7684 UUID\uff1a\n\n\n# Check if there\ns a VM by the uuid specified\n\n${\nXE\n}\n vm-list params=uuid | grep -q \n \n${\nvmuuid\n}\n$\n\nif [ $? -ne 0 ]; then\n        echo \nerror: no vm uuid \\\n${\nvmuuid\n}\n\\\n found\n\n        exit 2\nfi\n\n\n\n\n\n\u7136\u540e\uff0c\u8be5\u811a\u672c\u68c0\u67e5 VM \u7684\u7535\u6e90\u72b6\u6001\uff0c\u5982\u679c VM \u6b63\u5728\u8fd0\u884c\uff0c\u5219\u5c1d\u8bd5\u5f7b\u5e95\u5173\u95ed\u3002\u4f7f\u7528\u4e8b\u4ef6\u7cfb\u7edf\u4ee5\u7b49\u5f85 VM \u8fdb\u5165\u201c\u5df2\u6682\u505c\u201d\u72b6\u6001\u3002\n\n\n\n\n\u6ce8\u610f\n\n\n\n\nXE CLI \u652f\u6301\u547d\u4ee4\u884c\u53c2\u6570 --minimal\uff0c\u8be5\u53c2\u6570\u4f7f\u6253\u5370\u8f93\u51fa\u6ca1\u6709\u591a\u4f59\u7a7a\u683c\u6216\u683c\u5f0f\uff0c\u4fbf\u4e8e\u811a\u672c\u4f7f\u7528\u3002 \u5982\u679c\u8fd4\u56de\u591a\u4e2a\u503c\uff0c\u5219\u4f7f\u7528\u9017\u53f7\u5206\u9694\u3002\n\n\n#Check the power state of the vm\nname=$(\n${\nXE\n}\n vm-list uuid=\n${\nvmuuid\n}\n params=name-label --minimal)\nstate=$(\n${\nXE\n}\n vm-list uuid=\n${\nvmuuid\n}\n params=power-state --minimal)\nwasrunning=0\n# If the VM state is running, we shutdown the vm first\nif [ \n${\nstate\n}\n = \nrunning\n ]; then\n        \n${\nXE\n}\n vm-shutdown uuid=\n${\nvmuuid\n}\n\n        \n${\nXE\n}\n event-wait class=vm power-state=halted uuid=\n${\nvmuuid\n}\n\n        wasrunning=1\nfi\n\n\n\n\n\n\u7136\u540e\u514b\u9686 VM\uff0c\u65b0 VM \u7684 name_label \u8bbe\u7f6e\u4e3a cloned_vm\u3002\n\n\n# Clone the VM\nnewuuid=$(\n${\nXE\n}\n vm-clone uuid=\n${\nvmuuid\n}\n new-name-label=cloned_vm)\n\n\n\n\n\n\u6700\u540e\uff0c\u5982\u679c\u539f\u59cb VM \u539f\u6765\u6b63\u5728\u8fd0\u884c\u800c\u540e\u6765\u88ab\u5173\u95ed\uff0c\u5219\u5b83\u5c06\u548c\u65b0 VM \u4e00\u8d77\u542f\u52a8\u3002\n\n\n# If the VM state was running before cloning, we start it again\n# along with the new VM.\nif [ \n$wasrunning\n -eq 1 ]; then\n        \n${\nXE\n}\n vm-start uuid=\n${\nvmuuid\n}\n\n        \n${\nXE\n}\n vm-start uuid=\n${\nnewuuid\n}\n\nfi\n\n\n\n\n\n\u4f7f\u7528 HTTP \u4e0e XenServer \u4ea4\u4e92\n\n\nXenServer \u5728\u6bcf\u4e2a\u4e3b\u673a\u4e0a\u63d0\u4f9b\u4e00\u4e2a HTTP \u63a5\u53e3\uff0c\u8fd9\u4e9b\u63a5\u53e3\u53ef\u7528\u4e8e\u6267\u884c\u5404\u79cd\u64cd\u4f5c\u3002\u672c\u7ae0\u5c06\u4ecb\u7ecd\u53ef\u7528\u673a\u5236\u3002\n\n\nVM \u5bfc\u5165\u548c\u5bfc\u51fa\n\n\n\u7531\u4e8e\u5bfc\u5165\u548c\u5bfc\u51fa VM \u9700\u8981\u4e00\u4e9b\u65f6\u95f4\u624d\u80fd\u5b8c\u6210\uff0c\u56e0\u6b64\u63d0\u4f9b\u4e86\u7528\u4e8e\u5bfc\u5165\u548c\u5bfc\u51fa\u64cd\u4f5c\u7684\u5f02\u6b65 HTTP \u63a5\u53e3\u3002 \u8981\u4f7f\u7528 XenServer API \u6267\u884c\u5bfc\u51fa\u64cd\u4f5c\uff0c\u53ef\u6784\u5efa\u4e00\u4e2a HTTP GET \u8c03\u7528\u4ee5\u63d0\u4f9b\u6709\u6548\u4f1a\u8bdd ID\u3001\u4efb\u52a1 ID \u548c VM UUID\uff0c\u5982\u4ee5\u4e0b\u4f2a\u4ee3\u7801\u4e2d\u6240\u793a\uff1a\n\n\ntask = Task.create()\nresult = HTTP.get(\n  server, 80, \n/export?session_id=\nsession_id\ntask_id=\ntask_id\nref=\nvm_uuid\n);\n\n\n\n\n\n\u5bf9\u4e8e\u5bfc\u5165\u64cd\u4f5c\uff0c\u53ef\u4ee5\u4f7f\u7528 HTTP PUT \u8c03\u7528\uff0c\u5982\u4ee5\u4e0b\u4f2a\u4ee3\u7801\u4e2d\u6240\u793a\uff1a\n\n\ntask =\n Task\n.\ncreate\n()\n\n\nresult =\n HTTP\n.\nput\n(\n\n  server\n,\n \n80\n,\n \n/import?session_id=\nsession_id\ntask_id=\ntask_id\nref=\nvm_uuid\n);\n\n\n\n\n\n\n\u83b7\u53d6 XenServer \u6027\u80fd\u7edf\u8ba1\u4fe1\u606f\n\n\nXenServer \u8bb0\u5f55\u4e0e\u60a8\u7684 XenServer \u5b89\u88c5\u7684\u5404\u4e2a\u65b9\u9762\u7684\u6027\u80fd\u6709\u5173\u7684\u7edf\u8ba1\u4fe1\u606f\u3002 \u8fd9\u4e9b\u6307\u6807\u5c06\u6c38\u4e45\u5b58\u50a8\u4ee5\u4f9b\u957f\u671f\u8bbf\u95ee\u548c\u8fdb\u884c\u5386\u53f2\u8d8b\u52bf\u5206\u6790\u3002 \u5f53\u5b58\u50a8\u5bf9 VM \u53ef\u7528\u65f6\uff0c\u7edf\u8ba1\u4fe1\u606f\u5c06\u5728 VM \u5173\u95ed\u65f6\u5199\u5165\u78c1\u76d8\u3002 \u7edf\u8ba1\u4fe1\u606f\u5b58\u50a8\u5728\u4e3a\u5404\u4e2a VM\uff08\u5305\u542b\u63a7\u5236\u57df\uff09\u548c\u670d\u52a1\u5668\u4fdd\u7559\u7684 RRD\uff08\u5faa\u73af\u6570\u636e\u5e93\uff09\u4e2d\u3002 RRD \u4f4d\u4e8e\u8fd0\u884c VM \u7684\u670d\u52a1\u5668\u4e0a\uff0c\u5982\u679c VM \u672a\u8fd0\u884c\uff0c\u5219\u4f4d\u4e8e\u6c60\u4e3b\u670d\u52a1\u5668\u4e0a\u3002 RRD \u4e5f\u4f1a\u6bcf\u5929\u5907\u4efd\u3002\n\n\n\n\n\u8b66\u544a\n\n\n\n\n\u5728 XenServer API \u7684\u65e9\u671f\u7248\u672c\u4e2d\uff0c\u53ef\u4f7f\u7528 VM_metrics\u3001VM_guest_metrics\u3001host_metrics \u65b9\u6cd5\u53ca\u76f8\u5173\u65b9\u6cd5\u83b7\u53d6\u5373\u65f6\u6027\u80fd\u6307\u6807\u3002 \u8fd9\u4e9b\u65b9\u6cd5\u5df2\u5f03\u7528\uff0c\u800c\u662f\u4f7f\u7528\u672c\u7ae0\u4ecb\u7ecd\u7684 HTTP \u5904\u7406\u7a0b\u5e8f\u4ece VM \u548c\u670d\u52a1\u5668\u4e0a\u7684 RRD \u4e0b\u8f7d\u7edf\u8ba1\u4fe1\u606f\u3002 \u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u65e7\u7684\u6307\u6807\u5c06\u8fd4\u56de\u96f6\u3002 \u8981\u6062\u590d\u4f7f\u7528 XenServer \u65e9\u671f\u7248\u672c\u4e2d\u7684\u5b9a\u671f\u7edf\u8ba1\u8f6e\u8be2\u65b9\u6cd5\uff0c\u8bf7\u5c06\u60a8\u4e3b\u673a\u4e0a\u7684 other- config:rrd_update_interval=\n \u53c2\u6570\u8bbe\u7f6e\u4e3a\u4ee5\u4e0b\u503c\u4e4b\u4e00\uff0c\u5e76\u91cd\u65b0\u542f\u52a8\u60a8\u7684\u4e3b\u673a\uff1a\n\n\nnever\n\uff1a\u8fd9\u662f\u9ed8\u8ba4\u503c\uff0c\u8868\u793a\u4e0d\u6267\u884c\u5b9a\u671f\u8f6e\u8be2\u3002\n\n\n1\n\uff1a\u6bcf 5 \u79d2\u6267\u884c\u4e00\u6b21\u8f6e\u8be2\u3002\n\n\n2\n\uff1a\u6bcf\u5206\u949f\u6267\u884c\u4e00\u6b21\u8f6e\u8be2\u3002\n\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e7\u7248\u6307\u6807 API \u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u503c\uff0c\u56e0\u6b64\u8981\u8fd0\u884c\u4f7f\u7528\u65e7\u7248\u76d1\u89c6\u534f\u8bae\u7684\u76d1\u89c6\u5ba2\u6237\u7aef\uff0c\u5fc5\u987b\u542f\u7528\u6b64\u952e\u3002\n\n\n\u7edf\u8ba1\u4fe1\u606f\u4ee5\u4e0d\u540c\u7684\u7c92\u5ea6\u5b58\u50a8\uff0c\u6700\u957f\u4fdd\u7559\u4e00\u5e74\u65f6\u95f4\u3002\u5e73\u5747\u503c\u548c\u6700\u8fd1\u503c\u4ee5\u4e0b\u9762\u7684\u65f6\u95f4\u95f4\u9694\u5b58\u50a8\uff1a\n\n\n\n\n\n\n\u5728\u8fc7\u53bb 10 \u5206\u949f\u5185\u6bcf\u9694 5 \u79d2\n\n\n\n\n\n\n\u5728\u8fc7\u53bb 2 \u4e2a\u5c0f\u65f6\u5185\u6bcf\u9694 1 \u5206\u949f\n\n\n\n\n\n\n\u5728\u8fc7\u53bb 1 \u5468\u5185\u6bcf\u9694 1 \u5c0f\u65f6\n\n\n\n\n\n\n\u5728\u8fc7\u53bb 1 \u5e74\u5185\u6bcf\u9694 1 \u5929\n\n\n\n\n\n\nRRD \u4ee5\u672a\u7ecf\u538b\u7f29\u7684 XML \u5f62\u5f0f\u4fdd\u5b58\u5230\u78c1\u76d8\u3002\u5f53 RRD \u5b58\u50a8\u5168\u5e74\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u6bcf\u4e2a RRD \u5199\u5165\u78c1\u76d8\u65f6\u7684\u5927\u5c0f\u8303\u56f4\u4e3a 200 KiB \u5230\u5927\u7ea6 1.2 MiB\u3002\n\n\n\n\n\u8b66\u544a\n\n\n\n\n\u5982\u679c\u7edf\u8ba1\u4fe1\u606f\u65e0\u6cd5\u5199\u5165\u78c1\u76d8\uff08\u4f8b\u5982\uff0c\u5f53\u78c1\u76d8\u5df2\u6ee1\u65f6\uff09\uff0c\u7edf\u8ba1\u4fe1\u606f\u5c06\u4e22\u5931\uff0c\u5e76\u5c06\u4f7f\u7528 RRD \u7684\u4e0a\u6b21\u4fdd\u5b58\u7248\u672c\u3002\n\n\n\u53ef\u901a\u8fc7 HTTP \u4ee5 XML \u683c\u5f0f\u4e0b\u8f7d\u7edf\u8ba1\u4fe1\u606f\uff0c\u4f8b\u5982\u4f7f\u7528 wget\u3002 \u8bf7\u53c2\u9605 \nhttp://oss.oetiker.ch/rrdtool/doc/rrddump.en.html\n \u548c \nhttp://oss.oetiker.ch/rrdtool/doc/rrdxport.en.html\n \u4e86\u89e3\u6709\u5173 XML \u683c\u5f0f\u7684\u4fe1\u606f\u3002 HTTP \u8eab\u4efd\u9a8c\u8bc1\u53ef\u4ee5\u91c7\u53d6\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u5f62\u5f0f\u6216\u4f1a\u8bdd\u4ee4\u724c\u7684\u5f62\u5f0f\u3002 \u53c2\u6570\u9644\u52a0\u5230 URL\uff0c\u63a5\u5728\u95ee\u53f7 (?) \u4e4b\u540e\uff0c\u5e76\u4ee5\u548c\u53f7 (\n) \u5206\u9694\u3002\n\n\n\u8981\u83b7\u53d6\u4e3b\u673a\u4e0a\u6240\u6709 VM \u7edf\u8ba1\u4fe1\u606f\u7684\u66f4\u65b0\uff0cURL \u5e94\u4e3a\u5982\u4e0b\u5f62\u5f0f\uff1a\n\n\nhttp://\nusername\n:\npassword\n@\nhost\n/rrd_updates?start=\nsecondssinceepoch\n\n\n\n\n\n\n\u6b64\u8bf7\u6c42\u5c06\u4e3a\u6b63\u5728\u67e5\u8be2\u7684\u7279\u5b9a\u4e3b\u673a\u4e0a\u7684\u6bcf\u4e2a VM \u8fd4\u56de rrdtool xport \u6837\u5f0f XML \u683c\u5f0f\u7684\u6570\u636e\u3002 \u4e3a\u4e86\u533a\u5206\u5bfc\u51fa\u4e2d\u7684\u5217\u4e0e\u54ea\u4e2a VM \u76f8\u5173\u8054\uff0clegend \u5b57\u6bb5\u5c06\u4ee5 VM \u7684 UUID \u4f5c\u4e3a\u524d\u7f00\u3002\n\n\n\u8981\u540c\u65f6\u83b7\u53d6\u4e3b\u673a\u66f4\u65b0\uff0c\u8bf7\u4f7f\u7528\u67e5\u8be2\u53c2\u6570 \nhost=true\n\uff1a\n\n\nhttp://\nusername\n:\npassword\n@\nhost\n/rrd_updates?start=\nsecondssinceepoch\nhost=true\n\n\n\n\n\n\u65f6\u95f4\u6bb5\u8d8a\u77ed\u5219\u6b65\u957f\u8d8a\u5c0f\uff0c\u8fd9\u610f\u5473\u7740\uff0c\u8bf7\u6c42\u67e5\u8be2\u7edf\u8ba1\u4fe1\u606f\u7684\u65f6\u95f4\u6bb5\u8d8a\u77ed\uff0c\u83b7\u5f97\u7684\u7edf\u8ba1\u4fe1\u606f\u8d8a\u8be6\u7ec6\u3002\n\n\n\u5176\u4ed6 rrd_updates \u53c2\u6570\n\n\n\n\ncf=\nave|min|max\n \u6570\u636e\u5408\u5e76\u6a21\u5f0f\n\n\ninterval=\ninterval\n \u62a5\u544a\u503c\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694\n\n\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709 ave \u7edf\u8ba1\u4fe1\u606f\u53ef\u7528\u3002 \u8981\u83b7\u53d6 VM \u7684 min \u548c max \u7edf\u8ba1\u4fe1\u606f\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\nxe pool-param-set uuid=\npool_uuid\n other-config:create_min_max_in_new_VM_RRDs\n\n\n\u83b7\u53d6\u4e3b\u673a\u7684\u6240\u6709\u7edf\u8ba1\u4fe1\u606f\uff1a\n\n\nhttp://\nusername:password@host\n/host_rrd\n\n\n\n\n\n\u83b7\u53d6 VM \u7684\u6240\u6709\u7edf\u8ba1\u4fe1\u606f\uff1a\n\n\nhttp://\nusername:password@host\n/vm_rrd?uuid=\nvm_uuid\n\n\n\n\n\n\nXenServer API \u6269\u5c55\n\n\nXenAPI \u662f\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u865a\u62df\u673a\u7684\u751f\u547d\u5468\u671f\u7684\u5e38\u89c4\u7efc\u5408\u6027\u63a5\u53e3\uff0c\u5728 XenAPI \u63d0\u4f9b\u7a0b\u5e8f\u5b9e\u73b0\u7279\u5b9a\u529f\u80fd\uff08\u4f8b\u5982\uff0c\u7f6e\u5907\u5b58\u50a8\u6216\u5904\u7406\u63a7\u5236\u53f0\uff09\u7684\u65b9\u5f0f\u65b9\u9762\uff0c\u63d0\u4f9b\u4e86\u5f88\u5927\u7684\u7075\u6d3b\u6027\u3002 XenServer \u5177\u6709\u591a\u4e2a\u6269\u5c55\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u81ea\u5df1\u7684 XenCenter \u754c\u9762\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u6269\u5c55\u63d0\u4f9b\u7684\u6709\u7528\u529f\u80fd\u3002 \u672c\u7ae0\u4ecb\u7ecd\u8fd9\u4e9b\u673a\u5236\u7684\u5de5\u4f5c\u65b9\u6cd5\u3002\n\n\n\u901a\u5e38\u901a\u8fc7\u4e3a\u5404\u79cd\u5bf9\u8c61\u6307\u5b9a other-config \u6620\u5c04\u952e\u63d0\u4f9b XenAPI \u6269\u5c55\u3002 \u6b64\u53c2\u6570\u7528\u6765\u8868\u793a XenServer \u7684\u7279\u5b9a\u7248\u672c\u652f\u6301\u67d0\u4e00\u529f\u80fd\uff0c\u4f46\u8be5\u529f\u80fd\u4e0d\u662f\u957f\u671f\u529f\u80fd\u3002 \u6211\u4eec\u4e00\u76f4\u5728\u8bc4\u4f30 API \u7684\u529f\u80fd\u4ee5\u8fdb\u884c\u63d0\u5347\uff0c\u8fd9\u9700\u8981\u5bf9\u754c\u9762\u7684\u7279\u6027\u6709\u5f88\u597d\u7684\u4e86\u89e3\u3002 \u6211\u4eec\u59cb\u7ec8\u6b22\u8fce\u60a8\u5c31\u5176\u4e2d\u4e00\u4e9b\u6269\u5c55\u7684\u4f7f\u7528\u60c5\u51b5\u63d0\u4f9b\u5f00\u53d1\u4eba\u5458\u53cd\u9988\uff0c\u4ee5\u5e2e\u52a9\u6211\u4eec\u505a\u51fa\u8fd9\u4e9b\u51b3\u7b56\u3002\n\n\nVM \u63a7\u5236\u53f0\u8f6c\u53d1\n\n\n\u5927\u591a\u6570 XenAPI \u56fe\u5f62\u754c\u9762\u90fd\u5e0c\u671b\u80fd\u591f\u8bbf\u95ee VM \u63a7\u5236\u53f0\uff0c\u4ee5\u4fbf\u5c06\u8fd9\u4e9b\u63a7\u5236\u53f0\u5982\u540c\u7269\u7406\u673a\u4e00\u6837\u5448\u73b0\u7ed9\u7528\u6237\u3002 \u5b58\u5728\u591a\u79cd\u53ef\u7528\u63a7\u5236\u53f0\u7c7b\u578b\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6765\u5bbe\u7cfb\u7edf\u7684\u7c7b\u578b\u6216\u662f\u5426\u6b63\u5728\u8bbf\u95ee\u7269\u7406\u4e3b\u673a\u63a7\u5236\u53f0\uff1a\n\n\n\u63a7\u5236\u53f0\u8bbf\u95ee\n\n\n\n\n\n\n\n\n\u64cd\u4f5c\u7cfb\u7edf\n\n\n\u6587\u672c\n\n\n\u56fe\u5f62\n\n\n\u4f18\u5316\u7684\u56fe\u5f62\n\n\n\n\n\n\n\n\n\n\nWindows\n\n\n\u5426\n\n\nVNC\uff0c\u4f7f\u7528 API \u8c03\u7528\n\n\nRDP\uff0c\u76f4\u63a5\u6765\u81ea\u6765\u5bbe\u7cfb\u7edf\n\n\n\n\n\n\nLinux\n\n\n\u662f\uff0c\u901a\u8fc7 VNC \u548c API \u8c03\u7528\n\n\n\u5426\n\n\nVNC\uff0c\u76f4\u63a5\u6765\u81ea\u6765\u5bbe\u7cfb\u7edf\n\n\n\n\n\n\n\u7269\u7406\u4e3b\u673a\n\n\n\u662f\uff0c\u901a\u8fc7 VNC \u548c API \u8c03\u7528\n\n\n\u5426\n\n\n\u5426\n\n\n\n\n\n\n\n\n\u786c\u4ef6\u8f85\u52a9 VM\uff08\u4f8b\u5982 Windows\uff09\u901a\u8fc7 VNC \u76f4\u63a5\u63d0\u4f9b\u56fe\u5f62\u63a7\u5236\u53f0\u3002 \u4e0d\u5b58\u5728\u57fa\u4e8e\u6587\u672c\u7684\u63a7\u5236\u53f0\uff0c\u4f7f\u7528\u56fe\u5f62\u63a7\u5236\u53f0\u4e0d\u9700\u8981\u6765\u5bbe\u7cfb\u7edf\u7f51\u7edc\u8fde\u63a5\u3002 \u5efa\u7acb\u6765\u5bbe\u7cfb\u7edf\u7f51\u7edc\u8fde\u63a5\u540e\uff0c\u66f4\u9ad8\u6548\u7684\u65b9\u6cd5\u662f\u8bbe\u7f6e\u201c\u8fdc\u7a0b\u684c\u9762\u8bbf\u95ee\u201d\u5e76\u4f7f\u7528 RDP \u5ba2\u6237\u7aef\u76f4\u63a5\u8fde\u63a5\uff08\u5fc5\u987b\u5728 XenAPI \u5916\u90e8\u6267\u884c\u6b64\u64cd\u4f5c\uff09\u3002\n\n\n\u534a\u865a\u62df\u5316 VM\uff08\u4f8b\u5982 Linux \u6765\u5bbe\u7cfb\u7edf\uff09\u53ef\u76f4\u63a5\u63d0\u4f9b\u672c\u673a\u6587\u672c\u63a7\u5236\u53f0\u3002 XenServer \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a vncterm \u7684\u5b9e\u7528\u7a0b\u5e8f\uff0c\u7528\u6765\u5c06\u6b64\u57fa\u4e8e\u6587\u672c\u7684\u63a7\u5236\u53f0\u8f6c\u6362\u4e3a\u56fe\u5f62 VNC \u8868\u793a\u5f62\u5f0f\u3002 \u6b64\u63a7\u5236\u53f0\u65e0\u9700\u6765\u5bbe\u7cfb\u7edf\u7f51\u7edc\u8fde\u63a5\u5373\u53ef\u4f7f\u7528\u3002 \u4e0e\u524d\u9762\u7684 Windows \u7248\u672c\u4e00\u6837\uff0cLinux \u7248\u672c\u901a\u5e38\u5728\u6765\u5bbe\u7cfb\u7edf\u5185\u90e8\u914d\u7f6e VNC\uff0c\u7136\u540e\u901a\u8fc7\u6765\u5bbe\u7cfb\u7edf\u7f51\u7edc\u63a5\u53e3\u76f4\u63a5\u4e0e\u5176\u8fde\u63a5\u3002\n\n\n\u7269\u7406\u4e3b\u673a\u63a7\u5236\u53f0\u4ec5\u53ef\u7528\u4f5c vt100 \u63a7\u5236\u53f0\uff0c\u53ef\u901a\u8fc7\u5728\u63a7\u5236\u57df\u4e2d\u4f7f\u7528 vncterm \u6765\u901a\u8fc7 XenAPI \u5c06\u5176\u4f5c\u4e3a VNC \u63a7\u5236\u53f0\u663e\u793a\u3002\n\n\nVNC \u57fa\u4e8e RFB\uff08\u8fdc\u7a0b Framebuffer\uff09\u534f\u8bae\uff0c\u8fd9\u662f\u5728 RFB \u534f\u8bae\u4e2d\u6307\u5b9a\u7684\u3002 \u7b2c\u4e09\u65b9\u5f00\u53d1\u4eba\u5458\u5e94\u63d0\u4f9b\u4ed6\u4eec\u81ea\u5df1\u7684 VNC \u67e5\u770b\u5668\uff0c\u8bb8\u591a\u514d\u8d39\u63d0\u4f9b\u7684\u5b9e\u65bd\u53ef\u7528\u6765\u5b9e\u73b0\u6b64\u76ee\u7684\u3002 \u67e5\u770b\u5668\u5fc5\u987b\u652f\u6301\u7684\u6700\u4f4e\u7248\u672c\u662f RFB 3.3\u3002\n\n\n\u4f7f\u7528 API \u68c0\u7d22 VNC \u63a7\u5236\u53f0\n\n\n\u4f7f\u7528\u4f20\u9012\u5230\u4e3b\u673a\u4ee3\u7406\u7684\u7279\u6b8a URL \u53ef\u4ee5\u68c0\u7d22 VNC \u63a7\u5236\u53f0\u3002API \u8c03\u7528\u5e8f\u5217\u5982\u4e0b\u6240\u793a\uff1a\n\n\n\n\n\n\n\u5ba2\u6237\u7aef\u5230\u4e3b\u670d\u52a1\u5668/443\uff1aXML-RPC\uff1aSession.login_with_password()\u3002\n\n\n\n\n\n\n\u4e3b\u670d\u52a1\u5668/443 \u5230\u5ba2\u6237\u7aef\uff1a\u8fd4\u56de\u7528\u4e8e\u540e\u7eed\u8c03\u7528\u7684\u4f1a\u8bdd\u5f15\u7528\u3002\n\n\n\n\n\n\n\u5ba2\u6237\u7aef\u5230\u4e3b\u670d\u52a1\u5668/443\uff1aXML-RPC\uff1aVM.get_by_name_label()\u3002\n\n\n\n\n\n\n\u4e3b\u670d\u52a1\u5668/443 \u5230\u5ba2\u6237\u7aef\uff1a\u8fd4\u56de\u5bf9\u7279\u5b9a VM\uff08\u6216\u201c\u63a7\u5236\u57df\u201d- \u5982\u679c\u60a8\u5e0c\u671b\u68c0\u7d22\u7269\u7406\u4e3b\u673a\u63a7\u5236\u53f0\uff09\u7684\u5f15\u7528\u3002\n\n\n\n\n\n\n\u5ba2\u6237\u7aef\u5230\u4e3b\u670d\u52a1\u5668/443\uff1aXML-RPC\uff1aVM.get_consoles()\u3002\n\n\n\n\n\n\n\u4e3b\u670d\u52a1\u5668/443 \u5230\u5ba2\u6237\u7aef\uff1a\u8fd4\u56de\u4e0e VM \u76f8\u5173\u8054\u7684\u63a7\u5236\u53f0\u5bf9\u8c61\u7684\u5217\u8868\u3002\n\n\n\n\n\n\n\u5ba2\u6237\u7aef\u5230\u4e3b\u670d\u52a1\u5668/443\uff1aXML-RPC\uff1aVM.get_location()\u3002\n\n\n\n\n\n\n\u8fd4\u56de\u4e00\u4e2a URI\uff0c\u63cf\u8ff0\u6240\u8bf7\u6c42\u63a7\u5236\u53f0\u7684\u4f4d\u7f6e\u3002\u8fd9\u4e9b URI \u7684\u5f62\u5f0f\u4e3a\uff1ahttps://192.168.0.1/console?ref=OpaqueRef:c038533a-af99-a0ff-9095-c1159f2dc6a0\u3002\n\n\n\n\n\n\n\u5ba2\u6237\u7aef\u5230 192.168.0.1\uff1aHTTP CONNECT \"/console?ref=(...)\"\n\n\n\n\n\n\n\u6700\u7ec8\u7684 HTTP CONNECT \u4e0e\u6807\u51c6\u7565\u6709\u4e0d\u7b26\uff0c\u56e0\u4e3a HTTP/1.1 RFC \u6307\u5b9a\u5b83\u5e94\u8be5\u53ea\u662f\u4e3b\u673a\u548c\u7aef\u53e3\uff0c\u800c\u4e0d\u662f URL\u3002 \u5b8c\u6210 HTTP \u8fde\u63a5\u540e\uff0c\u8be5\u8fde\u63a5\u968f\u540e\u53ef\u4ee5\u76f4\u63a5\u7528\u4f5c VNC \u670d\u52a1\u5668\uff0c\u65e0\u9700\u5176\u4ed6 HTTP \u534f\u8bae\u64cd\u4f5c\u3002\n\n\n\u6b64\u65b9\u6848\u9700\u8981\u4ece\u5ba2\u6237\u7aef\u76f4\u63a5\u8bbf\u95ee\u63a7\u5236\u57df\u7684 IP\uff0c\u5982\u679c\u5b58\u5728\u963b\u6b62\u6b64\u7c7b\u8fde\u63a5\u7684\u7f51\u7edc\u5730\u5740\u8f6c\u6362 (NAT) \u8bbe\u5907\uff0c\u5219\u65e0\u6cd5\u6b63\u786e\u8fd0\u884c\u3002 \u53ef\u4ee5\u4f7f\u7528 CLI \u4ece\u5ba2\u6237\u7aef\u68c0\u7d22\u63a7\u5236\u53f0 URI\uff0c\u7136\u540e\u6267\u884c\u8fde\u63a5\u68c0\u67e5\u3002\n\n\n\u4f7f\u7528 CLI \u68c0\u7d22\u63a7\u5236\u53f0 URI\n\n\n\n\n\n\n\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u68c0\u7d22 VM UUID\uff1a\n\n\nxe vm-list params=uuid --minimal name-label=name\n\n\n\n\n\n\n\u68c0\u7d22\u63a7\u5236\u53f0\u4fe1\u606f\uff1a\n\n\nxe console-list vm-uuid=uuid\nuuid ( RO): 714f388b-31ed-67cb-617b-0276e35155ef\nvm-uuid ( RO): 8acb7723-a5f0-5fc5-cd53-9f1e3a7d3069\nvm-name-label ( RO): etch\nprotocol ( RO): RFB\nlocation ( RO): https://192.168.0.1/console?ref=(...)\nUse command-line utilities like ping to test connectivity to the IP address provided in the location field.\n\n\n\n\n\n\n\u7981\u7528 Linux VM \u7684 VNC \u8f6c\u53d1\n\n\n\u521b\u5efa\u548c\u9500\u6bc1 Linux VM \u65f6\uff0c\u4e3b\u673a\u4ee3\u7406\u4f1a\u81ea\u52a8\u7ba1\u7406\u5c06\u6587\u672c\u63a7\u5236\u53f0\u8f6c\u6362\u4e3a VNC \u7684 vncterm \u8fdb\u7a0b\u3002 \u5e0c\u671b\u76f4\u63a5\u8bbf\u95ee\u6587\u672c\u63a7\u5236\u53f0\u7684\u9ad8\u7ea7\u7528\u6237\u53ef\u4ee5\u7981\u7528\u8be5 VM \u7684 VNC \u8f6c\u53d1\u3002 \u4e4b\u540e\uff0c\u53ea\u80fd\u4ece\u63a7\u5236\u57df\u76f4\u63a5\u8bbf\u95ee\u6587\u672c\u63a7\u5236\u53f0\uff0cXenCenter \u7b49\u56fe\u5f62\u754c\u9762\u5c06\u65e0\u6cd5\u5448\u73b0\u8be5 VM \u7684\u63a7\u5236\u53f0\u3002\n\n\n\u4f7f\u7528 CLI \u7981\u7528 Linux VNC \u63a7\u5236\u53f0\n\n\n\n\n\u542f\u52a8\u6765\u5bbe\u7cfb\u7edf\u4e4b\u524d\uff0c\u5728 VM \u8bb0\u5f55\u4e0a\u8bbe\u7f6e\u4ee5\u4e0b\u53c2\u6570\uff1a \nxe vm-param-set uuid=uuid other-config:disable_pv_vnc=1\n\n\n\n\n\u542f\u52a8 VM\u3002\n\n\n\n\n\n\n\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u4f7f\u7528 CLI \u68c0\u7d22 VM \u7684\u57fa\u7840\u57df ID\uff1a\n\n\nxe vm-list params=dom-id uuid=\nuuid\n --minimal\n\n\n\n\n\n\n\n\n\n\u5728\u4e3b\u673a\u63a7\u5236\u53f0\u4e0a\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u76f4\u63a5\u8fde\u63a5\u5230\u6587\u672c\u63a7\u5236\u53f0\uff1a\n/usr/lib/xen/bin/xenconsole \ndomain_id\n\n\n\n\n\n\n\u6b64\u914d\u7f6e\u662f\u4e00\u4e2a\u9ad8\u7ea7\u8fc7\u7a0b\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4e0d\u8981\u5c06\u6587\u672c\u63a7\u5236\u53f0\u76f4\u63a5\u7528\u4e8e\u5927\u91cf\u7684 I/O \u64cd\u4f5c\uff0c \u800c\u662f\u901a\u8fc7 SSH \u6216\u5176\u4ed6\u4e00\u4e9b\u57fa\u4e8e\u7f51\u7edc\u7684\u8fde\u63a5\u673a\u5236\u8fde\u63a5\u5230\u6765\u5bbe\u7cfb\u7edf\u3002\n\n\n\u534a\u865a\u62df\u5316 Linux \u5b89\u88c5\n\n\n\u7531\u4e8e\u5fc5\u987b\u5f15\u5bfc Xen \u611f\u77e5\u5185\u6838\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u786c\u4ef6\u8f85\u52a9\u6280\u672f\u7b80\u5355\u5730\u5b89\u88c5\u6765\u5bbe\u7cfb\u7edf\uff0c\u534a\u865a\u62df\u5316 Linux \u6765\u5bbe\u7cfb\u7edf\u7684\u5b89\u88c5\u8f83\u4e3a\u590d\u6742\u3002 \u800c\u8fd9\u5177\u6709\u5728\u4eff\u771f\u5f00\u9500\u4e0d\u8db3\u65f6\u4f7f\u5b89\u88c5\u901f\u5ea6\u63a5\u8fd1\u4e8e\u672c\u673a\u5b89\u88c5\u901f\u5ea6\u7684\u597d\u5904\u3002 XenServer \u652f\u6301\u5b89\u88c5\u591a\u4e2a\u4e0d\u540c\u7684 Linux \u7248\u672c\uff0c\u5e76\u5c3d\u53ef\u80fd\u7cbe\u7b80\u6b64\u8fc7\u7a0b\u3002\n\n\n\u6700\u540e\uff0c\u5728\u63a7\u5236\u57df\u4e2d\u5c06\u51fa\u73b0\u4e00\u4e2a\u540d\u4e3a eliloader \u7684\u7279\u6b8a\u5f15\u5bfc\u52a0\u8f7d\u5668\uff0c\u5b83\u542f\u52a8\u65f6\u4f1a\u8bfb\u53d6 VM \u8bb0\u5f55\u4e2d\u7684\u5404\u79cd other-config \u952e\uff0c\u5e76\u6267\u884c\u7279\u5b9a\u4e8e\u7248\u672c\u7684\u5b89\u88c5\u884c\u4e3a\u3002\n\n\n\n\n\n\ninstall-repository - \u5fc5\u9700\u3002\u5b58\u50a8\u5e93\u7684\u8def\u5f84\uff1b\u201chttp\u201d\u3001\u201chttps\u201d\u3001\u201cftp\u201d\u6216\u201cnfs\u201d\u3002\u5e94\u6307\u5b9a\u4e3a\u76ee\u6807\u5b89\u88c5\u7a0b\u5e8f\u5c06\u4f7f\u7528\u7684\u5f62\u5f0f\uff0c\u4f46\u4e0d\u5e94\u5305\u542b\u524d\u7f00\uff0c\u4f8b\u5982 method=\u3002\n\n\n\n\n\n\ninstall-vnc - \u9ed8\u8ba4\u503c\uff1afalse\u3002\u5728\u5b89\u88c5\u671f\u95f4\uff0c\u53ef\u7528\u65f6\u4f7f\u7528 VNC\u3002\n\n\n\n\n\n\ninstall-vncpasswd - \u9ed8\u8ba4\u503c\uff1aempty\u3002\u8981\u4f7f\u7528\u7684 VNC \u5bc6\u7801\uff08\u5982\u679c\u53ef\u4ee5\u4f7f\u7528\u76ee\u6807\u7248\u672c\u7684\u547d\u4ee4\u884c\u63d0\u4f9b\u4e00\u4e2a\u5bc6\u7801\uff09\u3002\n\n\n\n\n\n\ninstall-round - \u9ed8\u8ba4\u503c\uff1a1\u3002\u5f53\u524d\u5f15\u5bfc\u52a0\u8f7d\u5668\u5faa\u73af\u3002\u7528\u6237\u65e0\u6cd5\u7f16\u8f91\uff08\u5982\u4e0b\u6240\u793a\uff09\u3002\n\n\n\n\n\n\nRed Hat Enterprise Linux 4.1/4.4\n\n\neliloader \u7528\u4e8e\u8fdb\u884c\u4e24\u8f6e\u5f15\u5bfc\u3002 \u5728\u7b2c\u4e00\u8f6e\u5f15\u5bfc\u4e2d\uff0c\u5b83\u901a\u8fc7 /opt/xensource/packages/files/guest-installer \u8fd4\u56de\u5b89\u88c5\u7a0b\u5e8f initrd \u548c\u5185\u6838\u3002 \u7136\u540e\uff0c\u5728\u7b2c\u4e8c\u8f6e\u5f15\u5bfc\u4e2d\uff0c\u5b83\u4ece VM \u4e2d\u5220\u9664\u9644\u52a0\u66f4\u65b0\u78c1\u76d8\uff0c\u63a5\u7740\u5c06\u5f15\u5bfc\u52a0\u8f7d\u5668\u5207\u6362\u5230 pygrub\uff0c\u7136\u540e\u5f00\u59cb\u6b63\u5e38\u5f15\u5bfc\u3002\n\n\n\u6b64\u5e8f\u5217\u662f\u5fc5\u9700\u7684\uff0c\u56e0\u4e3a Red Hat \u6ca1\u6709\u4e3a\u8fd9\u4e9b\u7248\u672c\u63d0\u4f9b Xen \u5185\u6838\uff0c\u56e0\u800c\u6539\u7528\u8fd9\u4e9b\u7248\u672c\u7684 XenServer \u81ea\u5b9a\u4e49\u5185\u6838\u3002\n\n\nRed Hat Enterprise Linux 4.5/5.0\n\n\n\u4e0e RHEL4.4 \u5b89\u88c5\u7c7b\u4f3c\uff0c\u4e0d\u540c\u4e4b\u5904\u53ea\u662f\u76f4\u63a5\u4ece\u7528\u6237\u6307\u5b9a\u7684\u7f51\u7edc\u5b58\u50a8\u5e93\u4e0b\u8f7d\u5185\u6838\u548c Ramdisk\uff0c\u4ee5\u53ca\u7acb\u5373\u5c06\u5f15\u5bfc\u52a0\u8f7d\u5668\u5207\u6362\u5230 pygrub\u3002 \u8bf7\u6ce8\u610f\uff0cpygrub \u4e0d\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u800c\u4ec5\u4f1a\u5728\u4e0b\u4e00\u6b21\u5f15\u5bfc\u65f6\u89e3\u6790\u3002\n\n\n\u901a\u8fc7\u7f51\u7edc\u68c0\u7d22\uff0c\u7528\u6237\u53ef\u76f4\u63a5\u4ece\u5176\u7f51\u7edc\u5b58\u50a8\u5e93\u5b89\u88c5\u4e0a\u6e38 Red Hat \u4f9b\u5e94\u5546\u5185\u6838\u3002 xs-tools.iso \u5185\u7f6e ISO \u6620\u50cf\u4e2d\u8fd8\u63d0\u4f9b\u4e86\u66f4\u65b0\u7684 XenServer \u5185\u6838\uff0c\u4fee\u590d\u4e86\u5404\u79cd\u4e0e Xen \u76f8\u5173\u7684\u9519\u8bef\u3002\n\n\nSUSE Enterprise Linux 10 SP1\n\n\n\u8981\u6c42\u4e24\u8f6e\u5f15\u5bfc\u8fc7\u7a0b\u3002 \u7b2c\u4e00\u8f6e\u5f15\u5bfc\u8fc7\u7a0b\u4ece\u7f51\u7edc\u5b58\u50a8\u5e93\u4e0b\u8f7d\u5185\u6838\u548c Ramdisk\uff0c\u7136\u540e\u5f15\u5bfc\u5b83\u4eec\u3002 \u63a5\u7740\uff0c\u7b2c\u4e8c\u8f6e\u5f15\u5bfc\u8fc7\u7a0b\u5c06\u68c0\u67e5\u78c1\u76d8\u4ee5\u67e5\u627e\u5b89\u88c5\u7684\u5185\u6838\u548c Ramdisk\uff0c\u5e76\u8bbe\u7f6e PV-bootloader-args \u4ee5\u53cd\u6620\u6765\u5bbe\u6587\u4ef6\u7cfb\u7edf\u5185\u7684\u90a3\u4e9b\u8def\u5f84\u3002 \u6b64\u8fdb\u7a0b\u6a21\u62df domUloader\uff0cSUSE \u5c06\u5176\u7528\u4f5c\u66ff\u4ee3 pygrub \u7684\u65b9\u6cd5\u3002 \u6700\u540e\uff0c\u5c06\u5f15\u5bfc\u52a0\u8f7d\u5668\u8bbe\u7f6e\u4e3a pygrub\uff0c\u5e76\u6267\u884c\u4ee5\u5f00\u59cb\u6b63\u5e38\u5f15\u5bfc\u3002\n\n\nSLES 10 \u5b89\u88c5\u65b9\u6cd5\u8868\u793a\u5185\u6838\u548c Ramdisk \u7684\u8def\u5f84\u5b58\u50a8\u5728 VM \u8bb0\u5f55\u4e2d\u800c\u4e0d\u662f\u6765\u5bbe\u7cfb\u7edf menu.lst \u4e2d\uff0c\u4f46\u8fd9\u662f\u5b83\u8fd0\u884c\u7684\u552f\u4e00\u65b9\u5f0f\uff0c\u56e0\u4e3a YAST \u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\u672a\u5199\u5165\u6709\u6548\u7684 menu.lst\u3002\n\n\nCentOS 4.5 / 5.0\n\n\nCentOS \u5b89\u88c5\u673a\u5236\u4e0e\u524d\u9762\u63d0\u5230\u7684 Red Hat \u5b89\u88c5\u8bf4\u660e\u7c7b\u4f3c\uff0c\u53ea\u662f eliloader \u8bc6\u522b\u7684\u4e00\u4e9b MD5 \u6821\u9a8c\u548c\u4e0d\u540c\u3002\n\n\n\u5411 VM \u6dfb\u52a0 Xenstore \u6761\u76ee\n\n\n\u5f00\u53d1\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u5728 VM \u4e2d\u5b89\u88c5\u6765\u5bbe\u7cfb\u7edf\u4ee3\u7406\uff0c\u4ee5\u6839\u636e VM \u7c7b\u578b\u6267\u884c\u7279\u6b8a\u7684\u64cd\u4f5c\u3002 \u4e3a\u5c06\u6b64\u4fe1\u606f\u544a\u77e5\u6765\u5bbe\u7cfb\u7edf\uff0c\u53ef\u4f7f\u7528\u540d\u4e3a vm-data \u7684\u7279\u6b8a Xenstore \u547d\u540d\u7a7a\u95f4\uff0c\u6b64\u547d\u540d\u7a7a\u95f4\u5728\u521b\u5efa VM \u65f6\u586b\u5145\uff0c \u5b83\u662f\u901a\u8fc7 VM \u8bb0\u5f55\u4e2d\u7684 xenstore-data \u6620\u5c04\u586b\u5145\u7684\u3002\n\n\n\u5728 VM \u4e2d\u586b\u5145 Xenstore \u8282\u70b9 foo\n\n\n\n\n\n\n\u8bbe\u7f6e VM \u8bb0\u5f55\u4e2d\u7684 xenstore-data \u53c2\u6570\uff1a\n\n\nxe vm-param-set uuid=\nvm_uuid\n xenstore-data:vm-data/foo=bar\u00a1\u00a4\n\n\n\n\n\n\n\u542f\u52a8 VM\u3002\n\n\n\n\n\n\n\u5982\u679c\u662f\u57fa\u4e8e Linux \u7684 VM\uff0c\u8bf7\u5b89\u88c5 XenServer Tools\uff0c\u7136\u540e\u4f7f\u7528 xenstore-read \u9a8c\u8bc1 Xenstore \u4e2d\u662f\u5426\u5b58\u5728\u8be5\u8282\u70b9\u3002\n\n\n\n\n\n\n\n\n\u6ce8\u610f\n\n\n\n\n\u4ec5\u5141\u8bb8\u4f7f\u7528\u4ee5 vm-data \u5f00\u5934\u7684\u524d\u7f00\uff0c\u542f\u52a8 VM \u65f6\u5c06\u9ed8\u8ba4\u5ffd\u7565\u4efb\u4f55\u4e0d\u5728\u6b64\u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u5185\u5bb9\u3002\n\n\n\u5b89\u5168\u589e\u5f3a\u529f\u80fd\n\n\nXenServer 7.0 \u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u7684\u63a7\u5236\u57df\u5177\u6709\u591a\u79cd\u5b89\u5168\u589e\u5f3a\u529f\u80fd\uff0c\u4ee5\u52a0\u5f3a\u62b5\u5fa1\u6076\u610f\u6765\u5bbe\u7cfb\u7edf\u653b\u51fb\u7684\u80fd\u529b\u3002 \u5f00\u53d1\u4eba\u5458\u4e0d\u5e94\u5c06\u4efb\u4f55\u6b63\u5e38\u529f\u80fd\u7684\u4e22\u5931\u89c6\u4e3a\u8fd9\u4e9b\u66f4\u6539\u5bfc\u81f4\u7684\u7ed3\u679c\uff0c\u4e0d\u8fc7\u4e0b\u9762\u5c06\u8fd9\u4e9b\u66f4\u6539\u4f5c\u4e3a\u5176\u4ed6\u7248\u672c\u884c\u4e3a\u7684\u53d8\u4f53\u8fdb\u884c\u4e86\u5f52\u6863\u3002\n\n\n\n\n\n\n\u5957\u63a5\u5b57\u63a5\u53e3 xenstored\uff0c\u53ef\u4f7f\u7528 libxenstore \u8fdb\u884c\u8bbf\u95ee\u3002\u53ef\u4f7f\u7528 xs_restrict() \u9650\u5236\u63a5\u53e3\u3002\n\n\n\n\n\n\n\u8bbe\u5907 /dev/xen/evtchn\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 libxenctrl \u4e2d\u7684 xs_evtchn_open() \u8bbf\u95ee\u3002\u53ef\u4ee5\u4f7f\u7528 xs_evtchn_restrict() \u9650\u5236\u53e5\u67c4\u3002\n\n\n\n\n\n\n\u8bbe\u5907 /proc/xen/privcmd\uff0c\u53ef\u901a\u8fc7 libxenctrl \u4e2d\u7684 xs_interface_open() \u8bbf\u95ee\u3002 \u53ef\u4ee5\u4f7f\u7528 xc_interface_restrict() \u9650\u5236\u53e5\u67c4\u3002 \u4e00\u4e9b\u6743\u9650\u547d\u4ee4\u5f88\u96be\u52a0\u4ee5\u9650\u5236\uff08\u4f8b\u5982\uff0c\u751f\u6210\u4efb\u610f\u5c42\u7684\u8d85\u7ea7\u8c03\u7528\uff09\uff0c\u53ea\u662f\u5728\u53d7\u9650\u53e5\u67c4\u4e0a\u7981\u7528\u8fd9\u4e9b\u547d\u4ee4\u3002\n\n\n\n\n\n\n\u53d7\u9650\u53e5\u67c4\u4ee5\u540e\u65e0\u6cd5\u88ab\u6388\u4e88\u66f4\u591a\u6743\u9650\uff0c\u56e0\u6b64\u5fc5\u987b\u5173\u95ed\u5e76\u91cd\u65b0\u6253\u5f00\u63a5\u53e3\u3002\u4ec5\u5f53\u6b64\u8fdb\u7a0b\u968f\u540e\u65e0\u6cd5\u6253\u5f00\u66f4\u591a\u53e5\u67c4\u65f6\uff0c\u624d\u80fd\u4fdd\u8bc1\u5b89\u5168\u3002\n\n\n\n\n\n\n\u73b0\u5728\u53ef\u4ee5\u5c06\u63a7\u5236\u57df\u6743\u9650\u7528\u6237\u7a7a\u95f4\u63a5\u53e3\u9650\u5236\u4e3a\u4ec5\u9002\u7528\u4e8e\u7279\u5b9a\u57df\u3002\u4e0b\u9762\u662f\u53d7\u6b64\u66f4\u6539\u5f71\u54cd\u7684\u4e09\u4e2a\u63a5\u53e3\uff1a\n\n\n\n\n\n\nqemu \u8bbe\u5907\u4eff\u771f\u8fdb\u7a0b\u548c vncterm \u7ec8\u7aef\u4eff\u771f\u8fdb\u7a0b\u4f5c\u4e3a\u975e root \u7528\u6237 ID \u8fd0\u884c\uff0c\u5e76\u88ab\u9650\u5236\u4e3a\u5728\u7a7a\u76ee\u5f55\u4e2d\u8fd0\u884c\u3002 \u5b83\u4eec\u4f7f\u7528\u4e0a\u8ff0\u7684\u9650\u5236 API \u4ee5\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\u653e\u5f03\u6743\u9650\u3002\n\n\n\n\n\n\n\u5bf9 xenstore \u7684\u8bbf\u95ee\u53d7\u901f\u7387\u9650\u5236\uff0c\u4ee5\u9632\u6b62\u6076\u610f\u6765\u5bbe\u7cfb\u7edf\u9020\u6210\u63a7\u5236\u57df\u4e0a\u53d1\u751f\u62d2\u7edd\u670d\u52a1\u7684\u60c5\u51b5\u3002 \u8fd9\u53ef\u4ee5\u4f5c\u4e3a\u5177\u6709\u53d7\u9650\u586b\u5145\u901f\u7387\u7684\u4ee4\u724c\u6876\u5b9e\u73b0\uff0c\u5176\u4e2d\u5927\u591a\u6570\u64cd\u4f5c\u4f7f\u7528\u4e00\u4e2a\u4ee4\u724c\uff0c\u6253\u5f00\u4e00\u4e2a\u4e8b\u52a1\u9700\u8981 20 \u4e2a\u4ee4\u724c\u3002 \u8fd9\u4e9b\u9650\u5236\u8bbe\u7f6e\u5f97\u5f88\u9ad8\uff0c\u5373\u4f7f\u662f\u5728\u8d1f\u8f7d\u64cd\u4f5c\u4e0b\u8fd0\u884c\u5927\u91cf\u5e76\u53d1\u6765\u5bbe\u7cfb\u7edf\uff0c\u4e5f\u6c38\u8fdc\u8fbe\u4e0d\u5230\u8fd9\u4e9b\u9650\u5236\u3002\n\n\n\n\n\n\nVNC \u6765\u5bbe\u7cfb\u7edf\u63a7\u5236\u53f0\u4ec5\u7ed1\u5b9a\u5230 localhost \u63a5\u53e3\uff0c\u4ee5\u4f7f\u5b83\u4eec\u4e0d\u4f1a\u5bf9\u5916\u90e8\u516c\u5f00\uff0c\u5373\u4f7f\u5df2\u901a\u8fc7\u7528\u6237\u5e72\u9884\u7981\u7528\u4e86\u63a7\u5236\u57df\u7a0b\u5e8f\u5305\u8fc7\u6ee4\u5668\u4e5f\u4e0d\u4f1a\u516c\u5f00\u3002\n\n\n\n\n\n\n\u7f51\u7edc\u63a5\u53e3\u7684\u9ad8\u7ea7\u8bbe\u7f6e\n\n\n\u865a\u62df\u7f51\u7edc\u63a5\u53e3\u548c\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u5177\u6709\u4e00\u4e9b\u9ad8\u7ea7\u8bbe\u7f6e\uff0c\u53ef\u4f7f\u7528 other-config \u6620\u5c04\u53c2\u6570\u914d\u7f6e\u8fd9\u4e9b\u8bbe\u7f6e\u3002 \u8fd9\u5305\u542b\u4e00\u7ec4\u81ea\u5b9a\u4e49 ethtool \u8bbe\u7f6e\u53ca\u4e00\u4e9b\u5176\u4ed6\u8bbe\u7f6e\u3002\n\n\nethtool \u8bbe\u7f6e\n\n\n\u5f00\u53d1\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u4e3a\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u548c\u865a\u62df\u7f51\u7edc\u63a5\u53e3\u914d\u7f6e\u81ea\u5b9a\u4e49 ethtool \u8bbe\u7f6e\u3002\u8fd9\u901a\u8fc7\u4f7f\u7528 ethtool- \u5b8c\u6210\u3002\n other-config \u6620\u5c04\u53c2\u6570\u4e2d\u7684\u952e\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bf4\u660e\n\n\n\u6709\u6548\u8bbe\u7f6e\n\n\n\n\n\n\n\n\n\n\nethtool-rx\n\n\n\u6307\u5b9a\u662f\u5426\u542f\u7528 RX \u6821\u9a8c\u548c\u68c0\u67e5\n\n\n\u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e\n\n\n\n\n\n\nethtool-tx\n\n\n\u6307\u5b9a\u662f\u5426\u542f\u7528 TX \u6821\u9a8c\u548c\u68c0\u67e5\n\n\n\u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e\n\n\n\n\n\n\nethtool-sg\n\n\n\u6307\u5b9a\u662f\u5426\u542f\u7528\u5206\u6563/\u96c6\u4e2d\n\n\n\u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e\n\n\n\n\n\n\nethtool-tso\n\n\n\u6307\u5b9a\u662f\u5426\u542f\u7528 tcp \u5206\u6bb5\u5378\u8f7d\n\n\n\u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e\n\n\n\n\n\n\nethtool-ufo\n\n\n\u6307\u5b9a\u662f\u5426\u542f\u7528 UDP \u6bb5\u5378\u8f7d\n\n\n\u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e\n\n\n\n\n\n\nethtool-gso\n\n\n\u6307\u5b9a\u662f\u5426\u542f\u7528\u901a\u7528\u5206\u6bb5\u5378\u8f7d\n\n\n\u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e\n\n\n\n\n\n\nethtool-autoneg\n\n\n\u6307\u5b9a\u662f\u5426\u542f\u7528\u81ea\u52a8\u534f\u5546\n\n\n\u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e\n\n\n\n\n\n\nethtool-speed\n\n\n\u8bbe\u7f6e\u8bbe\u5907\u901f\u5ea6\uff08\u4ee5 Mb/\u79d2\u4e3a\u5355\u4f4d\uff09\n\n\n10\u3001100 \u6216 1000\n\n\n\n\n\n\nethtool-duplex\n\n\n\u8bbe\u7f6e\u5168\u53cc\u5de5\u6216\u534a\u53cc\u5de5\u6a21\u5f0f\n\n\nhalf \u6216 full\n\n\n\n\n\n\n\n\n\u4f8b\u5982\uff0c\u4f7f\u7528 xe CLI \u5bf9\u865a\u62df NIC \u542f\u7528 TX \u6821\u9a8c\u548c\u68c0\u67e5\uff1a\n\n\nxe vif-param-set uuid=\nVIF UUID\n other-config:ethtool-tx=\non\n\n\n\n\n\n\n\u6216\uff1a\n\n\nxe vif-param-set uuid=\nVIF UUID\n other-config:ethtool-tx=\ntrue\n\n\n\n\n\n\n\u4f7f\u7528 xe CLI \u5c06\u7269\u7406 NIC \u4e0a\u7684\u53cc\u5de5\u8bbe\u7f6e\u8bbe\u4e3a\u534a\u53cc\u5de5\uff1a\n\n\nxe vif-param-set uuid=\nVIF UUID\n other-config:ethtool-duplex=\nhalf\n\n\n\n\n\n\n\u5176\u4ed6\u8bbe\u7f6e\n\n\n\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5c06 promiscuous \u952e\u8bbe\u7f6e\u4e3a on\uff0c\u5728 VIF \u6216 PIF \u4e0a\u8bbe\u7f6e\u6df7\u6742\u6a21\u5f0f\u3002\u4f8b\u5982\uff0c\u4f7f\u7528 xe CLI \u5bf9\u7269\u7406 NIC \u542f\u7528\u6df7\u6742\u6a21\u5f0f\uff1a\n\n\nxe pif-param-set uuid=\nPIF UUID\n other-config:promiscuous=\non\n\n\n\n\n\n\n\u6216\uff1a\n\n\nxe pif-param-set uuid=\nPIF UUID\n other-config:promiscuous=\ntrue\n\n\n\n\n\n\nVIF \u5bf9\u8c61\u548c PIF \u5bf9\u8c61\u90fd\u5177\u6709 MTU \u53c2\u6570\uff0c\u8be5\u53c2\u6570\u662f\u53ea\u8bfb\u7684\uff0c\u53ef\u63d0\u4f9b\u63a5\u53e3\u7684\u6700\u5927\u4f20\u8f93\u5355\u4f4d\u7684\u5f53\u524d\u8bbe\u7f6e\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 other-config \u6620\u5c04\u53c2\u6570\u4e2d\u7684 mtu \u952e\u8986\u76d6\u7269\u7406\u6216\u865a\u62df\u7f51\u5361\u7684\u9ed8\u8ba4\u6700\u5927\u4f20\u8f93\u5355\u4f4d\u3002 \u4f8b\u5982\uff0c\u4f7f\u7528 xe CLI \u5c06\u865a\u62df\u7f51\u5361\u4e0a\u7684 MTU \u91cd\u7f6e\u4e3a\u4f7f\u7528 jumbo \u5e27\uff1a\n\n\nxe vif-param-set uuid=\nVIF UUID\n other-config:mtu=9000\n\n\n\n\n\n\u8bf7\u6ce8\u610f\uff0c\u66f4\u6539\u57fa\u7840\u63a5\u53e3\u7684 MTU \u662f\u4e00\u4e2a\u9ad8\u7ea7\u5b9e\u9a8c\u529f\u80fd\uff0c\u5982\u679c\u5355\u4e2a\u8d44\u6e90\u6c60\u4e2d\u7684 NIC \u4e0a\u5b58\u5728\u4e0d\u540c\u7684 MTU\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u5916\u7684\u526f\u9762\u5f71\u54cd\u3002\n\n\nSR \u540d\u79f0\u7684\u56fd\u9645\u5316\n\n\n\u5728\u5b89\u88c5\u65f6\u521b\u5efa\u7684 SR \u73b0\u5728\u5305\u542b\u4e00\u4e2a other_config \u952e\uff0c\u6307\u793a SR \u540d\u79f0\u56fd\u9645\u5316\u7684\u65b9\u5f0f\u3002\n\n\nother_config[\u201di18n-key\u201d] \u53ef\u80fd\u662f\u4e0b\u5217\u9879\u4e4b\u4e00\n\n\n\n\n\n\nlocal-hotplug-cd\n\n\n\n\n\n\nlocal-hotplug-disk\n\n\n\n\n\n\nlocal-storage\n\n\n\n\n\n\nxenserver-tools\n\n\n\n\n\n\n\u6b64\u5916\uff0c\u5728\u521b\u5efa SR \u65f6\uff0cother_config[\"i18n-original-value-\n\"] \u63d0\u4f9b\u8be5\u5b57\u6bb5\u7684\u503c\u3002 \u5982\u679c XenCenter \u53d1\u73b0\u4e00\u4e2a\u8bb0\u5f55\uff0c\u5176\u4e2d SR.name_label \u7b49\u4e8e other_config[\u201di18n-original-value-name_label\u201d]\uff08\u5373\u6b64\u8bb0\u5f55\u81ea\u4ece\u5728 XenServer \u5b89\u88c5\u671f\u95f4\u521b\u5efa\u540e\u672a\u66f4\u6539\uff09\uff0c\u5219\u5c06\u5e94\u7528\u56fd\u9645\u5316\u3002 \u6362\u8a00\u4e4b\uff0cXenCenter \u5c06\u5ffd\u7565\u8be5\u5b57\u6bb5\u7684\u5f53\u524d\u5185\u5bb9\uff0c\u800c\u4f7f\u7528\u4e0e\u7528\u6237\u81ea\u5df1\u7684\u8bed\u8a00\u76f8\u5bf9\u5e94\u7684\u503c\u3002\n\n\n\u5982\u679c\u60a8\u6309\u81ea\u5df1\u7684\u9700\u8981\u66f4\u6539 SR.name_label\uff0c\u5b83\u5c06\u4e0d\u518d\u4e0e other_config[\u201di18n-original-value-name_label\u201d] \u76f8\u540c\u3002 \u56e0\u6b64\uff0cXenCenter \u5c06\u4e0d\u5e94\u7528\u56fd\u9645\u5316\uff0c\u800c\u662f\u4fdd\u7559\u60a8\u6307\u5b9a\u7684\u540d\u79f0\u3002\n\n\n\u4ece XenCenter \u9690\u85cf\u5bf9\u8c61\n\n\n\u901a\u8fc7\u5c06\u952e HideFromXenCenter=true \u6dfb\u52a0\u5230\u5bf9\u8c61\u7684 other_config \u53c2\u6570\uff0c\u53ef\u4ee5\u4ece XenCenter \u9690\u85cf\u7f51\u7edc\u3001PIF \u548c VM\u3002 \u6b64\u529f\u80fd\u9762\u5411\u4e86\u89e3\u81ea\u5df1\u6b63\u5728\u6267\u884c\u4ec0\u4e48\u64cd\u4f5c\u7684 ISV\uff0c\u800c\u4e0d\u662f\u4f9b\u65e5\u5e38\u7528\u6237\u7684\u5e38\u89c4\u4f7f\u7528\u3002 \u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u60f3\u9690\u85cf\u67d0\u4e9b VM\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u60a8\u7684\u73af\u5883\u4e2d\u662f\u4e0d\u5e94\u7531\u5e38\u89c4\u7528\u6237\u76f4\u63a5\u4f7f\u7528\u7684\u514b\u9686 VM\u3002\n\n\n\u5728 XenCenter \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\n\u67e5\u770b\n\u83dc\u5355\u6765\u67e5\u770b\u9690\u85cf\u7684\u7f51\u7edc\u3001PIF \u548c VM\u3002\n\n\nXenCenter API \u6269\u5c55\n\n\n\u9664\u4e86\u8bb0\u5f55\u7684 API \u4e4b\u5916\uff0c\u4e0b\u9762\u5404\u8282\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u6211\u4eec\u6240\u505a\u7684\u5047\u8bbe\u548c API \u6269\u5c55\u3002 \u6269\u5c55\u5728\u8bcd\u5178\u4e2d\u7f16\u7801\u4e3a\u7279\u6b8a\u952e\u503c\u5bf9\uff0c\u5982 VM.other_config\u3002\n\n\n\u6c60\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\npool.name_label\n\n\n\u7a7a name_label \u8868\u660e\u6c60\u5e94\u5728\u6811\u89c6\u56fe\u4e2d\u9690\u85cf\u3002\n\n\n\n\n\n\npool.rolling_upgrade_in_progress\n\n\n\u5982\u679c\u6c60\u5904\u4e8e\u6eda\u52a8\u5347\u7ea7\u671f\u95f4\uff0c\u5219\u663e\u793a\u8be5\u6c60\u3002\n\n\n\n\n\n\n\n\n\u4e3b\u673a\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\nhost.other_config[\"iscsi_iqn\"]\n\n\n\u4e3b\u673a\u7684 iSCSI IQN\u3002\n\n\n\n\n\n\nhost.license_params[\"expiry\"]\n\n\n\u4e3b\u673a\u8bb8\u53ef\u8bc1\u7684\u5230\u671f\u65e5\u671f\uff0c\u91c7\u7528 UTC ISO 8601 \u65f6\u95f4\u3002\n\n\n\n\n\n\nhost.license_params[\"sku_type\"]\n\n\n\u4e3b\u673a\u8bb8\u53ef\u8bc1\u7c7b\u578b\uff0c\u4f8b\u5982 Server \u6216 Enterprise\u3002\n\n\n\n\n\n\nhost.license_params[\"restrict_pooling\"]\n\n\n\u5982\u679c\u6c60\u529f\u80fd\u53d7\u4e3b\u673a\u7684\u9650\u5236\uff0c\u5219\u8fd4\u56de true\u3002\n\n\n\n\n\n\nhost.license_params[\"restrict_connection\"]\n\n\n\u53ef\u4ee5\u4ece XenCenter \u8fdb\u884c\u8fde\u63a5\u7684\u8fde\u63a5\u6570\u53d7\u9650\u5236\u3002\n\n\n\n\n\n\nhost.license_params[\"restrict_qos\"]\n\n\n\u5982\u679c\u5df2\u5728\u4e3b\u673a\u4e0a\u542f\u7528\u201c\u670d\u52a1\u8d28\u91cf\u201d\u8bbe\u7f6e\uff0c\u5219\u8fd4\u56de true\u3002\n\n\n\n\n\n\nhost.license_params[\"restrict_vlan\"]\n\n\n\u5982\u679c\u5728\u4e3b\u673a\u4e0a\u521b\u5efa\u865a\u62df\u7f51\u7edc\u53d7\u9650\u5236\uff0c\u5219\u8fd4\u56de true\u3002\n\n\n\n\n\n\nhost.license_params[\"restrict_pool_attached_storage\"]\n\n\n\u5982\u679c\u5728\u6b64\u4e3b\u673a\u4e0a\u521b\u5efa\u5171\u4eab\u5b58\u50a8\u53d7\u9650\u5236\uff0c\u5219\u8fd4\u56de true\u3002\n\n\n\n\n\n\nhost.software_version[\"product_version\"]\n\n\n\u8fd4\u56de\u4e3b\u673a\u7684\u4ea7\u54c1\u7248\u672c\u3002\n\n\n\n\n\n\nhost.software_version[\"build_number\"]\n\n\n\u8fd4\u56de\u4e3b\u673a\u7684\u5185\u90e8\u7248\u672c\u53f7\u3002\n\n\n\n\n\n\nhost.software_version[\"xapi\"]\n\n\n\u8fd4\u56de\u4e3b\u673a\u7684 API \u4fee\u8ba2\u53f7\u3002\n\n\n\n\n\n\nhost.software_version[\"package-linux\"]\n\n\n\u5982\u679c\u5df2\u5b89\u88c5 Linux Pack\uff0c\u5219\u8fd4\u56de\u201cinstalled\u201d\u3002\n\n\n\n\n\n\nhost.software_version[\"oem_build_number\"]\n\n\n\u5982\u679c\u4e3b\u673a\u662f OEM \u7248\u672c\uff0c\u5219\u8fd4\u56de\u5176\u4fee\u8ba2\u53f7\u3002\n\n\n\n\n\n\nhost.logging[\"syslog_destination\"]\n\n\n\u4e3a XenServer \u7cfb\u7edf\u8bb0\u5f55\u7a0b\u5e8f\u83b7\u53d6\u6216\u8bbe\u7f6e\u76ee\u6807\uff08\u7a7a\u503c\u8868\u793a\u672c\u5730\u65e5\u5fd7\u8bb0\u5f55\uff09\u3002\n\n\n\n\n\n\nhost.logging[\"multipathing\"]\n\n\n\u5982\u679c\u5df2\u5728\u6b64\u4e3b\u673a\u4e0a\u542f\u7528\u5b58\u50a8\u591a\u8def\u5f84\uff0c\u5219\u4e3a\u201ctrue\u201d\u3002\n\n\n\n\n\n\nhost.logging[\"boot_time\"]\n\n\n\u63d0\u4f9b\u4e3b\u673a\u5f15\u5bfc\u65f6\u95f4\u7684\u6d6e\u70b9 Unix \u65f6\u95f4\u3002\n\n\n\n\n\n\nhost.logging[\"agent_start_time\"]\n\n\n\u63d0\u4f9b\u63a7\u5236\u57df\u7ba1\u7406\u5b88\u62a4\u7a0b\u5e8f\u542f\u52a8\u65f6\u95f4\u7684\u6d6e\u70b9 Unix \u65f6\u95f4\u3002\n\n\n\n\n\n\n\n\nVM\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\nVM.other_config[\"default_template\"]\n\n\n\u6b64\u6a21\u677f\u662f Citrix \u5b89\u88c5\u7684\u4e00\u4e2a\u6a21\u677f\u3002\u5b83\u7528\u4e8e\u9009\u62e9\u6027\u5730\u5728\u6811\u89c6\u56fe\u4e2d\u9690\u85cf\u5bf9\u8c61\u3001\u4e3a\u5b83\u4eec\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u6807\u4ee5\u53ca\u7981\u6b62\u5220\u9664\u3002\n\n\n\n\n\n\nVM.other_config[\"xensource_internal\"]\n\n\n\u6b64\u6a21\u677f\u662f\u7279\u6b8a\u6a21\u677f\uff0c\u4f8b\u5982 P2V \u670d\u52a1\u5668\u6a21\u677f\u3002\u8fd9\u4e9b\u5185\u5bb9\u88ab UI \u5b8c\u5168\u9690\u85cf\u3002\n\n\n\n\n\n\nVM.other_config[\"install_distro\"] == \"rhlike\"\n\n\n\u6b64\u6a21\u677f\u9002\u7528\u4e8e RHEL 4.5\u3001RHEL 5 \u6216 CentOS \u7b49\u6548\u952e\u3002 \u5b83\u7528\u4e8e\u5728\u5b89\u88c5\u671f\u95f4\u63d0\u793a\u5b89\u88c5\u5b58\u50a8\u5e93\uff0c\u5176\u4e2d\u5305\u62ec\u652f\u6301\u5728 Miami \u4e0a\u4ece ISO/CD \u5b89\u88c5\uff0c\u4ee5\u53ca\u4fee\u6539 NFS URL \u4ee5\u9002\u7528\u4e8e\u8fd9\u4e9b\u5b89\u88c5\u7a0b\u5e8f\u3002\n\n\n\n\n\n\nVM.other_config[\"install_distro\"] in { \"rhel41\" or \"rhel44\" }\n\n\n\u6b64\u6a21\u677f\u9002\u7528\u4e8e RHEL 4.1\u3001RHEL 4.4 \u6216 CentOS \u7b49\u6548\u952e\u3002 \u5b83\u7528\u4e8e\u5728\u5b89\u88c5\u671f\u95f4\u63d0\u793a\u5b89\u88c5\u5b58\u50a8\u5e93\uff0c\u4ee5\u53ca\u4fee\u6539 NFS URL \u4ee5\u9002\u7528\u4e8e\u8fd9\u4e9b\u5b89\u88c5\u7a0b\u5e8f\u3002 \u5bf9\u4e8e\u8fd9\u4e9b\u6a21\u677f\u4e0d\u63d0\u4f9b ISO \u652f\u6301\u3002\n\n\n\n\n\n\nVM.other_config[\"install_distro\"] == \"sleslike\"\n\n\n\u6b64\u6a21\u677f\u9002\u7528\u4e8e SLES 10 \u548c SLES 9\u3002 \u5b83\u7528\u4e8e\u5728\u5b89\u88c5\u671f\u95f4\u63d0\u793a\u5b89\u88c5\u5b58\u50a8\u5e93\uff0c\u8fd9\u4e00\u70b9\u4e0e EL5 \u76f8\u540c\uff0c\u4f46\u5b83\u4e0d\u4fee\u6539 NFS URL\u3002 XenServer 7.0 \u4e2d\u63d0\u4f9b\u5bf9 SLES 10 \u7684 ISO \u652f\u6301\u3002\u4f7f\u7528 install-methods \u533a\u5206\u8be5\u5e73\u53f0\u4e0a\u7684 SLES 9 \u548c SLES 10\u3002\n\n\n\n\n\n\nVM.other_config[\"install-repository\"] == \"cdrom\"\n\n\n\u8bf7\u6c42\u4ece VM \u7684\u9644\u52a0 CD \u9a71\u52a8\u5668\u4e2d\u7684\u5b58\u50a8\u5e93\uff08\u800c\u4e0d\u662f URL\uff09\u5b89\u88c5\u3002\n\n\n\n\n\n\nVM.other_config[\"auto_poweron\"]\n\n\n\u83b7\u53d6\u6216\u8bbe\u7f6e\u5f15\u5bfc\u670d\u52a1\u5668\u65f6\u662f\u5426\u542f\u52a8 VM\uff0c\u201ctrue\u201d\u6216\u201cfalse\u201d\u3002\n\n\n\n\n\n\nVM.other_config[\"ignore_excessive_vcpus\"]\n\n\n\u83b7\u53d6\u6216\u8bbe\u7f6e\u5f53 VM \u6240\u5305\u542b\u7684 VCPU \u591a\u4e8e\u5176\u4e3b\u673a\u6240\u5305\u542b\u7684\u7269\u7406 CPU \u65f6\u662f\u5426\u5ffd\u7565 XenCenter \u7684\u8b66\u544a\uff0c\u8bbe\u7f6e\u4e3a true \u8868\u793a\u5ffd\u7565\u3002\n\n\n\n\n\n\nVM.other_config[\"HideFromXenCenter\"]\n\n\n\u83b7\u53d6\u6216\u8bbe\u7f6e XenCenter \u662f\u5426\u5728\u6811\u89c6\u56fe\u4e2d\u663e\u793a VM\uff0c\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u8868\u793a\u9690\u85cf\u3002\n\n\n\n\n\n\nVM.other_config[\"import_task\"]\n\n\n\u83b7\u53d6\u521b\u5efa\u6b64 VM \u7684\u5bfc\u5165\u4efb\u52a1\u3002\n\n\n\n\n\n\nVM.HVM_boot_params[\"order\"]\n\n\n\u4ec5\u83b7\u53d6\u6216\u8bbe\u7f6e HVM VM \u4e0a\u7684 VM \u5f15\u5bfc\u987a\u5e8f\uff0c\u4f8b\u5982\uff0c\u201cCDN\u201d\u5c06\u6309\u7167\u4ee5\u4e0b\u987a\u5e8f\u5f15\u5bfc\uff1a\u9996\u5148\u5f15\u5bfc\u78c1\u76d8\uff0c\u518d\u5f15\u5bfc CD \u9a71\u52a8\u5668\uff0c\u7136\u540e\u5f15\u5bfc\u7f51\u7edc\u3002\n\n\n\n\n\n\nVM.VCPU_params[\"weight\"]\n\n\n\u4e3a VM \u7684 VCPU \u83b7\u53d6\u6216\u8bbe\u7f6e IONice \u503c\uff0c\u8303\u56f4\u4e3a 1 \u5230 65536\uff0c65536 \u662f\u6700\u9ad8\u503c\u3002\n\n\n\n\n\n\nVM.pool_migrate(..., options['live'])\n\n\ntrue \u8868\u793a\u5b9e\u65f6\u8fc1\u79fb\u3002XenCenter \u59cb\u7ec8\u4f7f\u7528\u5b83\u3002\n\n\n\n\n\n\nVM.other_config[\"install-methods\"]\n\n\n\u6b64\u6a21\u677f\u4e2d\u663e\u793a\u5b89\u88c5\u65b9\u6cd5\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u53ef\u4ee5\u5305\u62ec\u201ccdrom\u201d\u3001\u201cnfs\u201d\u3001\u201chttp\u201d\u6216\u201cftp\u201d\u3002\n\n\n\n\n\n\nVM.other_config[\"last_shutdown_time\"]\n\n\n\u4e0a\u6b21\u5173\u95ed\u6216\u91cd\u65b0\u542f\u52a8\u6b64 VM \u7684\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UTC ISO8601 \u65e5\u671f\u65f6\u95f4\u3002\n\n\n\n\n\n\nVM.other_config[\"p2v_source_machine\"]\n\n\n\u901a\u8fc7 P2V \u8fc7\u7a0b\u5bfc\u5165\u6b64 VM \u6240\u7528\u7684\u6e90\u8ba1\u7b97\u673a\u3002\n\n\n\n\n\n\nVM.other_config[\"p2v_import_date\"]\n\n\n\u901a\u8fc7 P2V \u8fc7\u7a0b\u5bfc\u5165 VM \u7684\u65e5\u671f\u3002\u683c\u5f0f\u4e3a UTC ISO8601 \u65e5\u671f\u65f6\u95f4\u3002\n\n\n\n\n\n\n\n\nSR\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\nSR.other_config[\"auto-scan\"]\n\n\n\u5c06\u81ea\u52a8\u626b\u63cf SR \u4ee5\u67e5\u770b\u66f4\u6539\u3002\u5728 XenCenter \u521b\u5efa\u7684\u6240\u6709 SR \u4e0a\u8fdb\u884c\u8bbe\u7f6e\u3002\n\n\n\n\n\n\nSR.sm_config[\"type\"]\n\n\n\u8bbe\u7f6e\u7c7b\u578b\uff0c\u4f8b\u5982\u5c06\u7269\u7406 CD \u9a71\u52a8\u5668 SR \u7684\u7c7b\u578b\u8bbe\u7f6e\u4e3a cd\u3002\n\n\n\n\n\n\n\n\nVDI\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\nVDI.type\n\n\nuser\uff08\u800c\u4e0d\u662f system\uff09\u7528\u4e8e\u8868\u793a\u201c\u5982\u679c\u5c06\u6b64\u78c1\u76d8\u8fde\u63a5\u5230 VM\uff0c\u5141\u8bb8/\u4e0d\u5141\u8bb8\u901a\u8fc7 GUI \u5220\u9664 VDI\u201d\u3002 \u76ee\u7684\u662f\u9632\u6b62\u60a8\u635f\u574f VM\uff08\u60a8\u5e94\u5c06\u5176\u5378\u8f7d\uff09\u3002 suspend \u548c crashdump \u5206\u522b\u8bb0\u5f55\u6302\u8d77\u548c\u5185\u6838\u8f6c\u50a8\u3002 \u5f53\u524d\u5c1a\u672a\u4f7f\u7528 ephemeral\u3002\n\n\n\n\n\n\nVDI.managed\n\n\n\u6240\u6709\u975e\u6258\u7ba1 VDI \u90fd\u5b8c\u5168\u9690\u85cf\u5728 UI \u4e2d\u3002\u5b83\u4eec\u662f VHD \u94fe\u4e2d\u7684\u5206\u652f\u70b9\u6216\u672a\u4f7f\u7528\u7684 LUN-per-VDI \u78c1\u76d8\u3002\n\n\n\n\n\n\nVDI.sm_config[\"vmhint\"]\n\n\n\u6b64 VDI \u652f\u6301\u7684 VM \u7684 UUID\u3002\u8fd9\u662f\u5728\u901a\u8fc7\u7528\u6237\u754c\u9762\u521b\u5efa VDI \u65f6\u8bbe\u7f6e\u7684\uff0c\u76ee\u7684\u662f\u63d0\u9ad8\u67d0\u4e9b\u5b58\u50a8\u540e\u7aef\u7684\u6027\u80fd\u3002\n\n\n\n\n\n\n\n\nVBD\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\nVBD.other_config[\"is_owner\"]\n\n\n\u5982\u679c\u5df2\u8bbe\u7f6e\u8be5\u952e\uff0c\u5219\u53ef\u80fd\u5728\u5378\u8f7d VM \u65f6\u5220\u9664\u6b64\u78c1\u76d8\u3002\n\n\n\n\n\n\nVBD.other_config[\"class\"]\n\n\n\u8bbe\u7f6e\u4e3a\u4e0e ionice \u7684\u201c\u6700\u4f73\u6548\u679c\u201d\u8bbe\u7f6e\u76f8\u5bf9\u5e94\u7684\u6574\u6570\u3002\n\n\n\n\n\n\n\n\n\u7f51\u7edc\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\nnetwork.other_config[\"automatic\"]\n\n\n\u5982\u679c\u6b64\u952e\u7684\u503c\u662f false \u4ee5\u5916\u7684\u4efb\u4f55\u503c\uff0c\u65b0 VM \u5411\u5bfc\u5c06\u9ed8\u8ba4\u521b\u5efa\u8fde\u63a5\u5230\u6b64\u7f51\u7edc\u7684 VIF\u3002\n\n\n\n\n\n\nnetwork.other_config[\"import_task\"]\n\n\n\u83b7\u53d6\u521b\u5efa\u6b64\u7f51\u7edc\u7684\u5bfc\u5165\u4efb\u52a1\u3002\n\n\n\n\n\n\n\n\nVM_guest_metrics\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\nPV_drivers_version[\"major\"]\n\n\n\u83b7\u53d6 VM \u7684 PV \u9a71\u52a8\u7a0b\u5e8f\u7248\u672c\u7684\u4e3b\u8981\u7248\u672c\u53f7\u3002\n\n\n\n\n\n\nPV_drivers_version[\"minor\"]\n\n\n\u83b7\u53d6 VM \u7684 PV \u9a71\u52a8\u7a0b\u5e8f\u7248\u672c\u7684\u6b21\u8981\u7248\u672c\u53f7\u3002\n\n\n\n\n\n\nPV_drivers_version[\"micro\"]\n\n\n\u83b7\u53d6 VM \u7684 PV \u9a71\u52a8\u7a0b\u5e8f\u7248\u672c\u7684 Micro\uff08\u5185\u90e8\u7248\u672c\u53f7\uff09\u3002\n\n\n\n\n\n\n\n\n\u4efb\u52a1\n\n\n\n\n\n\n\n\n\u952e\n\n\n\u8bed\u4e49\n\n\n\n\n\n\n\n\n\n\ntask.other_config[\"object_creation\"] == \"complete\"\n\n\n\u5bf9\u4e8e\u4e0e VM \u5bfc\u5165\u76f8\u5173\u7684\u4efb\u52a1\uff0c\u5c06\u5728\u521b\u5efa\u6240\u6709\u5bf9\u8c61\uff08VM \u548c\u7f51\u7edc\uff09\u540e\u8bbe\u7f6e\u6b64\u6807\u5fd7\u3002 \u5728\u5bfc\u5165 VM \u5411\u5bfc\u4e2d\uff0c\u8fd9\u5bf9\u4e8e\u6211\u4eec\u968f\u540e\u7ee7\u7eed\u64cd\u4f5c\u5e76\u91cd\u65b0\u6620\u5c04\u6240\u6709\u9700\u8981\u5b83\u7684\u7f51\u7edc\u5f88\u6709\u7528\u3002", 
            "title": "Index"
        }, 
        {
            "location": "/#citrix-xenserver-70", 
            "text": "", 
            "title": "Citrix XenServer 7.0 \u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305"
        }, 
        {
            "location": "/#_1", 
            "text": "\u6b22\u8fce\u4f7f\u7528 XenServer \u5f00\u53d1\u4eba\u5458\u6307\u5357\u3002 \u672c\u6307\u5357\u4e3a\u60a8\u63d0\u4f9b\u4e86\u89e3\u548c\u4f7f\u7528 XenServer \u63d0\u4f9b\u7684\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305 (SDK) \u6240\u9700\u7684\u4fe1\u606f\u3002 \u8fd9\u4e9b\u4fe1\u606f\u63d0\u4f9b\u4e86\u4e00\u4e9b\u67b6\u6784\u6027\u80cc\u666f\u548c\u601d\u8def\uff0c\u6709\u52a9\u4e8e\u60a8\u4e86\u89e3 API\u3001\u5df2\u63d0\u4f9b\u7684\u5de5\u5177\u4ee5\u53ca\u5982\u4f55\u5feb\u901f\u5165\u95e8\u3002", 
            "title": "\u7b80\u4ecb"
        }, 
        {
            "location": "/#_2", 
            "text": "XenServer \u5305\u542b\u4e00\u4e2a\u57fa\u4e8e XML-RPC \u7684 API\uff0c\u53ef\u901a\u8fc7\u6b64 API \u4ee5\u7f16\u7a0b\u65b9\u5f0f\u8bbf\u95ee\u4e00\u7ec4\u6570\u91cf\u5e9e\u5927\u7684 XenServer \u7ba1\u7406\u529f\u80fd\u548c\u5de5\u5177\u3002 XenServer API \u53ef\u4ee5\u4ece\u8fdc\u7a0b\u7cfb\u7edf\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u4ece XenServer \u4e3b\u673a\u672c\u5730\u8c03\u7528\u3002 \u867d\u7136\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u539f\u59cb XML-RPC \u8c03\u7528\u7f16\u5199\u4f7f\u7528 XenServer \u7ba1\u7406 API \u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f46\u901a\u8fc7\u4f7f\u7528\u8bed\u8a00\u7ed1\u5b9a\u5c06\u5404 API \u8c03\u7528\u5448\u73b0\u4e3a\u76ee\u6807\u8bed\u8a00\u4e2d\u7684\u7b2c\u4e00\u7c7b\u51fd\u6570\uff0c\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u7b2c\u4e09\u65b9\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u5de5\u4f5c\u3002 XenServer SDK \u63d0\u4f9b C\u3001C#\u3001Java\u3001Python \u548c PowerShell \u7f16\u7a0b\u8bed\u8a00\u7684\u8bed\u8a00\u7ed1\u5b9a\u548c\u793a\u4f8b\u4ee3\u7801\u3002", 
            "title": "\u5165\u95e8"
        }, 
        {
            "location": "/#_3", 
            "text": "\u8981\u4f7f\u7528 SDK\uff0c\u9996\u5148\u9700\u8981\u5b89\u88c5 XenServer\u3002 \u53ef\u4ece http://www.citrix.com/downloads/xenserver/ \u4e0b\u8f7d\u514d\u8d39\u7248\u7684 Citrix XenServer\u3002 \u6709\u5173\u5982\u4f55\u8bbe\u7f6e\u5f00\u53d1\u4e3b\u673a\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\u300aXenServer \u5b89\u88c5\u6307\u5357\u300b\u3002 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u8bf7\u8bb0\u4e0b\u4e3b\u673a IP \u5730\u5740\u548c\u4e3b\u673a\u5bc6\u7801\u3002", 
            "title": "\u7cfb\u7edf\u8981\u6c42\u548c\u51c6\u5907\u5de5\u4f5c"
        }, 
        {
            "location": "/#_4", 
            "text": "SDK \u6253\u5305\u4e3a\u4e00\u4e2a ZIP \u6587\u4ef6\uff0c\u53ef\u4ece http://www.citrix.com/downloads/xenserver/ \u514d\u8d39\u4e0b\u8f7d\u3002", 
            "title": "\u4e0b\u8f7d"
        }, 
        {
            "location": "/#_5", 
            "text": "SDK ZIP \u6587\u4ef6\u7684\u63d0\u53d6\u5185\u5bb9\u4f4d\u4e8e XenServer-SDK \u76ee\u5f55\u4e2d\u3002 \u4e0b\u9762\u7b80\u8981\u6982\u8ff0\u5176\u7ed3\u6784\u3002 \u5fc5\u8981\u65f6\uff0c\u5b50\u76ee\u5f55\u6709\u81ea\u5df1\u5355\u72ec\u7684\u81ea\u8ff0\u6587\u4ef6\u3002 \u5e94\u5f53\u6ce8\u610f\u7684\u662f\uff0c\u63d0\u4f9b\u7684\u793a\u4f8b\u5728\u6240\u6709\u8bed\u8a00\u7ed1\u5b9a\u4e4b\u95f4\u4e0d\u5c3d\u76f8\u540c\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u60f3\u4f7f\u7528\u4e00\u4e2a\u7ed1\u5b9a\uff0c\u5efa\u8bae\u8fd8\u8981\u6d4f\u89c8\u5176\u4ed6\u7ed1\u5b9a\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u3002   XenServer-SDK\u3002   libxenserver\u3002\u9002\u7528\u4e8e C \u7684 XenServer SDK\u3002   bin\u3002libxenserver \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002  src\u3002libxenserver \u6e90\u4ee3\u7801\u548c\u793a\u4f8b\u4ee5\u53ca\u7528\u4e8e\u6784\u5efa\u5b83\u4eec\u7684 Makefile\u3002    XenServer.NET\u3002\u9002\u7528\u4e8e C#.NET \u7684 XenServer SDK\u3002   bin\u3002XenServer.NET \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002  samples\u3002XenServer.NET \u793a\u4f8b\u3002  src\u3002XenServer.NET \u6e90\u4ee3\u7801\u3002    XenServerJava\u3002\u9002\u7528\u4e8e Java \u7684 XenServer SDK\u3002   bin\u3002Java \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002  javadoc\u3002Java \u6587\u6863\u3002  samples\u3002Java \u793a\u4f8b\u3002  src\u3002Java \u6e90\u4ee3\u7801\u4ee5\u53ca\u7528\u4e8e\u6784\u5efa\u4ee3\u7801\u548c\u793a\u4f8b\u7684 Makefile\u3002    XenServerPowerShell\u3002\u9002\u7528\u4e8e PowerShell \u7684 XenServer SDK\u3002   XenServerPSModule\u3002XenServer PowerShell \u6a21\u5757\u3002  samples\u3002PowerShell \u793a\u4f8b\u811a\u672c\u3002  src\u3002XenServer PowerShell \u6e90\u4ee3\u7801\u3002    XenServerPython\u3002\u6b64\u76ee\u5f55\u5305\u542b XenServer Python \u6a21\u5757 XenAPI.py\u3002\u5e93 provision.py \u7531\u793a\u4f8b\u4f7f\u7528\u3002   samples\u3002\u4f7f\u7528 Python \u7684 XenServer API \u793a\u4f8b\u3002", 
            "title": "\u5185\u5bb9\u56fe"
        }, 
        {
            "location": "/#xenserver-api", 
            "text": "\u672c\u7ae0\u5c06\u4ecb\u7ecd XenServer API\uff08\u4ee5\u4e0b\u7b80\u79f0\u201cAPI\u201d\uff09\u53ca\u5176\u76f8\u5173\u7684\u5bf9\u8c61\u6a21\u578b\u3002\u8be5 API \u5177\u6709\u4ee5\u4e0b\u4e3b\u8981\u529f\u80fd\uff1a    \u7ba1\u7406 XenServer \u4e3b\u673a\u7684\u6240\u6709\u65b9\u9762\u3002\u4f7f\u7528\u8be5 API \u53ef\u4ee5\u7ba1\u7406 VM\u3001\u5b58\u50a8\u3001\u7f51\u7edc\u8fde\u63a5\u3001\u4e3b\u673a\u914d\u7f6e\u548c\u6c60\u3002\u8fd8\u53ef\u4ee5\u4ece\u8be5 API \u67e5\u8be2\u6027\u80fd\u548c\u72b6\u6001\u6307\u6807\u3002    \u6301\u4e45\u6027\u5bf9\u8c61\u6a21\u578b\u3002 \u6240\u6709\u4f1a\u4ea7\u751f\u5176\u4ed6\u5f71\u54cd\u7684\u64cd\u4f5c\uff08\u4f8b\u5982\uff0c\u521b\u5efa\u5bf9\u8c61\u3001\u5220\u9664\u5bf9\u8c61\u548c\u4fee\u6539\u53c2\u6570\uff09\u7684\u7ed3\u679c\u90fd\u5c06\u6c38\u4e45\u4fdd\u7559\u5728\u7531 XenServer \u5b89\u88c5\u7ba1\u7406\u7684\u670d\u52a1\u5668\u7aef\u6570\u636e\u5e93\u4e2d\u3002    \u4e8b\u4ef6\u673a\u5236\u3002 \u901a\u8fc7\u8be5 API\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u8fdb\u884c\u6ce8\u518c\uff0c\u4ee5\u5728\u6301\u4e45\u6027\uff08\u670d\u52a1\u5668\u7aef\uff09\u5bf9\u8c61\u88ab\u4fee\u6539\u65f6\u6536\u5230\u901a\u77e5\u3002 \u8fd9\u53ef\u4f7f\u5e94\u7528\u7a0b\u5e8f\u8ddf\u8e2a\u7531\u6b63\u5728\u540c\u65f6\u6267\u884c\u7684\u5ba2\u6237\u7aef\u5bf9\u6570\u636e\u6a21\u578b\u8fdb\u884c\u7684\u4fee\u6539\u3002    \u540c\u6b65\u548c\u5f02\u6b65\u8c03\u7528\u3002 \u53ef\u4ee5\u540c\u6b65\u8c03\u7528\u6240\u6709 API \u8c03\u7528\uff08\u76f4\u5230\u5b8c\u6210\u624d\u4e2d\u65ad\uff09\uff1b\u4e5f\u53ef\u4ee5\u5f02\u6b65\u8c03\u7528\u53ef\u80fd\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u4f55 API \u8c03\u7528\u3002 \u5f02\u6b65\u8c03\u7528\u4f1a\u7acb\u5373\u8fd4\u56de\u5bf9\u4efb\u52a1\u5bf9\u8c61\u7684\u5f15\u7528\u3002 \u53ef\u4ee5\uff08\u901a\u8fc7\u8be5 API\uff09\u67e5\u8be2\u6b64\u4efb\u52a1\u5bf9\u8c61\u7684\u8fdb\u7a0b\u548c\u72b6\u6001\u4fe1\u606f\u3002 \u5f02\u6b65\u8c03\u7528\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u53ef\u4ece\u4efb\u52a1\u5bf9\u8c61\u83b7\u5f97\u7ed3\u679c\uff08\u6216\u9519\u8bef\u4ee3\u7801\uff09\u3002    \u53ef\u8fdc\u7a0b\u548c\u8de8\u5e73\u53f0\u8bbf\u95ee\u3002 \u53d1\u51fa API \u8c03\u7528\u7684\u5ba2\u6237\u7aef\u4e0d\u5fc5\u4f4d\u4e8e\u8981\u7ba1\u7406\u7684\u4e3b\u673a\u4e0a\uff1b\u4e5f\u4e0d\u5fc5\u901a\u8fc7 ssh \u8fde\u63a5\u5230\u4e3b\u673a\u6765\u6267\u884c\u8be5 API\u3002 API \u8c03\u7528\u4f7f\u7528 XML-RPC \u534f\u8bae\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u8bf7\u6c42\u548c\u54cd\u5e94\u3002    \u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u5b89\u5168\u8bbf\u95ee\u3002 \u5728\u4e3b\u673a\u4e0a\u6267\u884c\u7684 XML-RPC API \u670d\u52a1\u5668\u63a5\u53d7\u5b89\u5168\u5957\u63a5\u5b57\u8fde\u63a5\u3002 \u8fd9\u6837\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u91c7\u7528 http \u534f\u8bae\u6267\u884c API\u3002 \u6b64\u5916\uff0c\u6240\u6709 API \u8c03\u7528\u90fd\u5728\u767b\u5f55\u4f1a\u8bdd\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c\uff0c\u767b\u5f55\u4f1a\u8bdd\u662f\u901a\u8fc7\u5728\u670d\u52a1\u5668\u7aef\u8fdb\u884c\u7528\u6237\u540d\u548c\u5bc6\u7801\u9a8c\u8bc1\u751f\u6210\u7684\u3002 \u8fd9\u6837\u4fbf\u53ef\u4ee5\u5bf9 XenServer \u5b89\u88c5\u8fdb\u884c\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u5b89\u5168\u8bbf\u95ee\u3002", 
            "title": "XenServer API \u6982\u8ff0"
        }, 
        {
            "location": "/#api", 
            "text": "\u5728\u8be5 API \u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u4ecb\u7ecd\u5728 XenServer \u5b89\u88c5\u4e2d\u521b\u5efa\u65b0 VM \u6240\u9700\u7684\u8c03\u7528\uff0c\u7136\u540e\u6267\u884c\u542f\u52a8/\u6302\u8d77/\u6062\u590d/\u505c\u6b62\u5468\u671f\u64cd\u4f5c\u3002 \u65e0\u9700\u5f15\u7528\u4efb\u4f55\u7279\u5b9a\u8bed\u8a00\u7684\u4ee3\u7801\u5373\u53ef\u5b8c\u6210\u6b64\u4efb\u52a1\uff1b\u5728\u6b64\u9636\u6bb5\uff0c\u6211\u4eec\u4ec5\u4ecb\u7ecd\u5b8c\u6210\u201c\u5b89\u88c5\u5e76\u542f\u52a8\u201d\u4efb\u52a1\u7684 RPC \u8c03\u7528\u7684\u975e\u6b63\u5f0f\u5e8f\u5217\u3002   \u6ce8\u610f   \u5f3a\u70c8\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528 Vm.create \u8c03\u7528\uff0c\u8be5\u8c03\u7528\u5728\u5c06\u6765\u7684 API \u7248\u672c\u4e2d\u53ef\u80fd\u4f1a\u88ab\u5220\u9664\u6216\u66f4\u6539\u3002\u8bf7\u7ee7\u7eed\u9605\u8bfb\u4ee5\u4e86\u89e3\u751f\u6210\u65b0 VM \u7684\u5176\u4ed6\u65b9\u5f0f\u3002", 
            "title": "API \u5165\u95e8"
        }, 
        {
            "location": "/#_6", 
            "text": "\u7b2c\u4e00\u6b65\u662f\u8c03\u7528  Session.login_with_password( username ,  password ,  client_API_version ,  originator ) \u3002 \u6b64 API \u662f\u57fa\u4e8e\u4f1a\u8bdd\u7684\uff0c\u56e0\u6b64\uff0c\u5728\u6267\u884c\u5176\u4ed6\u8c03\u7528\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5411\u670d\u52a1\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u5982\u679c\u7528\u6237\u540d\u548c\u5bc6\u7801\u6b63\u786e\u901a\u8fc7\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u6b64\u8c03\u7528\u7684\u7ed3\u679c\u4e3a\u4e00\u4e2a\u4f1a\u8bdd\u5f15\u7528\u3002 \u540e\u7eed API \u8c03\u7528\u4f7f\u7528\u8be5\u4f1a\u8bdd\u5f15\u7528\u4f5c\u4e3a\u53c2\u6570\u3002 \u901a\u8fc7\u6b64\u65b9\u5f0f\u786e\u4fdd\u53ea\u6709\u9002\u5f53\u83b7\u5f97\u6388\u6743\u7684 API \u7528\u6237\u624d\u53ef\u4ee5\u5728 XenServer \u5b89\u88c5\u4e2d\u6267\u884c\u64cd\u4f5c\u3002 \u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\u540c\u4e00\u4f1a\u8bdd\u6267\u884c\u4efb\u4f55\u6570\u91cf\u7684 API \u8c03\u7528\u3002 \u5b8c\u6210\u8be5\u4f1a\u8bdd\u540e\uff0cCitrix \u5efa\u8bae\u60a8\u8c03\u7528  Session.logout(session)  \u8fdb\u884c\u6e05\u7406\uff1a\u8bf7\u53c2\u9605\u4e0b\u6587\u3002", 
            "title": "\u8eab\u4efd\u9a8c\u8bc1\uff1a\u83b7\u5f97\u4f1a\u8bdd\u5f15\u7528"
        }, 
        {
            "location": "/#vm", 
            "text": "\u7b2c\u4e8c\u6b65\u662f\u67e5\u8be2\u4e3b\u673a\u4e0a\u7684\u201c\u6a21\u677f\u201d\u5217\u8868\u3002 \u6a21\u677f\u662f\u5177\u6709\u7279\u6b8a\u6807\u8bb0\u7684 VM \u5bf9\u8c61\uff0c\u7528\u4e8e\u4e3a\u5404\u79cd\u53d7\u652f\u6301\u7684\u6765\u5bbe\u7cfb\u7edf\u7c7b\u578b\u6307\u5b9a\u9002\u5f53\u7684\u9ed8\u8ba4\u53c2\u6570\u3002 \uff08\u5982\u679c\u60a8\u5e0c\u671b\u7cfb\u7edf\u5728 XenServer \u5b89\u88c5\u671f\u95f4\u5feb\u901f\u679a\u4e3e\u6a21\u677f\uff0c\u53ef\u4ee5\u6267\u884c xe template-list CLI \u547d\u4ee4\u3002\uff09\u8981\u901a\u8fc7\u8be5 API \u83b7\u53d6\u6a21\u677f\u5217\u8868\uff0c\u9700\u8981\u67e5\u627e\u670d\u52a1\u5668\u4e0a is_a_template \u5b57\u6bb5\u8bbe\u7f6e\u4e3a true \u7684 VM \u5bf9\u8c61\u3002 \u6267\u884c\u6b64\u64cd\u4f5c\u7684\u4e00\u79cd\u65b9\u5f0f\u662f\u8c03\u7528 VM.get_all_records(session)\uff0c\u5176\u4e2d\u4f1a\u8bdd\u53c2\u6570\u662f\u5148\u524d\u4ece Session.login_with_password \u8c03\u7528\u4e2d\u83b7\u5f97\u7684\u5f15\u7528\u3002 \u6b64\u8c03\u7528\u5c06\u67e5\u8be2\u670d\u52a1\u5668\uff0c\u8fd4\u56de\u5305\u542b\u6240\u6709 VM \u5bf9\u8c61\u5f15\u7528\u53ca\u5176\u5b57\u6bb5\u503c\u7684\u5feb\u7167\uff08\u5728\u8c03\u7528\u65f6\u521b\u5efa\uff09\u3002  \uff08\u8bf7\u8bb0\u4f4f\uff0c\u5728\u6b64\u9636\u6bb5\uff0c\u6211\u4eec\u4e0d\u5173\u6ce8\u53ef\u901a\u8fc7\u4efb\u4f55\u7279\u5b9a\u5ba2\u6237\u7aef\u8bed\u8a00\u5904\u7406\u8fd4\u56de\u7684\u5bf9\u8c61\u5f15\u7528\u548c\u5b57\u6bb5\u503c\u7684\u7279\u6b8a\u673a\u5236\uff1a\u8be5\u7ec6\u8282\u901a\u8fc7\u7279\u5b9a\u4e8e\u8bed\u8a00\u7684 API \u7ed1\u5b9a\u8fdb\u884c\u5904\u7406\uff0c\u5c06\u5728\u540e\u9762\u7684\u7ae0\u8282\u4e2d\u5177\u4f53\u4ecb\u7ecd\u3002 \u73b0\u5728\u53ea\u9700\u5047\u5b9a\u5b58\u5728\u4e00\u4e2a\u62bd\u8c61\u673a\u5236\uff0c\u7528\u4e8e\u8bfb\u53d6\u548c\u5904\u7406\u7531 API \u8c03\u7528\u8fd4\u56de\u7684\u5bf9\u8c61\u548c\u5b57\u6bb5\u503c\u3002\uff09  \u6211\u4eec\u5df2\u5c06\u6240\u6709 VM \u5bf9\u8c61\u7684\u5b57\u6bb5\u503c\u7684\u5feb\u7167\u5b58\u5165\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u7684\u5185\u5b58\uff0c\u73b0\u5728\u6211\u4eec\u53ea\u9700\u8fed\u4ee3\u8fd9\u4e9b\u5bf9\u8c61\uff0c\u5e76\u67e5\u627e is_a_template \u8bbe\u7f6e\u4e3a true \u7684\u90a3\u4e9b\u5bf9\u8c61\u3002 \u5728\u6b64\u9636\u6bb5\uff0c\u6211\u4eec\u5047\u5b9a\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u5c06\u8fdb\u4e00\u6b65\u8fed\u4ee3\u6d4f\u89c8\u6a21\u677f\u5bf9\u8c61\uff0c\u5e76\u8bb0\u4f4f\u201cname_label\u201d\u8bbe\u7f6e\u4e3a\u201cDebian Etch 4.0\u201d\uff08XenServer \u63d0\u4f9b\u7684\u9ed8\u8ba4 Linux \u6a21\u677f\u4e4b\u4e00\uff09\u7684\u5bf9\u8c61\u6240\u5bf9\u5e94\u7684\u5f15\u7528\u3002", 
            "title": "\u83b7\u53d6\u4f5c\u4e3a\u65b0 VM \u5b89\u88c5\u57fa\u7840\u7684\u6a21\u677f\u5217\u8868"
        }, 
        {
            "location": "/#vm_1", 
            "text": "\u7ee7\u7eed\u6211\u4eec\u7684\u793a\u4f8b\u3002\u73b0\u5728\uff0c\u5fc5\u987b\u57fa\u4e8e\u6240\u9009\u6a21\u677f\u5b89\u88c5\u65b0\u7684 VM\u3002\u5b89\u88c5\u8fc7\u7a0b\u8981\u6c42\u4f7f\u7528 2 \u4e2a API \u8c03\u7528\uff1a    \u9996\u5148\uff0c\u6211\u4eec\u73b0\u5728\u5fc5\u987b\u8c03\u7528 API \u8c03\u7528 VM.clone(session, t_ref, \u201cmy first VM\u201d)\u3002 \u8fd9\u5c06\u901a\u77e5\u670d\u52a1\u5668\u514b\u9686 t_ref \u5f15\u7528\u7684 VM \u5bf9\u8c61\uff0c\u4ee5\u751f\u6210\u65b0\u7684 VM \u5bf9\u8c61\u3002 \u6b64\u8c03\u7528\u5c06\u8fd4\u56de\u4e0e\u65b0\u521b\u5efa\u7684 VM \u5bf9\u5e94\u7684 VM \u5f15\u7528\u3002 \u6211\u4eec\u79f0\u5176\u4e3a new_vm_ref\u3002    \u5728\u6b64\u9636\u6bb5\uff0cnew_vm_ref \u5f15\u7528\u7684\u5bf9\u8c61\u4ecd\u7136\u662f\u6a21\u677f\uff08\u6b63\u5982 t_ref \u5f15\u7528\u7684 VM \u5bf9\u8c61\uff0c\u5df2\u4ece\u5176\u514b\u9686\u4e86 VM \u5bf9\u8c61\uff09\u3002 \u8981\u4f7f new_vm_ref \u6210\u4e3a VM \u5bf9\u8c61\uff0c\u9700\u8981\u8c03\u7528 VM.provision(session, new_vm_ref)\u3002 \u5f53\u6b64\u8c03\u7528\u8fd4\u56de\u7ed3\u679c\u540e\uff0cnew_vm_ref \u5bf9\u8c61\u7684 is_a_template \u5b57\u6bb5\u4f1a\u8bbe\u7f6e\u4e3a false\uff0c\u8bf4\u660e new_vm_ref \u73b0\u5728\u5f15\u7528\u4e00\u4e2a\u53ef\u4ee5\u542f\u52a8\u7684\u5e38\u89c4 VM\u3002     \u6ce8\u610f   \u7f6e\u5907\u64cd\u4f5c\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728\u6b64\u8c03\u7528\u671f\u95f4\uff0c\u9700\u8981\u521b\u5efa\u6a21\u677f\u7684\u78c1\u76d8\u6620\u50cf\u3002 \u5982\u679c\u4f7f\u7528\u7684\u662f Debian \u6a21\u677f\uff0c\u5219\u5728\u6b64\u9636\u6bb5\uff0c\u8fd8\u5c06\u4f7f\u7528 Debian \u6839\u6587\u4ef6\u7cfb\u7edf\u586b\u5145\u65b0\u521b\u5efa\u7684\u78c1\u76d8\u3002", 
            "title": "\u57fa\u4e8e\u6a21\u677f\u5b89\u88c5 VM"
        }, 
        {
            "location": "/#vm_2", 
            "text": "\u73b0\u5728\u6211\u4eec\u6709\u4e86\u8868\u793a\u65b0\u521b\u5efa\u7684 VM \u7684\u5bf9\u8c61\u5f15\u7528\u3002\u63a5\u4e0b\u6765\u5bf9\u5b83\u6267\u884c\u4e00\u4e9b\u751f\u547d\u5468\u671f\u64cd\u4f5c\u5c31\u5f88\u7b80\u5355\u4e86\uff1a    \u8981\u542f\u52a8 VM\uff0c\u53ea\u9700\u8c03\u7528 VM.start(session, new_vm_ref)\u3002    VM \u8fd0\u884c\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 VM.suspend(session, new_vm_ref) \u5c06\u5176\u6302\u8d77\uff0c    \u7136\u540e\u901a\u8fc7\u8c03\u7528 VM.resume(session, new_vm_ref) \u5c06\u5176\u6062\u590d\u3002    \u8c03\u7528 VM.shutdown(session, new_vm_ref) \u53ef\u5f7b\u5e95\u5173\u95ed\u8be5 VM\u3002", 
            "title": "\u5bf9 VM \u6267\u884c\u542f\u52a8/\u6302\u8d77/\u6062\u590d/\u505c\u6b62\u5468\u671f\u64cd\u4f5c"
        }, 
        {
            "location": "/#_7", 
            "text": "\u5f53\u5e94\u7528\u7a0b\u5e8f\u5b8c\u6210\u4e0e XenServer \u4e3b\u673a\u7684\u4ea4\u4e92\u540e\uff0c\u6700\u597d\u8c03\u7528 Session.logout(session)\u3002 \u8fd9\u5c06\u4f7f\u4f1a\u8bdd\u5f15\u7528\u65e0\u6548\uff08\u56e0\u6b64\uff0c\u8be5\u4f1a\u8bdd\u5f15\u7528\u65e0\u6cd5\u7528\u4e8e\u540e\u7eed API \u8c03\u7528\uff09\uff0c\u540c\u65f6\u4f1a\u91ca\u653e\u7528\u4e8e\u5b58\u50a8\u4f1a\u8bdd\u5bf9\u8c61\u7684\u670d\u52a1\u5668\u7aef\u5185\u5b58\u3002  \u867d\u7136\u975e\u6d3b\u52a8\u4f1a\u8bdd\u6700\u7ec8\u4f1a\u8d85\u65f6\uff0c\u4f46\u670d\u52a1\u5668\u4ecd\u7136\u5177\u6709\u6bcf\u4e2a username \u6216 originator \u6700\u591a 500 \u4e2a\u5e76\u53d1\u4f1a\u8bdd\u7684\u786c\u7f16\u7801\u9650\u5236\u3002 \u8fbe\u5230\u6b64\u9650\u5236\u540e\uff0c\u65b0\u7684\u767b\u5f55\u5c06\u6536\u56de\u6700\u65e9\u4f7f\u7528\u7684\u4f1a\u8bdd\u5bf9\u8c61\uff0c\u4ece\u800c\u5bfc\u81f4\u8fd9\u4e9b\u5bf9\u8c61\u7684\u76f8\u5173\u4f1a\u8bdd\u5f15\u7528\u5931\u6548\u3002 \u4e3a\u4e86\u80fd\u591f\u4e0e\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u6210\u529f\u5b9e\u73b0\u4e92\u64cd\u4f5c\uff0c\u4ece\u800c\u53ef\u4ee5\u5e76\u53d1\u8bbf\u95ee\u670d\u52a1\u5668\uff0c\u6700\u4f73\u7b56\u7565\u662f\uff1a    \u9009\u62e9\u4e00\u4e2a\u53ef\u4ee5\u6807\u8bc6\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u7248\u672c\u7684\u5b57\u7b26\u4e32\u3002    \u5728\u5f00\u59cb\u65e5\u671f\u521b\u5efa\u5355\u4e00\u4f1a\u8bdd\uff0c\u5c06\u6b64\u6807\u8bc6\u5b57\u7b26\u4e32\u7528\u4e8e Session.login_with_password \u7684 originator \u53c2\u6570\u3002    \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u6b64\u4f1a\u8bdd\uff08\u8bf7\u6ce8\u610f\uff0c\u53ef\u4ee5\u8de8\u591a\u4e2a\u72ec\u7acb\u7684\u5ba2\u6237\u7aef\u670d\u52a1\u5668\u7f51\u7edc\u8fde\u63a5\u4f7f\u7528\u6b64\u4f1a\u8bdd\uff09\uff0c\u7136\u540e\u5728\u5fc5\u8981\u65f6\u663e\u5f0f\u6ce8\u9500\u3002    \u5982\u679c\u7f16\u5199\u62d9\u52a3\u7684\u5ba2\u6237\u7aef\u6cc4\u6f0f\u4f1a\u8bdd\u6216\u8005\u8d85\u51fa\u9650\u5236\uff0c\u53ea\u8981\u8be5\u5ba2\u6237\u7aef\u4f7f\u7528\u76f8\u5e94\u7684 originator \u53c2\u6570\uff0c\u5b83\u5c31\u53ef\u4ee5\u4ece XenServer \u65e5\u5fd7\u8f7b\u677e\u8bc6\u522b\uff0c\u800c\u4e14 XenServer \u4ec5\u9500\u6bc1\u975e\u6cd5\u5ba2\u6237\u7aef\u7684\u95f2\u7f6e\u65f6\u95f4\u6700\u957f\u7684\u4f1a\u8bdd\uff1b\u8fd9\u53ef\u80fd\u4f1a\u7ed9\u8be5\u5ba2\u6237\u7aef\u5e26\u6765\u95ee\u9898\uff0c\u4f46\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u5ba2\u6237\u7aef\u3002 \u5982\u679c\u884c\u4e3a\u4e0d\u5f53\u7684\u5ba2\u6237\u7aef\u672a\u6307\u5b9a originator\uff0c\u5b83\u5c06\u8f83\u96be\u8bc6\u522b\uff0c\u56e0\u6b64\u4f1a\u5bfc\u81f4\u4efb\u4f55\u672a\u6307\u5b9a originator \u7684\u5ba2\u6237\u7aef\u7684\u4f1a\u8bdd\u88ab\u8fc7\u65e9\u9500\u6bc1\u3002", 
            "title": "\u6ce8\u9500"
        }, 
        {
            "location": "/#_8", 
            "text": "\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u8be5 API \u57fa\u4e8e XenServer \u6a21\u677f\u5b89\u88c5 VM \u5e76\u5bf9\u5b83\u6267\u884c\u4e00\u7cfb\u5217\u7684\u751f\u547d\u5468\u671f\u64cd\u4f5c\u3002 \u60a8\u4f1a\u6ce8\u610f\u5230\uff0c\u6211\u4eec\u4e3a\u5f71\u54cd\u8fd9\u4e9b\u64cd\u4f5c\u800c\u5fc5\u987b\u6267\u884c\u7684\u8c03\u7528\u6570\u5f88\u5c11\uff1a    \u4e00\u4e2a\u8c03\u7528\u7528\u4e8e\u83b7\u53d6\u4f1a\u8bdd\uff1aSession.login_with_password()    \u4e00\u4e2a\u8c03\u7528\u7528\u4e8e\u67e5\u8be2\u5728 XenServer \u5b89\u88c5\u671f\u95f4\u663e\u793a\u7684 VM\uff08\u548c\u6a21\u677f\uff09\u5bf9\u8c61\uff1aVM.get_all_records()\u3002 \u8bf7\u56de\u5fc6\u4e00\u4e0b\uff0c\u6211\u4eec\u66fe\u4f7f\u7528\u8be5\u8c03\u7528\u6240\u8fd4\u56de\u7684\u4fe1\u606f\u9009\u62e9\u4e86\u4e00\u4e2a\u5408\u9002\u7684\u6a21\u677f\u6765\u57fa\u4e8e\u5b83\u8fdb\u884c\u5b89\u88c5\u3002    \u4e24\u4e2a\u8c03\u7528\u7528\u4e8e\u57fa\u4e8e\u6240\u9009\u6a21\u677f\u5b89\u88c5 VM\uff1aVM.clone()\uff0c\u540e\u8ddf VM.provision()\u3002    \u4e00\u4e2a\u8c03\u7528\u7528\u4e8e\u542f\u52a8\u751f\u6210\u7684 VM\uff1aVM.start()\uff08\u4ee5\u53ca\u4e0e\u4e4b\u7c7b\u4f3c\u7684\u5206\u522b\u7528\u4e8e\u6302\u8d77\u3001\u6062\u590d\u548c\u5173\u95ed VM \u7684\u5176\u4ed6\u5355\u4e2a\u8c03\u7528\uff09    \u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u8c03\u7528\u7528\u4e8e\u6ce8\u9500\uff1aSession.logout()    \u6b64\u5904\u7684\u8981\u70b9\u662f\uff0c\u867d\u7136\u6574\u4e2a API \u529f\u80fd\u9f50\u5168\u4e14\u590d\u6742\uff0c\u4f46\u5e38\u89c1\u4efb\u52a1\uff08\u4f8b\u5982\uff0c\u9488\u5bf9 VM \u7684\u521b\u5efa\u548c\u6267\u884c\u751f\u547d\u5468\u671f\u64cd\u4f5c\uff09\u5f88\u5bb9\u6613\u6267\u884c\uff0c\u53ea\u9700\u5c11\u91cf\u7684\u7b80\u5355 API \u8c03\u7528\u3002 \u5b66\u4e60\u4e0b\u4e00\u8282\uff0c\u521d\u8bfb\u65f6\u60a8\u53ef\u80fd\u4f1a\u611f\u5230\u6709\u4e9b\u56f0\u96be\uff0c\u4f46\u8bf7\u8bb0\u4f4f\u8fd9\u4e00\u70b9\u3002", 
            "title": "\u5b89\u88c5\u548c\u542f\u52a8\u793a\u4f8b\uff1a\u6458\u8981"
        }, 
        {
            "location": "/#_9", 
            "text": "\u672c\u8282\u7c97\u7565\u6982\u8ff0\u4e86 API \u7684\u5bf9\u8c61\u6a21\u578b\u3002 \u300aXenServer API \u53c2\u8003\u300b\u6587\u6863\u4e2d\u6bd4\u8f83\u8be6\u7ec6\u5730\u4ecb\u7ecd\u4e86\u6b64\u5904\u6240\u8ff0\u6bcf\u4e2a\u7c7b\u7684\u53c2\u6570\u548c\u65b9\u6cd5\u3002  \u9996\u5148\u7b80\u8981\u6982\u62ec\u4e00\u4e0b\u7ec4\u6210\u8be5 API \u7684\u4e00\u4e9b\u6838\u5fc3\u7c7b\u3002 \uff08\u5982\u679c\u8fd9\u4e9b\u5b9a\u4e49\u521d\u770b\u8d77\u6765\u6709\u4e9b\u62bd\u8c61\uff0c\u8bf7\u4e0d\u8981\u62c5\u5fc3\uff1b\u540e\u9762\u6709\u6bd4\u8f83\u8be6\u5c3d\u7684\u6587\u5b57\u8bf4\u660e\uff0c\u4e0b\u4e00\u7ae0\u4e2d\u8be6\u7ec6\u6f14\u793a\u7684\u4ee3\u7801\u793a\u4f8b\u4e5f\u5c06\u6709\u52a9\u4e8e\u4f7f\u8fd9\u4e9b\u6982\u5ff5\u5177\u4f53\u5316\u3002\uff09           VM  VM \u5bf9\u8c61\u8868\u793a XenServer \u4e3b\u673a\u6216\u8d44\u6e90\u6c60\u4e0a\u7684\u7279\u5b9a\u865a\u62df\u673a\u5b9e\u4f8b\u3002 \u793a\u4f8b\u65b9\u6cd5\u5305\u62ec start\u3001suspend\u3001pool_migrate\uff1b\u793a\u4f8b\u53c2\u6570\u5305\u62ec power_state\u3001memory_static_max \u548c name_label\u3002 \uff08\u5728\u4e0a\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u5df2\u4e86\u89e3\u4e86\u5982\u4f55\u4f7f\u7528 VM \u7c7b\u6765\u8868\u793a\u6a21\u677f\u548c\u5e38\u89c4 VM\u3002\uff09    Host  \u4e3b\u673a\u5bf9\u8c61\u8868\u793a XenServer \u6c60\u4e2d\u7684\u7269\u7406\u4e3b\u673a\u3002\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec reboot \u548c shutdown\u3002\u793a\u4f8b\u53c2\u6570\u5305\u62ec software_version\u3001hostname \u548c [IP] address\u3002    VDI  VDI \u5bf9\u8c61\u8868\u793a\u865a\u62df\u78c1\u76d8\u6620\u50cf\u3002 \u53ef\u4ee5\u5c06\u865a\u62df\u78c1\u76d8\u6620\u50cf\u8fde\u63a5\u5230 VM\uff0c\u8fd9\u6837\uff0c\u5c06\u5728 VM \u5185\u90e8\u663e\u793a\u5757\u8bbe\u5907\uff0c\u901a\u8fc7\u8be5\u8bbe\u5907\u53ef\u4ee5\u8bfb\u53d6\u548c\u5199\u5165\u865a\u62df\u78c1\u76d8\u6620\u50cf\u5c01\u88c5\u7684\u4f4d\u3002 VDI \u7c7b\u7684\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec\u201cresize\u201d\u548c\u201cclone\u201d\u3002 \u793a\u4f8b\u5b57\u6bb5\u5305\u62ec\u201cvirtual_size\u201d\u548c\u201csharable\u201d\u3002 \uff08\u5728\u524d\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u5f53\u5728 VM \u6a21\u677f\u4e0a\u8c03\u7528 VM.provision \u540e\uff0c\u4e00\u4e9b\u8868\u793a\u65b0\u521b\u5efa\u7684\u78c1\u76d8\u7684 VDI \u5bf9\u8c61\u4fbf\u81ea\u52a8\u521b\u5efa\u5e76\u8fde\u63a5\u5230 VM \u5bf9\u8c61\u3002\uff09    SR  SR\uff08\u5b58\u50a8\u5e93\uff09\u805a\u5408 VDI \u7684\u96c6\u5408\u5e76\u5c01\u88c5 VDI \u4f4d\u6240\u5728\u7684\u7269\u7406\u5b58\u50a8\u7684\u5c5e\u6027\u3002 \u793a\u4f8b\u53c2\u6570\u5305\u62ec type\uff08\u786e\u5b9a XenServer \u5b89\u88c5\u7528\u6765\u8bfb/\u5199 SR \u7684 VDI \u7684\u7279\u5b9a\u4e8e\u5b58\u50a8\u7684\u9a71\u52a8\u7a0b\u5e8f\uff09\u548c physical_utilisation\uff1b\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec scan\uff08\u8c03\u7528\u7279\u5b9a\u4e8e\u5b58\u50a8\u7684\u9a71\u52a8\u7a0b\u5e8f\u4ee5\u83b7\u5f97\u5305\u542b\u5728 SR \u4e2d\u7684 VDI \u7684\u5217\u8868\u4ee5\u53ca\u8fd9\u4e9b VDI \u7684\u5c5e\u6027\uff09\u548c create\uff08\u521d\u59cb\u5316\u7269\u7406\u5b58\u50a8\u7684\u5757\uff0c\u4f7f\u5176\u51c6\u5907\u597d\u5b58\u50a8 VDI\uff09\u3002    Network  \u7f51\u7edc\u5bf9\u8c61\u8868\u793a\u5b58\u5728\u4e8e XenServer \u4e3b\u673a\u5b9e\u4f8b\u6240\u5728\u7684\u73af\u5883\u4e2d\u7684\u7b2c\u4e8c\u5c42\u7f51\u7edc\u3002 XenServer \u4e0d\u76f4\u63a5\u7ba1\u7406\u7f51\u7edc\uff0c\u56e0\u6b64\uff0c\u8fd9\u662f\u4e00\u4e2a\u8f7b\u578b\u7c7b\uff0c\u4ec5\u7528\u4e8e\u5bf9\u7269\u7406\u548c\u865a\u62df\u7f51\u7edc\u62d3\u6251\u8fdb\u884c\u5efa\u6a21\u3002 \u8fde\u63a5\u5230\u7279\u5b9a\u7f51\u7edc\u5bf9\u8c61\uff08\u901a\u8fc7 VIF \u548c PIF \u5b9e\u4f8b - \u8bf7\u53c2\u9605\u4e0b\u6587\uff09\u7684 VM \u548c\u4e3b\u673a\u5bf9\u8c61\u53ef\u4ee5\u5411\u5f7c\u6b64\u53d1\u9001\u7f51\u7edc\u6570\u636e\u5305\u3002     \u6b64\u65f6\uff0c\u8bfb\u8005\u5982\u679c\u8ba4\u4e3a\u8fd9\u6837\u5217\u4e3e\u7c7b\u8fc7\u4e8e\u7b80\u5355\uff0c\u53ef\u4ee5\u8df3\u5230\u4e0b\u4e00\u7ae0\u63d0\u4f9b\u7684\u4ee3\u7801\u90e8\u5206\uff1a\u8be5\u90e8\u5206\u63d0\u4f9b\u4e86\u5927\u91cf\u6709\u7528\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ec5\u4f7f\u7528\u5df2\u7ecf\u4ecb\u7ecd\u7684\u4e00\u4e9b\u7c7b\u5c31\u53ef\u4ee5\u7f16\u5199\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\uff01 \u5bf9\u4e8e\u5e0c\u671b\u7ee7\u7eed\u6309\u6b64\u6458\u8981\u8bf4\u660e\u65b9\u5f0f\u4e86\u89e3\u7c7b\u7684\u8bfb\u8005\uff0c\u8bf7\u63a5\u7740\u9605\u8bfb\u3002  \u5728\u4e0a\u9762\u5217\u51fa\u7684\u7c7b\u7684\u9876\u90e8\uff0c\u6709\u53e6\u5916 4 \u4e2a\u7528\u4f5c\u8fde\u63a5\u5668\u7684\u7c7b\uff0c\u7528\u4e8e\u6307\u5b9a VM \u548c\u4e3b\u673a\u3001\u5b58\u50a8\u548c\u7f51\u7edc\u4e4b\u95f4\u7684\u5173\u7cfb\u3002 \u6211\u4eec\u5c06\u4ecb\u7ecd\u5176\u4e2d\u7684\u524d 2 \u4e2a\u7c7b\uff08VBD \u548c VIF\uff09\u786e\u5b9a\u5982\u4f55\u5c06 VM \u5206\u522b\u8fde\u63a5\u5230\u865a\u62df\u78c1\u76d8\u548c\u7f51\u7edc\u5bf9\u8c61\uff1a           VBD  VBD\uff08\u865a\u62df\u5757\u8bbe\u5907\uff09\u5bf9\u8c61\u8868\u793a VM \u548c VDI \u4e4b\u95f4\u7684\u8fde\u63a5\u3002 \u5f15\u5bfc VM \u65f6\uff0c\u5c06\u67e5\u8be2\u5b83\u7684 VBD \u5bf9\u8c61\u4ee5\u786e\u5b9a\u5e94\u8be5\u8fde\u63a5\u54ea\u4e9b\u78c1\u76d8\u6620\u50cf (VDI)\u3002 VBD \u7c7b\u7684\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec\u201cplug\u201d\uff08\u5c06\u78c1\u76d8\u8bbe\u5907\u70ed\u63d2\u5165\u5230\u8fd0\u884c\u4e2d\u7684 VM\uff0c\u4ece\u800c\u4f7f\u6307\u5b9a\u7684 VDI \u53ef\u8bbf\u95ee\uff09\u548c\u201cunplug\u201d\uff08\u4ece\u8fd0\u884c\u4e2d\u7684\u6765\u5bbe\u7cfb\u7edf\u4e2d\u70ed\u62d4\u51fa\u78c1\u76d8\u8bbe\u5907\uff09\uff1b\u793a\u4f8b\u5b57\u6bb5\u5305\u62ec\u201cdevice\u201d\uff08\u786e\u5b9a\u6765\u5bbe\u7cfb\u7edf\u5185\u90e8\u7684\u8bbe\u5907\u540d\u79f0\uff0c\u901a\u8fc7\u8be5\u8bbe\u5907\u4e0b\u53ef\u8bbf\u95ee\u6307\u5b9a\u7684 VDI\uff09\u3002    VIF  VIF\uff08\u865a\u62df\u7f51\u7edc\u63a5\u53e3\uff09\u5bf9\u8c61\u8868\u793a VM \u548c\u7f51\u7edc\u5bf9\u8c61\u4e4b\u95f4\u7684\u8fde\u63a5\u3002 \u5f15\u5bfc VM \u65f6\uff0c\u5c06\u67e5\u8be2\u5b83\u7684 VIF \u5bf9\u8c61\u4ee5\u786e\u5b9a\u5e94\u521b\u5efa\u54ea\u4e9b\u7f51\u7edc\u8bbe\u5907\u3002 VIF \u7c7b\u7684\u793a\u4f8b\u65b9\u6cd5\u5305\u62ec\u201cplug\u201d\uff08\u5c06\u7f51\u7edc\u8bbe\u5907\u70ed\u63d2\u5165\u5230\u8fd0\u884c\u4e2d\u7684 VM\uff09\u548c\u201cunplug\u201d\uff08\u4ece\u8fd0\u884c\u4e2d\u7684\u6765\u5bbe\u7cfb\u7edf\u4e2d\u70ed\u62d4\u51fa\u7f51\u7edc\u8bbe\u5907\uff09\u3002     \u6211\u4eec\u8981\u4ecb\u7ecd\u7684\u7b2c\u4e8c\u7ec4\u201c\u8fde\u63a5\u5668\u7c7b\u201d\u786e\u5b9a\u5982\u4f55\u5c06\u4e3b\u673a\u8fde\u63a5\u5230\u7f51\u7edc\u548c\u5b58\u50a8\u3002            PIF  PIF\uff08\u7269\u7406\u63a5\u53e3\uff09\u5bf9\u8c61\u8868\u793a\u4e3b\u673a\u548c\u7f51\u7edc\u5bf9\u8c61\u4e4b\u95f4\u7684\u8fde\u63a5\u3002 \u5982\u679c\u5c06\u4e3b\u673a\u8fde\u63a5\u5230\u7f51\u7edc\uff08\u901a\u8fc7 PIF\uff09\uff0c\u5219\u6307\u5b9a\u7684\u4e3b\u673a\u63d0\u4f9b\u7684\u6570\u636e\u5305\u53ef\u4ee5\u7531\u5bf9\u5e94\u7684\u4e3b\u673a\u4f20\u8f93/\u63a5\u6536\u3002 PIF \u7c7b\u7684\u793a\u4f8b\u5b57\u6bb5\u5305\u62ec\u201cdevice\u201d\uff08\u6307\u5b9a PIF \u5bf9\u5e94\u7684\u8bbe\u5907\u540d\u79f0\uff0c\u4f8b\u5982 eth0\uff09\u548c\u201cMAC\u201d\uff08\u6307\u5b9a PIF \u8868\u793a\u7684\u57fa\u7840 NIC \u7684 MAC \u5730\u5740\uff09\u3002 \u8bf7\u6ce8\u610f\uff0cPIF \u6307\u7269\u7406\u63a5\u53e3\u548c VLAN \u4e24\u8005\uff08\u540e\u8005\u7531\u201cVLAN\u201d\u5b57\u6bb5\u4e2d\u662f\u5426\u5b58\u5728\u6b63\u6574\u6570\u533a\u5206\uff09\u3002    PBD  PBD\uff08\u7269\u7406\u5757\u8bbe\u5907\uff09\u5bf9\u8c61\u8868\u793a\u4e3b\u673a\u548c SR\uff08\u5b58\u50a8\u5e93\uff09\u5bf9\u8c61\u4e4b\u95f4\u7684\u8fde\u63a5\u3002 \u5b57\u6bb5\u5305\u62ec\u201ccurrently-attached\u201d\u548c\u201cdevice_config\u201d\uff0c\u524d\u8005\u6307\u5b9a\u7531\u6307\u5b9a\u7684 SR \u5bf9\u8c61\u8868\u793a\u7684\u5b58\u50a8\u533a\u5757\u5f53\u524d\u662f\u5426\u5bf9\u4e3b\u673a\u53ef\u7528\uff0c\u540e\u8005\u6307\u5b9a\u53ef\u7528\u6765\u786e\u5b9a\u5982\u4f55\u5728\u6307\u5b9a\u7684\u4e3b\u673a\u4e0a\u914d\u7f6e\u4f4e\u7ea7\u5b58\u50a8\u8bbe\u5907\u7684\u7279\u5b9a\u4e8e\u5b58\u50a8\u9a71\u52a8\u7a0b\u5e8f\u7684\u53c2\u6570\uff0c\u4f8b\u5982\uff0c\u5bf9\u4e8e\u5728 NFS \u6587\u4ef6\u7ba1\u7406\u5668\u4e0a\u5448\u73b0\u7684 SR\uff0cdevice_config \u53ef\u4ee5\u6307\u5b9a\u8be5\u6587\u4ef6\u7ba1\u7406\u5668\u7684\u4e3b\u673a\u540d\u548c SR \u6587\u4ef6\u6240\u5728\u7684\u6587\u4ef6\u7ba1\u7406\u5668\u7684\u8def\u5f84\u3002     \u4e0b\u56fe\u663e\u793a\u4e86\u7528\u4e8e\u7ba1\u7406 VM\u3001\u4e3b\u673a\u3001\u5b58\u50a8\u548c\u7f51\u7edc\u8fde\u63a5\u7684 API \u7c7b\u7684\u56fe\u5f62\u6982\u8ff0\u3002 \u4ece\u6b64\u56fe\u53ef\u4ee5\u6e05\u6670\u5730\u770b\u51fa\u5b58\u50a8\u548c\u7f51\u7edc\u914d\u7f6e\u4e4b\u95f4\u4ee5\u53ca\u865a\u62df\u673a\u548c\u4e3b\u673a\u914d\u7f6e\u4e4b\u95f4\u7684\u5bf9\u79f0\u6027\u3002", 
            "title": "\u5bf9\u8c61\u6a21\u578b\u6982\u8ff0"
        }, 
        {
            "location": "/#vif-vbd", 
            "text": "\u672c\u8282\u5c06\u8be6\u7ec6\u6f14\u793a\u51e0\u4e2a\u8f83\u590d\u6742\u7684\u65b9\u6848\uff0c\u5e76\u5c06\u975e\u6b63\u5f0f\u6027\u5730\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 API \u5b8c\u6210\u4e0e\u865a\u62df\u5b58\u50a8\u548c\u7f51\u7edc\u8bbe\u5907\u76f8\u5173\u7684\u591a\u79cd\u4efb\u52a1\u3002", 
            "title": "\u4f7f\u7528 VIF \u548c VBD"
        }, 
        {
            "location": "/#vm_3", 
            "text": "\u9996\u5148\uff0c\u8003\u8651\u5982\u4f55\u751f\u6210\u65b0\u7684\u7a7a\u767d\u78c1\u76d8\u6620\u50cf\u5e76\u5c06\u5176\u8fde\u63a5\u5230\u8fd0\u884c\u4e2d\u7684 VM\u3002 \u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u901a\u8fc7\u4e00\u4e9b\u524d\u671f\u5de5\u4f5c\u83b7\u5f97\u4e86\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684 VM\uff0c\u5e76\u4e14\u77e5\u9053\u5176\u76f8\u5e94\u7684 API \u5bf9\u8c61\u5f15\u7528\uff08\u4f8b\u5982\uff0c\u53ef\u80fd\u5df2\u4f7f\u7528\u4e0a\u4e00\u8282\u4ecb\u7ecd\u7684\u8fc7\u7a0b\u521b\u5efa\u4e86\u6b64 VM\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u5df2\u8fd4\u56de\u5176\u5f15\u7528\u3002\uff09\u8fd8\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u5411 XenServer \u5b89\u88c5\u901a\u8fc7\u4e86\u8eab\u4efd\u9a8c\u8bc1\u5e76\u5177\u6709\u76f8\u5e94\u7684\u4f1a\u8bdd\u5f15\u7528\u3002 \u4e3a\u7b80\u8981\u8d77\u89c1\uff0c\u5728\u672c\u7ae0\u7684\u5176\u4f59\u90e8\u5206\u4e2d\u5c06\u4e0d\u518d\u63d0\u53ca\u4f1a\u8bdd\u3002", 
            "title": "\u521b\u5efa\u78c1\u76d8\u5e76\u5c06\u5176\u8fde\u63a5\u5230 VM"
        }, 
        {
            "location": "/#_10", 
            "text": "\u7b2c\u4e00\u6b65\u662f\u5b9e\u4f8b\u5316\u7269\u7406\u5b58\u50a8\u4e2d\u7684\u78c1\u76d8\u6620\u50cf\u3002\u8fd9\u901a\u8fc7\u8c03\u7528 VDI.create() \u6765\u5b8c\u6210\u3002VDI.create \u8c03\u7528\u4f7f\u7528\u4e00\u4e9b\u53c2\u6570\uff0c\u5305\u62ec\uff1a    Name_label \u548c name_description\uff1a\u78c1\u76d8\u7684\u7528\u6237\u53ef\u8bfb\u540d\u79f0/\u8bf4\u660e\uff08\u4f8b\u5982\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u5728 UI \u4e2d\u663e\u793a\u7b49\uff09\u3002\u5982\u679c\u9700\u8981\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u53ef\u4ee5\u7559\u7a7a\u3002    SR\uff1a\u5b58\u50a8\u5e93\u7684\u5bf9\u8c61\u5f15\u7528\uff0c\u8868\u793a\u5c06\u653e\u7f6e VDI \u7684\u4f4d\u7684\u7269\u7406\u5b58\u50a8\u3002    read_only\uff1a\u5c06\u6b64\u5b57\u6bb5\u8bbe\u7f6e\u4e3a true \u8868\u793a VDI \u53ea\u80fd\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u8fde\u63a5\u5230 VM\u3002 \uff08\u5c1d\u8bd5\u4ee5\u8bfb/\u5199\u65b9\u5f0f\u8fde\u63a5 read_only \u5b57\u6bb5\u8bbe\u7f6e\u4e3a true \u7684 VDI \u4f1a\u5f15\u53d1\u9519\u8bef\u3002\uff09    \u8c03\u7528 VDI.create \u8c03\u7528\u4f1a\u5bfc\u81f4 XenServer \u5b89\u88c5\u5728\u7269\u7406\u5b58\u50a8\u4e2d\u521b\u5efa\u7a7a\u767d\u78c1\u76d8\u6620\u50cf\u3001\u521b\u5efa\u76f8\u5173\u8054\u7684 VDI \u5bf9\u8c61\uff08\u6d89\u53ca\u7269\u7406\u5b58\u50a8\u4e2d\u7684\u78c1\u76d8\u6620\u50cf\u7684 datamodel \u5b9e\u4f8b\uff09\u5e76\u8fd4\u56de\u5bf9\u6b64\u65b0\u5efa\u7684 VDI \u5bf9\u8c61\u7684\u5f15\u7528\u3002  \u7269\u7406\u5b58\u50a8\u4e2d\u8868\u793a\u78c1\u76d8\u6620\u50cf\u7684\u65b9\u5f0f\u53d6\u51b3\u4e8e\u521b\u5efa\u7684 VDI \u6240\u5728 SR \u7684\u7c7b\u578b\u3002 \u4f8b\u5982\uff0c\u5982\u679c SR \u4e3a\u201clvm\u201d\u7c7b\u578b\uff0c\u5219\u65b0\u7684\u78c1\u76d8\u6620\u50cf\u5c06\u5448\u73b0\u4e3a LVM \u5377\uff1b\u5982\u679c SR \u4e3a\u201cnfs\u201d\u7c7b\u578b\uff0c\u5219\u65b0\u7684\u78c1\u76d8\u6620\u50cf\u5c06\u5448\u73b0\u4e3a\u5728 NFS \u6587\u4ef6\u7ba1\u7406\u5668\u4e2d\u521b\u5efa\u7684\u7a00\u758f VHD \u6587\u4ef6\u3002 \uff08\u901a\u8fc7 API \u4f7f\u7528 SR.get_type() \u8c03\u7528\u53ef\u4ee5\u67e5\u8be2 SR \u7c7b\u578b\u3002\uff09   \u6ce8\u610f   \u67d0\u4e9b SR \u7c7b\u578b\u53ef\u80fd\u4f1a\u5bf9 virtual-size \u503c\u8fdb\u884c\u820d\u5165\u5904\u7406\uff0c\u4ee5\u4f7f\u6b64\u503c\u53ef\u88ab\u5df2\u914d\u7f6e\u5757\u7684\u5927\u5c0f\u6574\u9664\u3002", 
            "title": "\u521b\u5efa\u65b0\u7684\u7a7a\u767d\u78c1\u76d8\u6620\u50cf"
        }, 
        {
            "location": "/#vm_4", 
            "text": "\u81f3\u6b64\uff0c\u6211\u4eec\u6709\u4e86\u8fd0\u884c\u4e2d\u7684 VM\uff08\u5728\u6b64\u793a\u4f8b\u5f00\u5934\u5df2\u5047\u8bbe\u5b58\u5728\uff09\u548c\u521a\u521b\u5efa\u7684\u65b0 VDI\u3002 \u73b0\u5728\uff0cXenServer \u4e3b\u673a\u4e2d\u5df2\u6709\u4e24\u4e2a\u72ec\u7acb\u5bf9\u8c61\uff0c\u4f46\u6ca1\u6709\u4ec0\u4e48\u5bf9\u8c61\u5c06\u5b83\u4eec\u94fe\u63a5\u8d77\u6765\u3002 \u56e0\u6b64\uff0c\u4e0b\u4e00\u6b65\u8981\u521b\u5efa\u4e00\u4e2a\u8fd9\u6837\u7684\u94fe\u63a5\uff0c\u5c06 VDI \u4e0e VM \u5173\u8054\u8d77\u6765\u3002  \u901a\u8fc7\u521b\u5efa\u540d\u4e3a VBD\uff08\u865a\u62df\u5757\u8bbe\u5907\uff09\u7684\u65b0\u201c\u8fde\u63a5\u5668\u201d\u5bf9\u8c61\u5efa\u7acb\u8fde\u63a5\u3002 \u8981\u521b\u5efa VBD\uff0c\u9700\u8981\u8c03\u7528 VBD.create() \u8c03\u7528\u3002 VBD.create() \u8c03\u7528\u5c06\u4f7f\u7528\u591a\u4e2a\u53c2\u6570\uff0c\u5305\u62ec\uff1a    VM - \u8fde\u63a5 VDI \u7684 VM \u7684\u5bf9\u8c61\u5f15\u7528\u3002    VDI - \u8981\u8fde\u63a5\u7684 VDI \u7684\u5bf9\u8c61\u5f15\u7528\u3002    mode - \u6307\u5b9a VDI \u662f\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u8fd8\u662f\u8bfb\u5199\u65b9\u5f0f\u8fde\u63a5\u3002    userdevice - \u6307\u5b9a\u6765\u5bbe\u7cfb\u7edf\u4e2d\u7684\u5757\u8bbe\u5907\uff0c\u901a\u8fc7\u8be5\u8bbe\u5907\u6b63\u5728 VM \u4e2d\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u5c06\u80fd\u8bfb/\u5199 VDI \u7684\u4f4d\u3002    type - \u6307\u5b9a VDI \u662f\u5e94\u5f53\u4f5c\u4e3a\u5e38\u89c4\u78c1\u76d8\u8fd8\u662f\u4f5c\u4e3a CD \u663e\u793a\u5728 VM \u4e2d\u3002 \uff08\u8bf7\u6ce8\u610f\uff0c\u6b64\u7279\u5b9a\u5b57\u6bb5\u5728 Windows VM \u4e2d\u7684\u542b\u4e49\u6bd4\u5728 Linux VM \u4e2d\u66f4\u4e30\u5bcc\uff0c\u4f46\u5728\u672c\u7ae0\uff0c\u6211\u4eec\u4e0d\u7814\u7a76\u6b64\u7ea7\u522b\u7684\u8be6\u7ec6\u5185\u5bb9\u3002\uff09    \u8c03\u7528 VBD.create \u5c06\u5728 XenServer \u5b89\u88c5\u4e2d\u751f\u6210 VBD \u5bf9\u8c61\u5e76\u8fd4\u56de\u5176\u5bf9\u8c61\u5f15\u7528\u3002 \u4f46\u662f\uff0c\u6b64\u8c03\u7528\u672c\u8eab\u5bf9\u8fd0\u884c\u4e2d\u7684 VM \u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u5f71\u54cd\uff08\u5373\uff0c\u5982\u679c\u67e5\u770b\u8fd0\u884c\u4e2d\u7684 VM\uff0c\u60a8\u4f1a\u53d1\u73b0\u5e76\u672a\u521b\u5efa\u5757\u8bbe\u5907\uff09\u3002 VBD \u5bf9\u8c61\u7684 currently_attached \u5b57\u6bb5\u8bbe\u7f6e\u4e3a false \u53ef\u53cd\u6620\u5b58\u5728 VBD \u5bf9\u8c61\u4f46\u6765\u5bbe\u7cfb\u7edf\u4e2d\u7684\u5757\u8bbe\u5907\u5904\u4e8e\u975e\u6d3b\u52a8\u72b6\u6001\u3002  \u4e3a\u4e86\u8fdb\u884c\u8bf4\u660e\uff0c\u4e0b\u56fe\u63d0\u4f9b\u4e86\u4e00\u4e2a\u56fe\u5f62\u793a\u4f8b\u4ee5\u663e\u793a VM\u3001VBD\u3001VDI \u548c SR \u4e4b\u95f4\u5173\u7cfb\u3002 \u5728\u8be5\u5b9e\u4f8b\u4e2d\uff0c\u4e00\u4e2a VM \u5bf9\u8c61\u8fde\u63a5\u4e24\u4e2a VDI\uff1a\u4e24\u4e2a VBD \u5bf9\u8c61\u6784\u6210 VM \u5bf9\u8c61\u4e0e\u5176 VDI \u4e4b\u95f4\u7684\u8fde\u63a5\uff0c\u8fd9\u4e9b VDI \u4f4d\u4e8e\u540c\u4e00\u4e2a SR \u5185\u3002", 
            "title": "\u5c06\u78c1\u76d8\u6620\u50cf\u8fde\u63a5\u5230 VM"
        }, 
        {
            "location": "/#vbd", 
            "text": "\u5982\u679c\u6211\u4eec\u5728\u8be5\u9636\u6bb5\u91cd\u65b0\u542f\u52a8 VM\uff0c\u5219\u91cd\u65b0\u542f\u52a8\u540e\uff0c\u5c06\u663e\u793a\u5bf9\u5e94\u4e8e VBD \u7684\u5757\u8bbe\u5907\uff1a\u5f15\u5bfc\u65f6\uff0cXenServer \u5c06\u67e5\u8be2 VM \u7684\u6240\u6709 VBD\uff0c\u5e76\u4e3b\u52a8\u8fde\u63a5\u6bcf\u4e2a\u5bf9\u5e94\u7684 VDI\u3002  \u91cd\u65b0\u542f\u52a8 VM \u56fa\u7136\u5f88\u597d\uff0c\u8bf7\u8bb0\u4f4f\u6211\u4eec\u60f3\u8981\u5c06\u65b0\u521b\u5efa\u7684\u7a7a\u767d\u78c1\u76d8\u8fde\u63a5\u5230\u8fd0\u884c\u4e2d\u7684 VM\u3002 \u53ef\u901a\u8fc7\u5bf9\u65b0\u521b\u5efa\u7684 VBD \u5bf9\u8c61\u8c03\u7528 plug \u65b9\u6cd5\u5b9e\u73b0\u6b64\u76ee\u7684\u3002 plug \u8c03\u7528\u6210\u529f\u8fd4\u56de\u540e\uff0c\u4e0e VBD \u76f8\u5173\u7684\u5757\u8bbe\u5907\u5c06\u51fa\u73b0\u5728\u8fd0\u884c\u4e2d\u7684 VM \u5185\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ece\u8fd0\u884c\u4e2d\u7684 VM \u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6765\u5bbe\u64cd\u4f5c\u7cfb\u7edf\u5c06\u8ba4\u4e3a\u521a\u521a\u70ed\u63d2\u5165\u4e86\u65b0\u78c1\u76d8\u8bbe\u5907\u3002 \u6b64\u60c5\u51b5\u53cd\u6620\u5728 API \u7684\u6258\u7ba1\u73af\u5883\u4e2d\uff0c\u5373 VBD \u7684 currently_attached \u5b57\u6bb5\u8bbe\u7f6e\u4e3a true\u3002  VBD plug \u65b9\u6cd5\u76f8\u5e94\u5730\u5177\u6709\u540d\u4e3a\u201cunplug\u201d\u7684\u65b9\u6cd5\u4e0e\u5176\u5bf9\u5e94\u3002 \u5bf9 VBD \u5bf9\u8c61\u8c03\u7528 unplug \u65b9\u6cd5\u4f1a\u5bfc\u81f4\u4ece\u8fd0\u884c\u4e2d\u7684 VM \u70ed\u62d4\u51fa\u76f8\u5173\u7684\u5757\u8bbe\u5907\uff0c\u76f8\u5e94\u5730\u5bfc\u81f4 VBD \u5bf9\u8c61\u7684 currently_attached \u5b57\u6bb5\u8bbe\u7f6e\u4e3a false\u3002", 
            "title": "\u70ed\u63d2\u62d4 VBD"
        }, 
        {
            "location": "/#vm_5", 
            "text": "\u5728 VM \u4e2d\u914d\u7f6e\u865a\u62df\u7f51\u7edc\u63a5\u53e3\u6240\u6d89\u53ca\u7684 API \u8c03\u7528\u4e0e\u914d\u7f6e\u865a\u62df\u78c1\u76d8\u8bbe\u5907\u6240\u6d89\u53ca\u7684\u8c03\u7528\u5728\u8bb8\u591a\u65b9\u9762\u90fd\u5f88\u76f8\u4f3c\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u901a\u8fc7\u5b8c\u6574\u7684\u793a\u4f8b\u6765\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 API \u5bf9\u8c61\u6a21\u578b\u521b\u5efa\u7f51\u7edc\u63a5\u53e3\uff1b\u800c\u53ea\u5728\u672c\u8282\u7b80\u8981\u8bf4\u660e\u865a\u62df\u7f51\u7edc\u8fde\u63a5\u8bbe\u5907\u4e0e\u865a\u62df\u5b58\u50a8\u8bbe\u5907\u914d\u7f6e\u4e4b\u95f4\u7684\u5bf9\u79f0\u6027\u3002  VBD \u7c7b\u7684\u7f51\u7edc\u8fde\u63a5\u5bf9\u7b49\u5bf9\u8c61\u4e3a VIF \u7c7b\u3002 \u5982\u540c VBD \u662f\u5757\u8bbe\u5907\u5728 VM \u4e2d\u7684 API \u8868\u793a\uff0cVIF\uff08\u865a\u62df\u7f51\u7edc\u63a5\u53e3\uff09\u662f\u7f51\u7edc\u8bbe\u5907\u5728 VM \u4e2d\u7684 API \u8868\u793a\u3002 VBD \u5c06 VM \u5bf9\u8c61\u4e0e VDI \u5bf9\u8c61\u76f8\u5173\u8054\uff0c\u800c VIF \u5c06 VM \u5bf9\u8c61\u4e0e\u7f51\u7edc\u5bf9\u8c61\u76f8\u5173\u8054\u3002 \u5982\u540c VBD\uff0cVIF \u4e5f\u5177\u6709\u51b3\u5b9a\u4e0e VIF \u76f8\u5173\u8054\u7684\u7f51\u7edc\u8bbe\u5907\uff08\u6765\u5bbe\u7cfb\u7edf\u5185\u90e8\uff09\u5f53\u524d\u662f\u5426\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684 currently_attached \u5b57\u6bb5\u3002 \u5982\u540c VBD\uff0c\u5728\u5f15\u5bfc VM \u65f6\uff0c\u7cfb\u7edf\u5c06\u67e5\u8be2 VM \u7684 VIF \u5e76\u5728\u5f15\u5bfc\u7684 VM \u5185\u90e8\u521b\u5efa\u6bcf\u4e2a VIF \u7684\u76f8\u5e94\u7f51\u7edc\u8bbe\u5907\u3002 \u540c\u6837\uff0cVIF \u4e5f\u5177\u6709 plug \u548c unplug \u65b9\u6cd5\uff0c\u7528\u4e8e\u5c06\u7f51\u7edc\u8bbe\u5907\u70ed\u63d2\u5165/\u62d4\u51fa\u8fd0\u884c\u4e2d\u7684 VM\u3002", 
            "title": "\u521b\u5efa\u7f51\u7edc\u8bbe\u5907\u5e76\u5c06\u5176\u8fde\u63a5\u5230 VM"
        }, 
        {
            "location": "/#_11", 
            "text": "\u6211\u4eec\u5df2\u77e5\u9053 VBD \u7c7b\u548c VIF \u7c7b\u5206\u522b\u7528\u4e8e\u7ba1\u7406 VM \u4e2d\u5757\u8bbe\u5907\u548c\u7f51\u7edc\u8bbe\u5907\u7684\u914d\u7f6e\u3002\u5b58\u5728\u4e24\u4e2a\u76f8\u4f3c\u7684\u7c7b\u53ef\u7528\u4e8e\u7ba1\u7406\u5b58\u50a8\u548c\u7f51\u7edc\u8fde\u63a5\u7684\u4e3b\u673a\u914d\u7f6e\uff1aPBD\uff08\u7269\u7406\u5757\u8bbe\u5907\uff09\u548c PIF\uff08\u7269\u7406[\u7f51\u7edc]\u63a5\u53e3\uff09\u3002", 
            "title": "\u7f51\u7edc\u8fde\u63a5\u548c\u5b58\u50a8\u7684\u4e3b\u673a\u914d\u7f6e"
        }, 
        {
            "location": "/#pbd", 
            "text": "\u6211\u4eec\u4ece PBD \u7c7b\u5f00\u59cb\u8ba8\u8bba\u3002PBD.create() \u8c03\u7528\u4f7f\u7528\u591a\u4e2a\u53c2\u6570\uff0c\u5305\u62ec\uff1a     \u53c2\u6570  \u8bf4\u660e      host  \u53ef\u4ee5\u5728\u5176\u4e2d\u63d0\u4f9b PBD \u7684\u7269\u7406\u673a    SR  PBD \u6240\u8fde\u63a5\u7684\u5b58\u50a8\u5e93    device_config  \u63d0\u4f9b\u7ed9\u4e3b\u673a\u7684 SR \u540e\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u5b57\u7b26\u4e32\u5230\u5b57\u7b26\u4e32\u6620\u5c04\uff0c\u5305\u542b\u914d\u7f6e\u8981\u5728\u5176\u4e0a\u5b9e\u73b0 SR \u7684\u7269\u7406\u5b58\u50a8\u8bbe\u5907\u6240\u9700\u7684\u4f4e\u7ea7\u53c2\u6570\u3002 device_config \u5b57\u6bb5\u7684\u7279\u5b9a\u5185\u5bb9\u53d6\u51b3\u4e8e PBD \u8fde\u63a5\u5230\u7684 SR \u7684\u7c7b\u578b\u3002 \uff08\u6267\u884c xe sm-list \u5c06\u663e\u793a\u53ef\u80fd\u7684 SR \u7c7b\u578b\u7684\u5217\u8868\uff1b\u6b64\u679a\u4e3e\u4e2d\u7684 configuration \u5b57\u6bb5\u5c06\u6307\u5b9a\u6bcf\u4e2a SR \u7c7b\u578b\u6240\u9700\u7684 device_config \u53c2\u6570\u3002\uff09     \u4f8b\u5982\uff0c\u5047\u8bbe\u5177\u6709\u201cnfs\u201d\u7c7b\u578b\u7684 SR \u5bf9\u8c61 s\uff08\u8868\u793a\u4ee5 VHD \u6587\u4ef6\u5f62\u5f0f\u5b58\u50a8 VDI \u7684 NFS \u6587\u4ef6\u7ba1\u7406\u5668\u4e2d\u7684\u76ee\u5f55\uff09\uff1b\u5e76\u5047\u8bbe\u9700\u8981\u4e00\u53f0\u4e3b\u673a h \u4ee5\u4fbf\u80fd\u591f\u8bbf\u95ee s\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8c03\u7528 PBD.create()\uff0c\u5728\u5176\u4e2d\u6307\u5b9a\u4e3b\u673a h\u3001SR s \u548c device_config \u53c2\u6570\u7684\u503c\uff0c\u6620\u5c04\u5982\u4e0b\ufe30  ( server ,  my_nfs_server.example.com ), ( serverpath ,  /scratch/mysrs/sr1 )  \u901a\u77e5 XenServer \u4e3b\u673a\u5728\u4e3b\u673a h \u4e2d\u53ef\u8bbf\u95ee SR s\uff0c\u5982\u9700\u8fdb\u4e00\u6b65\u8bbf\u95ee SR s\uff0c\u4e3b\u673a\u9700\u8981\u5728\u540d\u4e3a my_nfs_server.example.com \u7684 NFS \u670d\u52a1\u5668\u4e0a\u88c5\u8f7d /scratch/mysrs/sr1 \u76ee\u5f55\u3002  \u5982\u540c VBD \u5bf9\u8c61\uff0cPBD \u5bf9\u8c61\u4e5f\u5177\u6709\u540d\u4e3a currently_attached \u7684\u5b57\u6bb5\u3002\u5206\u522b\u901a\u8fc7\u8c03\u7528 PBD.plug \u65b9\u6cd5\u548c PBD.unplug \u65b9\u6cd5\uff0c\u53ef\u4ee5\u4ece\u7ed9\u5b9a\u4e3b\u673a\u8fde\u63a5\u548c\u5206\u79bb\u5b58\u50a8\u5e93\u3002", 
            "title": "\u4e3b\u673a\u5b58\u50a8\u914d\u7f6e\uff1aPBD"
        }, 
        {
            "location": "/#pif", 
            "text": "\u4e3b\u673a\u7f51\u7edc\u914d\u7f6e\u901a\u8fc7 PIF \u5bf9\u8c61\u6307\u5b9a\u3002 \u5982\u679c PIF \u5bf9\u8c61\u5c06\u7f51\u7edc\u5bf9\u8c61 n \u8fde\u63a5\u5230\u4e3b\u673a\u5bf9\u8c61 h\uff0c\u5219\u5bf9\u5e94\u4e8e n \u7684\u7f51\u7edc\u5c06\u6865\u63a5\u5230\u7531 PIF \u5bf9\u8c61\u7684\u5b57\u6bb5\u6307\u5b9a\u7684\u7269\u7406\u63a5\u53e3\uff08\u6216\u4e00\u4e2a\u52a0\u4e86 VLAN \u6807\u8bb0\u7684\u7269\u7406\u63a5\u53e3\uff09\u3002  \u4f8b\u5982\uff0c\u5047\u8bbe\u5b58\u5728\u5c06\u4e3b\u673a h \u8fde\u63a5\u5230\u7f51\u7edc n \u7684 PIF \u5bf9\u8c61\uff0c\u5e76\u4e14 PIF \u5bf9\u8c61\u7684 device \u5b57\u6bb5\u8bbe\u7f6e\u4e3a eth0\u3002 \u8fd9\u610f\u5473\u7740\uff0c\u7f51\u7edc n \u4e0a\u7684\u6240\u6709\u6570\u636e\u5305\u90fd\u5c06\u901a\u8fc7\u6865\u4f20\u8f93\u5230\u4e3b\u673a\u4e2d\u4e0e\u4e3b\u673a\u7f51\u7edc\u8bbe\u5907 eth0 \u5bf9\u5e94\u7684 NIC\u3002", 
            "title": "\u4e3b\u673a\u7f51\u7edc\u8fde\u63a5\u914d\u7f6e\uff1aPIF"
        }, 
        {
            "location": "/#vm_6", 
            "text": "VM \u53ef\u4ee5\u5bfc\u51fa\u5230\u67d0\u4e2a\u6587\u4ef6\uff0c\u7136\u540e\u518d\u5bfc\u5165\u5230\u4efb\u4f55 XenServer \u4e3b\u673a\u3002 \u5bfc\u51fa\u534f\u8bae\u662f\u7b80\u5355\u7684 HTTP(S) GET\uff0c\u5982\u679c VM \u4f4d\u4e8e\u6c60\u6210\u5458\u4e0a\uff0c\u5e94\u5728\u4e3b\u8282\u70b9\u4e0a\u6267\u884c\u6b64\u534f\u8bae\u3002 \u6388\u6743\u662f\u6807\u51c6 HTTP \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6216\u8005\u5982\u679c\u5df2\u83b7\u5f97\u4e86\u4f1a\u8bdd\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u4f1a\u8bdd\u3002 \u8981\u5bfc\u51fa\u7684 VM \u7531 UUID \u6216\u5f15\u7528\u6307\u5b9a\u3002 \u8981\u8ddf\u8e2a\u5bfc\u51fa\uff0c\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u5e76\u4f7f\u7528\u5176\u5f15\u7528\u4f20\u5165\u3002 \u5982\u679c\u53ea\u80fd\u5728\u6c60\u6210\u5458\u4e0a\u8bbf\u95ee VM \u7684\u78c1\u76d8\uff0c\u5219\u8bf7\u6c42\u53ef\u80fd\u4f1a\u5bfc\u81f4\u91cd\u5b9a\u5411\u3002  \u4e0b\u5217\u53c2\u6570\u901a\u8fc7\u547d\u4ee4\u884c\u4f20\u9012\uff1a     \u53c2\u6570  \u8bf4\u660e      session_id  \u7528\u4e8e\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u7684\u4f1a\u8bdd\u7684\u5f15\u7528\uff1b\u4ec5\u5728\u4e0d\u4f7f\u7528 HTTP \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\u65f6\u9700\u8981    task_id  \u7528\u4e8e\u8ddf\u8e2a\u64cd\u4f5c\u7684\u4efb\u52a1\u5bf9\u8c61\u7684\u5f15\u7528\uff1b\u662f\u53ef\u9009\u53c2\u6570\uff0c\u53ea\u6709\u5728\u5df2\u521b\u5efa\u4efb\u52a1\u5bf9\u8c61\u6765\u8ddf\u8e2a\u5bfc\u51fa\u65f6\uff0c\u624d\u9700\u8981\u6b64\u53c2\u6570    ref  VM \u7684\u5f15\u7528\uff1b\u4ec5\u5728\u4e0d\u4f7f\u7528 UUID \u65f6\u9700\u8981    uuid  VM \u7684 UUID\uff1b\u4ec5\u5728\u4e0d\u4f7f\u7528\u5f15\u7528\u65f6\u9700\u8981     \u4f8b\u5982\uff0c\u4f7f\u7528 Linux \u547d\u4ee4\u884c\u5de5\u5177 cURL\uff1a  curl http://root:foo@myxenserver1/export?uuid= vm_uuid  -o  exportfile   \u4f1a\u5c06\u6307\u5b9a VM \u5bfc\u51fa\u5230\u6587\u4ef6 exportfile\u3002  \u82e5\u8981\u4ec5\u5bfc\u51fa\u5143\u6570\u636e\uff0c\u8bf7\u4f7f\u7528 URI http://server/export_metadata\u3002  \u5bfc\u5165\u534f\u8bae\u4e0e\u5bfc\u51fa\u534f\u8bae\u7c7b\u4f3c\uff0c\u4f7f\u7528\u7684\u662f HTTP(S) PUT\u3002 session_id \u548c task_id \u53c2\u6570\u4e0e\u5bfc\u51fa\u4e00\u6837\u3002 \u4e0d\u4f7f\u7528 ref \u548c uuid\uff1b\u5c06\u4e3a VM \u751f\u6210\u65b0\u5f15\u7528\u548c UUID\u3002 \u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u53c2\u6570\uff1a     \u53c2\u6570  \u8bf4\u660e      restore  \u5982\u679c\u4e3a true\uff0c\u5219\u5bf9\u5bfc\u5165\u7684\u5904\u7406\u65b9\u5f0f\u662f\u66ff\u6362\u539f\u59cb VM - \u8fd9\u610f\u5473\u7740\u5728\u5f53\u524d\u7684\u60c5\u51b5\u4e0b VIF \u4e0a\u7684 MAC \u5730\u5740\u4e0e\u5bfc\u51fa\u5b8c\u5168\u4e00\u6837\uff0c\u5982\u679c\u539f\u59cb VM \u4ecd\u5728\u8fd0\u884c\uff0c\u5c31\u4f1a\u5bfc\u81f4\u51b2\u7a81\u3002    force  \u5982\u679c\u4e3a true\uff0c\u5c06\u5ffd\u7565\u6240\u6709\u6821\u9a8c\u548c\u5931\u8d25\uff08\u9ed8\u8ba4\u4e3a\u5728\u68c0\u6d4b\u5230\u6821\u9a8c\u548c\u9519\u8bef\u65f6\u9500\u6bc1 VM\uff09\u3002    sr_id  \u5e94\u5c06 VM \u5bfc\u5165\u5176\u4e2d\u7684 SR \u7684\u5f15\u7528\u3002\u9ed8\u8ba4\u884c\u4e3a\u662f\u5bfc\u5165\u5230 Pool.default_SR\u3002     \u4f8b\u5982\uff0c\u518d\u6b21\u4f7f\u7528 cURL\uff1a  curl -T  exportfile  http://root:foo@myxenserver2/import  \u4f1a\u5c06 VM \u5bfc\u5165\u5230\u670d\u52a1\u5668\u4e0a\u7684\u9ed8\u8ba4 SR\u3002   \u6ce8\u610f   \u5982\u679c\u5c1a\u672a\u8bbe\u7f6e\u9ed8\u8ba4 SR \u4e14\u672a\u6307\u5b9a sr_uuid\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u6d88\u606f\u201cDEFAULT_SR_NOT_FOUND\u201d\u3002  \u53e6\u4e00\u4e2a\u793a\u4f8b\uff1a  curl  - T  exportfile   http://root:foo@myxenserver2/import?sr_id= opaque_ref_of_sr   \u4f1a\u5c06 VM \u5bfc\u5165\u5230\u670d\u52a1\u5668\u4e0a\u7684\u6307\u5b9a SR\u3002  \u82e5\u8981\u4ec5\u5bfc\u5165\u5143\u6570\u636e\uff0c\u8bf7\u4f7f\u7528 URI http://server/import_metadata", 
            "title": "\u5bfc\u51fa\u548c\u5bfc\u5165 VM"
        }, 
        {
            "location": "/#xen-virtual-appliance-xva-vm", 
            "text": "XenServer \u652f\u6301\u4e00\u79cd\u79f0\u4e3a XVA \u7684\u7528\u6237\u53ef\u8bfb\u7684\u65e7 VM \u8f93\u5165\u683c\u5f0f\u3002\u672c\u8282\u4ecb\u7ecd XVA \u7684\u8bed\u6cd5\u548c\u7ed3\u6784\u3002  XVA \u7531\u5305\u542b XML \u5143\u6570\u636e\u548c\u4e00\u7ec4\u78c1\u76d8\u6620\u50cf\u7684\u76ee\u5f55\u7ec4\u6210\u3002 \u7531 XVA \u8868\u793a\u7684 VM \u5e76\u4e0d\u662f\u53ef\u76f4\u63a5\u6267\u884c\u7684\u3002 XVA \u5305\u4e2d\u7684\u6570\u636e\u5df2\u538b\u7f29\uff0c\u5e76\u4e14\u53ef\u5728\u6c38\u4e45\u6027\u5b58\u50a8\u4e0a\u5b58\u6863\u6216\u4f20\u8f93\u5230 VM \u670d\u52a1\u5668\uff08\u5982 XenServer \u4e3b\u673a\uff09\uff0c\u53ef\u5728\u8fd9\u91cc\u8fdb\u884c\u89e3\u538b\u7f29\u548c\u6267\u884c\u3002  XVA \u662f\u4e00\u79cd\u4e0d\u4f9d\u8d56\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\u7684\u6253\u5305\u683c\u5f0f\uff1b\u53ef\u4ee5\u521b\u5efa\u7b80\u5355\u5de5\u5177\u6765\u5728\u4efb\u4f55\u5176\u4ed6\u5e73\u53f0\u4e0a\u5b9e\u4f8b\u5316 XVA VM\u3002 XVA \u4e0d\u6307\u5b9a\u4efb\u4f55\u7279\u5b9a\u8fd0\u884c\u65f6\u683c\u5f0f\uff1b\u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06\u78c1\u76d8\u5b9e\u4f8b\u5316\u4e3a\u6587\u4ef6\u6620\u50cf\u3001LVM \u5377\u3001QCoW \u6620\u50cf\u3001VMDK \u6216 VHD \u6620\u50cf\u3002 \u53ef\u4ee5\u5bf9 XVA VM \u8fdb\u884c\u4efb\u610f\u6b21\u6570\u7684\u5b9e\u4f8b\u5316\uff0c\u6bcf\u6b21\u5b9e\u4f8b\u5316\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u8fd0\u884c\u65f6\u683c\u5f0f\u3002  XVA \u4e0d\u80fd\uff1a    \u6307\u5b9a\u4efb\u4f55\u7279\u5b9a\u5e8f\u5217\u5316\u6216\u4f20\u8f93\u683c\u5f0f    \u63d0\u4f9b\u5b89\u88c5\u65f6\u81ea\u5b9a\u4e49 VM\uff08\u6216\u6a21\u677f\uff09\u7684\u4efb\u4f55\u673a\u5236    \u89e3\u51b3\u5b89\u88c5\u540e\u5982\u4f55\u5347\u7ea7 VM    \u5b9a\u4e49\u7528\u4f5c\u8bbe\u5907\u7684\u591a\u4e2a VM \u5982\u4f55\u8fdb\u884c\u901a\u4fe1    \u8fd9\u4e9b\u95ee\u9898\u5168\u90e8\u7531\u76f8\u5173\u7684\u5f00\u653e\u5f0f\u865a\u62df\u8bbe\u5907\u89c4\u8303\u89e3\u51b3\u3002  XVA \u662f\u81f3\u5c11\u5305\u542b\u4e00\u4e2a ova.xml \u6587\u4ef6\u7684\u76ee\u5f55\u3002 \u6b64\u6587\u4ef6\u63cf\u8ff0 XVA \u4e2d\u5305\u542b\u7684 VM\uff0c\u5c06\u5728 3.2 \u8282\u4e2d\u4ecb\u7ecd\u3002\u78c1\u76d8\u5b58\u50a8\u5728\u5b50\u76ee\u5f55\u4e2d\uff0c\u5e76\u901a\u8fc7 ova.xml \u8fdb\u884c\u5f15\u7528\u3002 \u78c1\u76d8\u6570\u636e\u7684\u683c\u5f0f\u7a0d\u540e\u5c06\u5728 3.3 \u8282\u4e2d\u4ecb\u7ecd\u3002  \u5728\u672c\u7ae0\u7684\u5176\u4ed6\u90e8\u5206\u4e2d\u5c06\u4f1a\u4f7f\u7528\u4ee5\u4e0b\u672f\u8bed\uff1a    HVM\uff1a\u672a\u4fee\u6539\u7684\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7684\u4e00\u79cd\u8fd0\u884c\u6a21\u5f0f\uff0c\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\u9700\u8981\u501f\u52a9\u786c\u4ef6\u4e2d\u7684\u865a\u62df\u5316\u652f\u6301\u3002    PV\uff1a\u7ecf\u8fc7\u7279\u6b8a\u4fee\u6539\u7684\u201c\u534a\u865a\u62df\u5316\u201d\u5185\u6838\u57fa\u4e8e\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\u663e\u5f0f\u8fd0\u884c\u7684\u4e00\u79cd\u6a21\u5f0f\uff0c\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\u4e0d\u9700\u8981\u5bf9\u865a\u62df\u5316\u63d0\u4f9b\u786c\u4ef6\u652f\u6301\u3002    \u201cova.xml\u201d \u6587\u4ef6\u5305\u542b\u4ee5\u4e0b\u5143\u7d20\uff1a  appliance   version= 0.1   \u5c5e\u6027\u201cversion\u201d\u4e2d\u7684\u6570\u5b57\u8868\u793a\u6784\u5efa XVA \u7684\u6b64\u89c4\u8303\u7684\u7248\u672c\uff1b\u5728\u672c\u4f8b\u4e2d\u4e3a 0.1\u3002\u5728  appliance  \u4e2d\u53ea\u6709\u4e00\u4e2a  vm \uff1a\uff08\u5728 OVA \u89c4\u8303\u4e2d\uff0c\u5141\u8bb8\u591a\u4e2a  vm \uff09  vm   name= name   \u6bcf\u4e2a   \u5143\u7d20\u63cf\u8ff0\u4e00\u4e2a VM\u3002\u201cname\u201d\u5c5e\u6027\u4ec5\u4f9b\u5c06\u6765\u5728\u5185\u90e8\u4f7f\u7528\uff0c\u4e14\u5728 ova.xml \u6587\u4ef6\u4e2d\u5fc5\u987b\u662f\u552f\u4e00\u7684\u3002\u201cname\u201d\u5c5e\u6027\u53ef\u4ee5\u662f\u4efb\u4f55\u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u4e32\u3002\u6bcf\u4e2a   \u6807\u8bb0\u5305\u542b\u4ee5\u4e0b\u5fc5\u9700\u5143\u7d20\uff1a  label ... text ...  /label   \u663e\u793a\u5728 UI \u4e2d\u7684 VM \u7684\u77ed\u540d\u79f0\u3002  shortdesc  ... description ...  /shortdesc   \u663e\u793a\u5728 UI \u4e2d\u7684 VM \u7684\u8bf4\u660e\u3002\u8bf7\u6ce8\u610f\uff0c\u5bf9\u4e8e  label  \u548c  shortdesc  \u5185\u5bb9\uff0c\u5c06\u5ffd\u7565\u524d\u5bfc\u7a7a\u683c\u548c\u5c3e\u968f\u7a7a\u683c\u3002  config   mem_set= 268435456   vcpus= 1 /   \u8be5   \u5143\u7d20\u5305\u542b\u63cf\u8ff0 VM \u5e94\u5177\u6709\u7684\u5185\u5b58\u91cf\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u7684\u5c5e\u6027 (mem_set) \u548c\u63cf\u8ff0\u5e94\u5177\u6709\u7684 CPU \u6570\u7684\u5c5e\u6027 (VCPU)\u3002  \u6bcf\u4e2a   \u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a\u8868\u793a\u5757\u8bbe\u5907\u7684  vbd  \u5143\u7d20\uff0c\u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a  vbd   device= sda   function= root   mode= w   vdi= vdi_sda /   \u8fd9\u4e9b\u5c5e\u6027\u5177\u6709\u4ee5\u4e0b\u542b\u4e49\uff1a    device \u5411 VM \u516c\u5f00\u7684\u7269\u7406\u8bbe\u5907\u7684\u540d\u79f0\u3002\u5bf9\u4e8e Linux \u6765\u5bbe\u7cfb\u7edf\uff0c\u4f7f\u7528\u201csd[a-z]\u201d\uff1b\u5bf9\u4e8e Windows \u6765\u5bbe\u7cfb\u7edf\uff0c\u4f7f\u7528\u201chd[a-d]\u201d\u3002    function \u5982\u679c\u6807\u8bb0\u4e3a\u201croot\u201d\uff0c\u5219\u6b64\u78c1\u76d8\u5c06\u7528\u4e8e\u5f15\u5bfc\u6765\u5bbe\u7cfb\u7edf\u3002 \uff08\u9700\u7279\u522b\u6ce8\u610f\uff0c\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u5b58\u5728 Linux \u6839\u76ee\u5f55\uff0c\u5373 / filesystem\uff09\u53ea\u5e94\u5c06\u4e00\u4e2a\u8bbe\u5907\u6807\u8bb0\u4e3a\u201croot\u201d\u3002 \u8bf7\u53c2\u9605\u4ecb\u7ecd\u201cVM \u5f15\u5bfc\u201d\u7684 3.4 \u8282\u3002 \u5c06\u5ffd\u7565\u4efb\u4f55\u5176\u4ed6\u5b57\u7b26\u4e32\u3002    mode \u201cw\u201d\u6216\u201cro\u201d\uff0c\u5206\u522b\u8868\u793a\u8bbe\u5907\u5904\u4e8e\u8bfb/\u5199\u6216\u53ea\u8bfb\u72b6\u6001\u3002    vdi \u78c1\u76d8\u6620\u50cf\u7684\u540d\u79f0\uff08\u7531\u4e00\u4e2a   \u5143\u7d20\u8868\u793a\uff09\uff0c\u6b64\u5757\u8bbe\u5907\u8fde\u63a5\u5230\u8be5\u78c1\u76d8\u6620\u50cf    \u6bcf\u4e2a  vm  \u53ef\u4ee5\u5305\u542b\u53ef\u9009\u7684  hacks  \u90e8\u5206\uff0c\u4f8b\u5982\uff1a hacks is_hvm=\"false\" kernel_boot_cmdline=\"root=/dev/sda1 ro\"/   hacks  \u5143\u7d20\u5b58\u5728\u4e8e XenServer \u751f\u6210\u7684 XVA \u6587\u4ef6\u4e2d\uff0c\u4f46\u5728\u672a\u6765\u5c06\u4f1a\u5220\u9664\u3002 \u5c5e\u6027\u201cis_hvm\u201d\u4e3a\u201ctrue\u201d\u6216\u201cfalse\u201d\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e VM \u662f\u5426\u5e94\u5728 HVM \u4e2d\u5f15\u5bfc\u3002 \u4f7f\u7528 pygrub \u5f15\u5bfc\u6765\u5bbe\u7cfb\u7edf\u65f6\uff0c\u201ckernel_boot_cmdline\u201d\u5305\u542b\u5176\u4ed6\u5185\u6838\u547d\u4ee4\u884c\u53c2\u6570\u3002  \u9664  vm  \u5143\u7d20\u5916\uff0c appliance  \u8fd8\u5c06\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a  vdi  \u5143\u7d20\uff0c\u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a  vdi   name= vdi_sda   size= 5368709120   source= file://sda  type= dir-gzipped-chunks   \u6bcf\u4e2a  vdi  \u90fd\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u78c1\u76d8\u6620\u50cf\u3002\u8fd9\u4e9b\u5c5e\u6027\u5177\u6709\u4ee5\u4e0b\u542b\u4e49\uff1a  name\uff1aVDI \u7684\u540d\u79f0\uff0c\u7531  vbd  \u5143\u7d20\u7684 vdi \u5c5e\u6027\u5f15\u7528\u3002\u5141\u8bb8\u4f7f\u7528\u4efb\u4f55\u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u4e32\u3002  size\uff1a\u6240\u9700\u6620\u50cf\u7684\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09  source\uff1a\u63cf\u8ff0\u5728\u54ea\u91cc\u67e5\u627e\u6620\u50cf\u6570\u636e\u7684 URI\uff0c\u5f53\u524d\u4ec5\u5141\u8bb8\u4f7f\u7528 file:// URI\uff0c\u5e76\u4e14\u5fc5\u987b\u63cf\u8ff0\u4e0e\u5305\u542b ova.xml \u7684\u76ee\u5f55\u76f8\u5bf9\u5e94\u7684\u8def\u5f84  type\uff1a\u63cf\u8ff0\u78c1\u76d8\u6570\u636e\u7684\u683c\u5f0f\uff08\u8bf7\u53c2\u9605 3.3 \u8282\uff09  \u6307\u5b9a\u4e86\u5177\u6709\u7c7b\u578b\u201cdir-gzipped-chunks\u201d\u7684\u5355\u4e2a\u78c1\u76d8\u6620\u50cf\u7f16\u7801\uff1a\u6bcf\u4e2a\u6620\u50cf\u7531\u5305\u542b\u6587\u4ef6\u5e8f\u5217\u7684\u76ee\u5f55\u8868\u793a\uff0c\u5982\u4e0b\u6240\u793a\uff1a  -rw-r--r-- 1 dscott xendev 458286013    Sep 18 09:51 chunk000000000.gz\n-rw-r--r-- 1 dscott xendev 422271283    Sep 18 09:52 chunk000000001.gz\n-rw-r--r-- 1 dscott xendev 395914244    Sep 18 09:53 chunk000000002.gz\n-rw-r--r-- 1 dscott xendev 9452401      Sep 18 09:53 chunk000000003.gz\n-rw-r--r-- 1 dscott xendev 1096066      Sep 18 09:53 chunk000000004.gz\n-rw-r--r-- 1 dscott xendev 971976       Sep 18 09:53 chunk000000005.gz\n-rw-r--r-- 1 dscott xendev 971976       Sep 18 09:53 chunk000000006.gz\n-rw-r--r-- 1 dscott xendev 971976       Sep 18 09:53 chunk000000007.gz\n-rw-r--r-- 1 dscott xendev 573930       Sep 18 09:53 chunk000000008.gz  \u6bcf\u4e2a\u6587\u4ef6\uff08\u540d\u4e3a \u201cchunk-XXXXXXXXX.gz\u201d \uff09\u90fd\u662f\u51c6\u786e\u5305\u542b 1e9 \u5b57\u8282\uff081 GB\uff0c\u4e0d\u662f 1 GiB\uff09\u539f\u59cb\u5757\u6570\u636e\u7684 gzip \u538b\u7f29\u6587\u4ef6\u3002 \u9009\u62e9\u8f83\u5c0f\u7684\u6587\u4ef6\u5927\u5c0f\u662f\u4e3a\u4e86\u786e\u4fdd\u4e0d\u8d85\u8fc7\u51e0\u79cd\u6587\u4ef6\u7cfb\u7edf\u7684\u6700\u5927\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u3002 \u5982\u679c\u5148\u5c06\u8fd9\u4e9b\u6587\u4ef6\u8fdb\u884c\u89e3\u538b\uff0c\u7136\u540e\u518d\u8fde\u63a5\u5230\u4e00\u8d77\uff0c\u5c06\u6062\u590d\u539f\u59cb\u6620\u50cf\u3002  XenServer \u63d0\u4f9b\u4e86\u4e24\u79cd\u5f15\u5bfc VM \u7684\u673a\u5236\uff1a(i) \u4f7f\u7528\u901a\u8fc7 pygrub \u63d0\u53d6\u7684\u534a\u865a\u62df\u5316\u5185\u6838\uff1b(ii) \u4f7f\u7528 HVM\u3002 \u5f53\u524d\u5b9e\u73b0\u5728  hacks  \u90e8\u5206\u4e2d\u4f7f\u7528\u201cis_hvm\u201d\u6807\u5fd7\u6765\u51b3\u5b9a\u8981\u4f7f\u7528\u54ea\u79cd\u673a\u5236\u3002  \u672c\u8282\u7684\u5176\u4f59\u5185\u5bb9\u4ecb\u7ecd\u4e00\u4e2a\u6253\u5305\u4e3a XVA \u7684\u975e\u5e38\u7b80\u5355\u7684 Debian VM\u3002 \u6b64 VM \u6709\u4e24\u4e2a\u78c1\u76d8\uff1a\u4e00\u4e2a\u78c1\u76d8\u5927\u5c0f\u4e3a 5120 MiB\uff0c\u7528\u4e8e\u6839\u6587\u4ef6\u7cfb\u7edf\u548c\u4f7f\u7528 pygrub \u5f15\u5bfc\u6765\u5bbe\u7cfb\u7edf\uff1b\u53e6\u4e00\u4e2a\u78c1\u76d8\u5927\u5c0f\u4e3a 512 MiB\uff0c\u7528\u4e8e\u4ea4\u6362\u3002 \u6b64 VM \u7684\u5185\u5b58\u91cf\u4e3a 512MiB \u5e76\u4f7f\u7528\u4e00\u4e2a\u865a\u62df CPU\u3002  \u5728\u6700\u9ad8\u7ea7\u522b\uff0c\u8be5\u7b80\u5355 Debian VM \u7531\u4e00\u4e2a\u76ee\u5f55\u8868\u793a\uff1a  $ ls -l\ntotal 4\ndrwxr-xr-x  3  dscott xendev  4096  Oct  24  09:42 very simple Debian VM  \u4e3b XVA \u76ee\u5f55\u4e2d\u5305\u542b\u4e24\u4e2a\u5b50\u76ee\u5f55\uff08\u6bcf\u4e2a\u78c1\u76d8\u4e00\u4e2a\uff09\u548c\u4e00\u4e2a\u6587\u4ef6 ova.xml\uff1a  $ ls -l very \\  simple \\  Debian \\  VM/\ntotal 8\n-rw-r--r--  1  dscott xendev  1016  Oct  24  09:42 ova.xml\ndrwxr-xr-x  2  dscott xendev  4096  Oct  24  09:42 sda\ndrwxr-xr-x  2  dscott xendev  4096  Oct  24  09:53 sdb  \u5404\u4e2a\u78c1\u76d8\u5b50\u76ee\u5f55\u4e2d\u90fd\u6709\u4e00\u7ec4\u6587\u4ef6\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6587\u4ef6\u90fd\u5305\u542b\u4f7f\u7528 gzip \u538b\u7f29\u7684 1 GB \u5927\u5c0f\u7684\u539f\u59cb\u78c1\u76d8\u5757\u6570\u636e\uff1a  $ ls -l very \\  simple \\  Debian \\  VM/sda/\ntotal 2053480\n-rw-r--r--  1  dscott xendev  202121645  Oct  24  09:43 chunk-000000000.gz\n-rw-r--r--  1  dscott xendev  332739042  Oct  24  09:45 chunk-000000001.gz\n-rw-r--r--  1  dscott xendev  401299288  Oct  24  09:48 chunk-000000002.gz\n-rw-r--r--  1  dscott xendev  389585534  Oct  24  09:50 chunk-000000003.gz\n-rw-r--r--  1  dscott xendev  624567877  Oct  24  09:53 chunk-000000004.gz\n-rw-r--r--  1  dscott xendev  150351797  Oct  24  09:54 chunk-000000005.gz\n$ ls -l very \\  simple \\  Debian \\  VM/sdb\ntotal 516\n-rw-r--r--  1  dscott xendev  521937  Oct  24  09:54 chunk-000000000.gz  \u8be5\u7b80\u5355 Debian VM \u793a\u4f8b\u5c06\u5305\u542b\u4e00\u4e2a XVA \u6587\u4ef6\uff0c\u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a  ?xml version= 1.0  ?  appliance   version= 0.1 \n   vm   name= vm \n   label \n  very simple Debian VM\n   /label \n   shortdesc \n  the description field can contain any valid UTF-8\n   /shortdesc \n   config   mem_set= 536870912   vcpus= 1 / \n   hacks   is_hvm= false   kernel_boot_cmdline= root=/dev/sda1 ro  \n   !--\u8fd9\u4e00\u90e8\u5206\u662f\u4e34\u65f6\u6027\u7684\uff0c\u5728\u5c06\u6765\u4f1a\u88ab\u5ffd\u7565\u3002 \u5c5e\u6027  is_hvm\uff08\u201ctrue\u201d\u6216\u201cfalse\u201d\uff09\u6307\u793a\u662f\u5426\u5c06\u4ee5 HVM \u6a21\u5f0f\u5f15\u5bfc VM\u3002 \u5c06\u6765\u4f1a\u81ea\u52a8\u68c0\u6d4b\u8fd9\u4e00\u70b9\u3002 \u5c5e\u6027 kernel_boot_cmdline \u5305\u542b\u5185\u6838\u547d\u4ee4\u884c\uff0c\u7528\u4e8e\u6ca1\u6709\u5408\u9002\u7684 grub menu.lst \u65f6\u7684\u60c5\u51b5\u3002 \u5c06\u6765\uff0c\u5f15\u5bfc\u5c06\u53ea\u4f7f\u7528 pygrub\u3002-- \n   /hacks \n   vbd   device= sda   function= root   mode= w   vdi= vdi_sda / \n   vbd   device= sdb   function= swap   mode= w   vdi= vdi_sdb / \n   /vm \n   vdi   name= vdi_sda   size= 5368709120   source= file://sda   type= dir-gzippedchunks / \n   vdi   name= vdi_sdb   size= 536870912   source= file://sdb   type= dir-gzippedchunks /  /appliance", 
            "title": "Xen Virtual Appliance (XVA) VM \u5bfc\u5165\u683c\u5f0f"
        }, 
        {
            "location": "/#xml-rpc", 
            "text": "", 
            "title": "XML-RPC \u8bf4\u660e"
        }, 
        {
            "location": "/#_12", 
            "text": "API \u5728\u5904\u7406\u65e5\u671f\u65f6\u95f4\u65b9\u9762\u4e0e XML-RPC \u89c4\u8303\u6709\u6240\u4e0d\u540c\u3002API \u5c06\u201cZ\u201d\u9644\u52a0\u5230\u65e5\u671f\u65f6\u95f4\u5b57\u7b26\u4e32\u7684\u672b\u5c3e\uff0c\u8fd9\u662f\u4e3a\u4e86\u6307\u793a\u4ee5 UTC \u8868\u793a\u65f6\u95f4\u3002", 
            "title": "\u65e5\u671f\u65f6\u95f4"
        }, 
        {
            "location": "/#_13", 
            "text": "\u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u4eec\u5df2\u7c97\u7565\u6982\u62ec\u4e86 API \u53ca\u5176\u5bf9\u8c61\u6a21\u578b\u3002 \u672c\u8282\u7684\u76ee\u7684\u4e0d\u662f\u63d0\u4f9b\u8be6\u7ec6\u7684 API \u8bed\u4e49\uff0c\u800c\u53ea\u662f\u4e3a\u60a8\u63d0\u4f9b\u8db3\u591f\u7684\u80cc\u666f\u77e5\u8bc6\uff0c\u5e2e\u52a9\u60a8\u5f00\u59cb\u9605\u8bfb\u4e0b\u4e00\u7ae0\u7684\u4ee3\u7801\u793a\u4f8b\u5e76\u719f\u6089\u5185\u5bb9\u6bd4\u8f83\u8be6\u5c3d\u7684\u300aXenServer API \u53c2\u8003\u300b\u6587\u6863\u3002  \u60a8\u53ef\u4ee5\u4ece\u5f88\u591a\u5730\u65b9\u67e5\u627e\u8be6\u7ec6\u4fe1\u606f\uff1a  \u300aXenServer \u7ba1\u7406\u5458\u6307\u5357\u300b\u5305\u542b xe CLI \u7684\u6982\u8ff0\u3002 \u7531\u4e8e\u8bb8\u591a xe \u547d\u4ee4\u90fd\u5efa\u7acb\u5728 API \u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u56e0\u6b64\u6700\u597d\u4ece\u4f7f\u7528 xe \u5f00\u59cb\u4e86\u89e3\u672c\u7ae0\u4ecb\u7ecd\u7684 API \u5bf9\u8c61\u6a21\u578b\u3002  \u4e0b\u4e00\u7ae0\u4e2d\u7684\u4ee3\u7801\u793a\u4f8b\u63d0\u4f9b\u4e86\u4e00\u4e9b\u91c7\u7528\u591a\u79cd\u5ba2\u6237\u7aef\u8bed\u8a00\u7f16\u7801\u7684 API \u7684\u5177\u4f53\u5b9e\u4f8b\u3002  \u300aXenServer API \u53c2\u8003\u300b \u6587\u6863\u6bd4\u8f83\u8be6\u7ec6\u5730\u4ecb\u7ecd\u4e86 API \u8bed\u4e49\uff0c\u5e76\u4ecb\u7ecd\u4e86\u76f8\u5173 XML/RPC \u6d88\u606f\u7684\u683c\u5f0f\u3002  XenServer \u4e3b\u673a dom0 \u672c\u8eab\u4e2d\u5b58\u5728\u4e00\u4e9b\u4f7f\u7528 API \u7684\u811a\u672c\u3002 \u4f8b\u5982\uff0c /opt/xensource/libexec/shutdown  \u662f\u4e00\u4e2a\u53ef\u5f7b\u5e95\u5173\u95ed VM \u7684 python \u7a0b\u5e8f\u3002 \u5f53\u5173\u95ed\u4e3b\u673a\u672c\u8eab\u65f6\u8c03\u7528\u6b64\u811a\u672c\u3002", 
            "title": "\u5176\u4ed6\u53c2\u8003\u6765\u6e90"
        }, 
        {
            "location": "/#api_1", 
            "text": "\u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728\u771f\u5b9e\u7a0b\u5e8f\u4e2d\u4f7f\u7528 XenServer \u7ba1\u7406 API \u6765\u7ba1\u7406 XenServer \u4e3b\u673a\u548c VM\u3002\u672c\u7ae0\u9996\u5148\u6982\u8ff0\u5178\u578b\u7684\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u5e76\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 API \u6267\u884c\u5e38\u89c1\u4efb\u52a1\u3002 \u63d0\u4f9b\u7684\u793a\u4f8b\u4ee3\u7801\u6bb5\u4f7f\u7528 python \u8bed\u6cd5\uff0c\u4f46\u4f7f\u7528\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u7684\u7b49\u6548\u4ee3\u7801\u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\u3002 \u4e4b\u540e\u5c06\u8ba8\u8bba\u8bed\u8a00\u7ed1\u5b9a\u672c\u8eab\uff0c\u5728\u672c\u7ae0\u672b\u5c3e\u4ecb\u7ecd\u4e24\u4e2a\u5b8c\u6574\u793a\u4f8b\u3002", 
            "title": "\u4f7f\u7528 API"
        }, 
        {
            "location": "/#_14", 
            "text": "\u672c\u8282\u4ecb\u7ecd\u4f7f\u7528 XenServer \u7ba1\u7406 API \u7684\u5178\u578b\u5e94\u7528\u7a0b\u5e8f\u7684\u7ed3\u6784\u3002 \u5927\u591a\u6570\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u9996\u5148\u8fde\u63a5\u5230 XenServer \u4e3b\u673a\u5e76\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff08\u4f8b\u5982\uff0c\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\u3002 \u5047\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u6210\u529f\uff0c\u670d\u52a1\u5668\u5c06\u521b\u5efa\u4e00\u4e2a\u201c\u4f1a\u8bdd\u201d\u5bf9\u8c61\u5e76\u5c06\u5f15\u7528\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002 \u6b64\u5f15\u7528\u5c06\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u6240\u6709\u540e\u7eed API \u8c03\u7528\u3002 \u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u641c\u7d22\u5176\u4ed6\u6709\u7528\u5bf9\u8c61\uff08\u4f8b\u5982\uff0cXenServer \u4e3b\u673a\u3001VM \u7b49\uff09\u7684\u5f15\u7528\u5e76\u5728\u5176\u4e0a\u8c03\u7528\u64cd\u4f5c\u3002 \u53ef\u540c\u6b65\u6216\u5f02\u6b65\u8c03\u7528\u64cd\u4f5c\uff1b\u7279\u6b8a\u4efb\u52a1\u5bf9\u8c61\u8868\u793a\u5f02\u6b65\u64cd\u4f5c\u7684\u72b6\u6001\u548c\u8fdb\u5ea6\u3002 \u4e0b\u5217\u5404\u8282\u8be6\u7ec6\u4ecb\u7ecd\u6240\u6709\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u5143\u7d20\u3002", 
            "title": "\u5256\u6790\u5178\u578b\u5e94\u7528\u7a0b\u5e8f"
        }, 
        {
            "location": "/#_15", 
            "text": "\u53ef\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u4f20\u8f93\u53d1\u51fa API \u8c03\u7528\uff1a    \u57fa\u4e8e IP \u7f51\u7edc\u7684\u7aef\u53e3 443 (https) \u4e0a\u7684 SSL \u52a0\u5bc6 TCP    \u57fa\u4e8e\u672c\u5730 Unix \u57df\u5957\u63a5\u5b57\u7684\u7eaf\u6587\u672c\uff1a/var/xapi/xapi    SSL \u52a0\u5bc6\u7684 TCP \u4f20\u8f93\u9002\u7528\u4e8e\u6240\u6709\u4e3b\u673a\u5916\u901a\u4fe1\uff0c\u800c Unix \u57df\u5957\u63a5\u5b57\u53ef\u7528\u4e8e\u76f4\u63a5\u5728 XenServer \u4e3b\u673a\u672c\u8eab\u4e0a\u8fd0\u884c\u7684\u670d\u52a1\u3002 \u5728 SSL \u52a0\u5bc6\u7684 TCP \u4f20\u8f93\u4e2d\uff0c\u6240\u6709 API \u8c03\u7528\u90fd\u5e94\u76f4\u63a5\u5b9a\u5411\u5230\u8d44\u6e90\u6c60\u4e3b\u670d\u52a1\u5668\uff1b\u5426\u5219\uff0c\u5c06\u5bfc\u81f4\u51fa\u73b0 HOST_IS_SLAVE \u9519\u8bef\uff0c\u5176\u4e2d\u5305\u542b\u4ee5\u9519\u8bef\u53c2\u6570\u51fa\u73b0\u7684\u4e3b\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002  \u7531\u4e8e\u6c60\u7684\u4e3b\u670d\u52a1\u5668\u4e3b\u673a\u53ef\u4ee5\u66f4\u6539\uff08\u7279\u522b\u662f\u5f53\u5728\u6c60\u4e2d\u542f\u7528\u4e86\u9ad8\u53ef\u7528\u6027\u65f6\uff09\uff0c\u56e0\u6b64\u5ba2\u6237\u7aef\u5fc5\u987b\u6267\u884c\u4e0b\u5217\u6b65\u9aa4\u4ee5\u68c0\u6d4b\u4e3b\u670d\u52a1\u5668\u4e3b\u673a\u66f4\u6539\u5e76\u6839\u636e\u9700\u8981\u8fde\u63a5\u5230\u65b0\u4e3b\u670d\u52a1\u5668\uff1a  \u5904\u7406\u6c60\u4e3b\u670d\u52a1\u5668\u66f4\u6539    \u8ba2\u9605\u4e3b\u673a\u670d\u52a1\u5668\u5217\u8868\u4e2d\u7684\u66f4\u65b0\u5e76\u7ef4\u62a4\u6c60\u4e2d\u5f53\u524d\u4e3b\u673a\u7684\u5217\u8868    \u5982\u679c\u4e0e\u6c60\u4e3b\u670d\u52a1\u5668\u7684\u8fde\u63a5\u65e0\u54cd\u5e94\uff0c\u5219\u5c1d\u8bd5\u4e0e\u5217\u8868\u4e2d\u7684\u6240\u6709\u4e3b\u673a\u8fdb\u884c\u8fde\u63a5\uff0c\u76f4\u5230\u5176\u4e2d\u4e00\u4e2a\u4e3b\u673a\u53d1\u51fa\u54cd\u5e94    \u53d1\u51fa\u54cd\u5e94\u7684\u7b2c\u4e00\u4e2a\u4e3b\u673a\u5c06\u8fd4\u56de HOST_IS_SLAVE \u9519\u8bef\u6d88\u606f\uff0c\u5176\u4e2d\u5305\u542b\u65b0\u6c60\u4e3b\u670d\u52a1\u5668\u7684\u6807\u8bc6\uff08\u9664\u975e\u8be5\u4e3b\u673a\u4e3a\u65b0\u4e3b\u670d\u52a1\u5668\uff09    \u8fde\u63a5\u5230\u65b0\u4e3b\u670d\u52a1\u5668     \u6ce8\u610f   \u7279\u6b8a\u60c5\u51b5\uff1a\u901a\u8fc7 Unix \u57df\u5957\u63a5\u5b57\u53d1\u9001\u7684\u6240\u6709\u6d88\u606f\u5c06\u900f\u660e\u5730\u8f6c\u53d1\u7ed9\u6b63\u786e\u8282\u70b9\u3002", 
            "title": "\u9009\u62e9\u4e00\u79cd\u4f4e\u7ea7\u522b\u4f20\u8f93"
        }, 
        {
            "location": "/#_16", 
            "text": "\u7edd\u5927\u591a\u6570 API \u8c03\u7528\u91c7\u7528\u4f1a\u8bdd\u5f15\u7528\u4f5c\u4e3a\u5176\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1b\u65e0\u6cd5\u63d0\u4f9b\u6709\u6548\u5f15\u7528\u4f1a\u5bfc\u81f4\u8fd4\u56de SESSION_INVALID \u9519\u8bef\u3002 \u901a\u8fc7\u5411 login_with_password \u51fd\u6570\u63d0\u4f9b\u7528\u6237\u540d\u548c\u5bc6\u7801\u83b7\u53d6\u4f1a\u8bdd\u5f15\u7528\u3002   \u6ce8\u610f   \u7279\u6b8a\u60c5\u51b5\uff1a\u5982\u679c\u6b64\u8c03\u7528\u901a\u8fc7\u672c\u5730 Unix \u57df\u5957\u63a5\u5b57\u6267\u884c\uff0c\u5219\u4f1a\u5ffd\u7565\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5e76\u4e14\u6b64\u8c03\u7528\u59cb\u7ec8\u90fd\u4f1a\u6210\u529f\u3002  \u6bcf\u4e2a\u4f1a\u8bdd\u90fd\u5305\u542b\u4e00\u4e2a\u5173\u8054\u7684\u201clast active\u201d\u65f6\u95f4\u6233\uff0c\u8be5\u65f6\u95f4\u6233\u4f1a\u5728\u6bcf\u6b21\u6267\u884c API \u8c03\u7528\u65f6\u8fdb\u884c\u66f4\u65b0\u3002 \u670d\u52a1\u5668\u8f6f\u4ef6\u5f53\u524d\u5177\u6709 500 \u4e2a\u6d3b\u52a8\u4f1a\u8bdd\u7684\u5185\u7f6e\u9650\u5236\uff0c\u5bf9\u4e8e\u67d0\u4e2a\u7ed9\u5b9a username \u6216 originator\uff0c\u5982\u679c\u8d85\u8fc7\u6b64\u9650\u5236\uff0c\u5c06\u5220\u9664\u201clast active\u201d\u5b57\u6bb5\u6700\u65e9\u7684\u4f1a\u8bdd\u3002 \u6b64\u5916\uff0c\u8fd8\u5c06\u5220\u9664\u201clast active\u201d\u5b57\u6bb5\u65e9\u4e8e 24 \u5c0f\u65f6\u7684\u6240\u6709\u4f1a\u8bdd\u3002 \u56e0\u6b64\uff0c\u8bf7\u52a1\u5fc5\uff1a    \u5728\u767b\u5f55\u65f6\u6307\u5b9a\u76f8\u5e94\u7684 originator\uff1b\u5e76\u4e14    \u8bb0\u5f97\u6ce8\u9500\u6d3b\u52a8\u4f1a\u8bdd\u4ee5\u907f\u514d\u5c06\u5176\u6cc4\u9732\uff1b\u5e76\u4e14    \u5728\u9047\u5230 SESSION_INVALID \u9519\u8bef\u65f6\u51c6\u5907\u518d\u6b21\u767b\u5f55\u5230\u670d\u52a1\u5668\u3002    \u5728\u4ee5\u4e0b Python \u6bb5\u4e2d\uff0c\u5efa\u7acb\u4e86\u901a\u8fc7 Unix \u57df\u5957\u63a5\u5b57\u7684\u8fde\u63a5\u4e14\u521b\u5efa\u4e86\u4e00\u4e2a\u4f1a\u8bdd\uff1a  import   XenAPI \n     session   =   XenAPI . xapi_local () \n     try : \n         session . xenapi . login_with_password ( root ,   ,   2.3 ,   My Widget v0.1 ) \n         ... \n     finally : \n         session . xenapi . session . logout ()", 
            "title": "\u8eab\u4efd\u9a8c\u8bc1\u548c\u4f1a\u8bdd\u5904\u7406"
        }, 
        {
            "location": "/#_17", 
            "text": "\u5bf9\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u4e0b\u4e00\u6b65\u662f\u83b7\u53d6\u5bf9\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u4ee5\u4fbf\u67e5\u8be2\u5176\u72b6\u6001\u6216\u5728\u5176\u4e0a\u8c03\u7528\u64cd\u4f5c\u3002 \u6240\u6709\u5bf9\u8c61\u90fd\u5305\u62ec\u4e00\u7ec4\u201c\u9690\u5f0f\u201d\u6d88\u606f\uff0c\u8fd9\u4e9b\u6d88\u606f\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a    get_by_name_label\uff1a\u8fd4\u56de\u5177\u6709\u7279\u5b9a\u6807\u7b7e\u7684\u7279\u5b9a\u7c7b\u7684\u6240\u6709\u5bf9\u8c61\u5217\u8868\uff1b    get_by_uuid\uff1a\u8fd4\u56de\u7531\u5176 UUID \u6307\u5b9a\u7684\u5355\u4e2a\u5bf9\u8c61\uff1b    get_all\uff1a\u8fd4\u56de\u4e00\u7ec4\u5bf9\u7279\u5b9a\u7c7b\u7684\u6240\u6709\u5bf9\u8c61\u7684\u5f15\u7528\uff1b    get_all_records\uff1a\u8fd4\u56de\u5bf9\u7279\u5b9a\u7c7b\u7684\u6bcf\u4e2a\u5bf9\u8c61\u7684\u8bb0\u5f55\u7684\u5f15\u7528\u6620\u5c04\u3002    \u4f8b\u5982\uff0c\u5217\u51fa\u6240\u6709\u4e3b\u673a\uff1a  hosts = session.xenapi.host.get_all()  \u67e5\u627e\u540d\u4e3a\u201cmy first VM\u201d\u7684\u6240\u6709 VM\uff1a  vms = session.xenapi.VM.get_by_name_label('my first VM')   \u6ce8\u610f   \u65e0\u6cd5\u4fdd\u8bc1\u5bf9\u8c61 name_label \u5b57\u6bb5\u662f\u552f\u4e00\u7684\uff0c\u56e0\u6b64 get_by_name_label API \u8c03\u7528\u4f1a\u8fd4\u56de\u4e00\u7ec4\u5f15\u7528\u800c\u4e0d\u662f\u4e00\u4e2a\u5f15\u7528\u3002  \u9664\u4e86\u524d\u9762\u4ecb\u7ecd\u7684\u67e5\u627e\u5bf9\u8c61\u7684\u65b9\u6cd5\u4ee5\u5916\uff0c\u5927\u591a\u6570\u5bf9\u8c61\u5728\u5b57\u6bb5\u4e2d\u8fd8\u5305\u542b\u5bf9\u5176\u4ed6\u5bf9\u8c61\u7684\u5f15\u7528\u3002 \u4f8b\u5982\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u4ee5\u4e0b\u5185\u5bb9\u67e5\u627e\u5728\u7279\u6b8a\u4e3b\u673a\u4e0a\u8fd0\u884c\u7684 VM \u7ec4\uff1a  vms = session.xenapi.host.get_resident_VMs(host)", 
            "title": "\u67e5\u627e\u5bf9\u6709\u7528\u5bf9\u8c61\u7684\u5f15\u7528"
        }, 
        {
            "location": "/#_18", 
            "text": "\u83b7\u53d6\u5bf9\u8c61\u5f15\u7528\u540e\uff0c\u53ef\u4ee5\u5728\u5176\u4e0a\u8c03\u7528\u64cd\u4f5c\u3002\u4f8b\u5982\uff0c\u542f\u52a8 VM\uff1a  session.xenapi.VM.start(vm, False, False)  \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709 API \u8c03\u7528\u90fd\u662f\u540c\u6b65\u7684\uff0c\u5728\u64cd\u4f5c\u5b8c\u6210\u6216\u5931\u8d25\u4e4b\u524d\uff0c\u4e0d\u4f1a\u8fd4\u56de\u3002\u4f8b\u5982\uff0c\u5728\u4f7f\u7528 VM.start \u7684\u60c5\u51b5\u4e0b\uff0c\u5728 VM \u542f\u52a8\u5f15\u5bfc\u4e4b\u524d\uff0c\u8be5\u8c03\u7528\u4e0d\u4f1a\u8fd4\u56de\u3002   \u6ce8\u610f   \u5728 VM.start \u8c03\u7528\u8fd4\u56de\u65f6\uff0cVM \u5c06\u8fdb\u884c\u5f15\u5bfc\u3002 \u8981\u786e\u5b9a\u5f15\u5bfc\u4f55\u65f6\u5b8c\u6210\uff0c\u8bf7\u7b49\u5f85\u6765\u5bbe\u7cfb\u7edf\u5185\u7684\u4ee3\u7406\u901a\u8fc7 VM_guest_metrics \u5bf9\u8c61\u62a5\u544a\u5185\u90e8\u7edf\u8ba1\u6570\u636e\u3002", 
            "title": "\u5728\u5bf9\u8c61\u4e0a\u8c03\u7528\u540c\u6b65\u64cd\u4f5c"
        }, 
        {
            "location": "/#_19", 
            "text": "\u4e3a\u4e86\u7b80\u5316\u975e\u5e38\u8017\u65f6\u7684\u7ba1\u7406\u64cd\u4f5c\uff08\u5982 Vm.clone \u548c VM.copy\uff09\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e24\u79cd\u5f62\u5f0f\u7684\u51fd\u6570\uff1a\u540c\u6b65\u51fd\u6570\uff08\u9ed8\u8ba4\uff09\u548c\u5f02\u6b65\u51fd\u6570\u3002 \u6bcf\u4e2a\u5f02\u6b65\u51fd\u6570\u90fd\u4f1a\u8fd4\u56de\u5bf9\u4efb\u52a1\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5176\u4e2d\u5305\u62ec\u6709\u5173\u6b63\u5728\u8fdb\u884c\u7684\u64cd\u4f5c\u7684\u4fe1\u606f\uff0c\u5305\u62ec\uff1a    \u64cd\u4f5c\u662f\u5426\u6302\u8d77    \u64cd\u4f5c\u6210\u529f\u8fd8\u662f\u5931\u8d25    \u64cd\u4f5c\u7684\u8fdb\u5ea6\uff08\u8303\u56f4\u662f 0-1\uff09    \u64cd\u4f5c\u8fd4\u56de\u7684\u7ed3\u679c\u6216\u9519\u8bef\u4ee3\u7801    \u4e00\u4e2a\u60f3\u8981\u8ddf\u8e2a VM.clone \u64cd\u4f5c\u8fdb\u5ea6\u5e76\u663e\u793a\u8fdb\u5ea6\u6761\u7684\u5e94\u7528\u7a0b\u5e8f\u5305\u542b\u7684\u4ee3\u7801\u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a  vm   =   session . xenapi . VM . get_by_name_label ( my vm )  task   =   session . xenapi . Async . VM . clone ( vm )  while   session . xenapi . task . get_status ( task )   ==   pending : \n         progress   =   session . xenapi . task . get_progress ( task ) \n         update_progress_bar ( progress ) \n         time . sleep ( 1 )  session . xenapi . task . destroy ( task )    \u6ce8\u610f   \u8fd0\u884c\u826f\u597d\u7684\u5ba2\u6237\u7aef\u5728\u8bfb\u53d6\u5b8c\u7ed3\u679c\u6216\u9519\u8bef\u65f6\uff0c\u5e94\u8bb0\u5f97\u5220\u9664\u5f02\u6b65\u64cd\u4f5c\u521b\u5efa\u7684\u4efb\u52a1\u3002 \u5982\u679c\u4efb\u52a1\u6570\u8d85\u8fc7\u4e86\u5185\u7f6e\u9608\u503c\uff0c\u5219\u670d\u52a1\u5668\u5c06\u5220\u9664\u6700\u5148\u5b8c\u6210\u7684\u4efb\u52a1\u3002", 
            "title": "\u4f7f\u7528\u4efb\u52a1\u7ba1\u7406\u5f02\u6b65\u64cd\u4f5c"
        }, 
        {
            "location": "/#_20", 
            "text": "\u670d\u52a1\u5668\u5c06\u5728\u6bcf\u6b21\u4fee\u6539\u5bf9\u8c61\u65f6\u751f\u6210\u4e8b\u4ef6\uff08\u4efb\u52a1\u548c\u6307\u6807\u7c7b\u4f8b\u5916\uff09\u3002 \u5ba2\u6237\u7aef\u53ef\u57fa\u4e8e\u6bcf\u4e2a\u7c7b\u8ba2\u9605\u6b64\u4e8b\u4ef6\u6d41\u5e76\u63a5\u6536\u66f4\u65b0\uff0c\u800c\u4e0d\u662f\u91c7\u53d6\u9891\u7e41\u5730\u8f6e\u8be2\u3002 \u4e8b\u4ef6\u5305\u542b\u4e09\u79cd\u7c7b\u578b\uff1a    add - \u521b\u5efa\u67d0\u4e2a\u5bf9\u8c61\u65f6\u751f\u6210\uff1b    del - \u5728\u5373\u5c06\u9500\u6bc1\u67d0\u4e2a\u5bf9\u8c61\u4e4b\u524d\u751f\u6210\uff1b    mod - \u5bf9\u8c61\u7684\u5b57\u6bb5\u66f4\u6539\u65f6\u751f\u6210\u3002    \u4e8b\u4ef6\u8fd8\u5305\u542b\u5355\u8c03\u9012\u589e\u7684 ID\u3001\u5bf9\u8c61\u7684\u7c7b\u540d\u79f0\u548c\u5bf9\u8c61\u72b6\u6001\u7684\u5feb\u7167\uff0c\u8fd9\u76f8\u5f53\u4e8e\u6267\u884c get_record() \u7684\u7ed3\u679c\u3002  \u5ba2\u6237\u7aef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u6ce8\u518c\u4e8b\u4ef6\uff1a\u901a\u8fc7\u7c7b\u540d\u79f0\u5217\u8868\u6216\u7279\u6b8a\u5b57\u7b26\u4e32\u201c*\u201d\u8c03\u7528 event.register()\u3002 \u5ba2\u6237\u7aef\u901a\u8fc7\u6267\u884c event.next() \u6765\u63a5\u6536\u4e8b\u4ef6\uff0c\u8be5\u65b9\u6cd5\u5728\u4e8b\u4ef6\u53ef\u7528\u524d\u5904\u4e8e\u963b\u6b62\u72b6\u6001\u5e76\u8fd4\u56de\u65b0\u4e8b\u4ef6\u3002   \u6ce8\u610f   \u7531\u4e8e\u670d\u52a1\u5668\u4e0a\u6240\u751f\u6210\u4e8b\u4ef6\u961f\u5217\u7684\u957f\u5ea6\u6709\u9650\uff0c\u901f\u5ea6\u5f88\u6162\u7684\u5ba2\u6237\u7aef\u53ef\u80fd\u65e0\u6cd5\u4ee5\u8db3\u591f\u5feb\u7684\u901f\u5ea6\u8bfb\u53d6\u4e8b\u4ef6\uff1b\u5982\u679c\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u4f1a\u8fd4\u56de EVENTS_LOST \u9519\u8bef\u3002 \u4e3a\u4e86\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\uff0c\u5ba2\u6237\u7aef\u5e94\u91cd\u65b0\u6ce8\u518c\u4e8b\u4ef6\u5e76\u68c0\u67e5\u5728\u672a\u6ce8\u518c\u4e8b\u4ef6\u65f6\u662f\u5426\u672a\u6ee1\u8db3\u5b83\u4eec\u6240\u7b49\u5f85\u7684\u6761\u4ef6\u3002  \u4ee5\u4e0b python \u4ee3\u7801\u6bb5\u8bf4\u660e\u5982\u4f55\u6253\u5370\u7cfb\u7edf\u751f\u6210\u7684\u6bcf\u4e2a\u4e8b\u4ef6\u7684\u6458\u8981\uff1a\uff08 Xenserver-SDK/XenServerPython/samples/watch-all-events.py  \u4e2d\u6709\u7c7b\u4f3c\u4ee3\u7801\uff09  fmt =  %8s  %20s  %5s  %s \nsession.xenapi.event.register([ * ])\nwhile True:\n    try:\n        for event in session.xenapi.event.next():\n            name =  (unknown) \n            if  snapshot  in event.keys():\n                snapshot = event[ snapshot ]\n                if  name_label  in snapshot.keys():\n                    name = snapshot[ name_label ]\n            print fmt % (event[ id ], event[ class ], event[ operation ], name)           \n    except XenAPI.Failure, e:\n        if e.details == [  EVENTS_LOST  ]:\n            print  Caught EVENTS_LOST; should reregister", 
            "title": "\u8ba2\u9605\u548c\u4fa6\u542c\u4e8b\u4ef6"
        }, 
        {
            "location": "/#_21", 
            "text": "", 
            "title": "\u8bed\u8a00\u7ed1\u5b9a"
        }, 
        {
            "location": "/#c", 
            "text": "SDK \u5728\u76ee\u5f55 /XenServer-SDK/libxenserver/src \u4e2d\u5305\u542b C \u8bed\u8a00\u7ed1\u5b9a\u6e90\uff0c\u4ee5\u53ca\u7528\u4e8e\u5c06\u6b64\u7ed1\u5b9a\u7f16\u8bd1\u5230\u5e93\u4e2d\u7684 Makefile\u3002 \u6bcf\u4e2a API \u5bf9\u8c61\u90fd\u4e0e\u4e00\u4e2a\u5934\u6587\u4ef6\u76f8\u5173\u8054\uff0c\u8be5\u6587\u4ef6\u4e2d\u5305\u542b\u6240\u6709\u8be5\u5bf9\u8c61\u7684 API \u51fd\u6570\u7684\u58f0\u660e\uff1b\u4f8b\u5982\uff0c\u8c03\u7528 VM \u64cd\u4f5c\u6240\u9700\u8981\u7684\u7c7b\u578b\u5b9a\u4e49\u548c\u51fd\u6570\u90fd\u5305\u542b\u5728 xen_vm.h \u4e2d\u3002  C \u7ed1\u5b9a\u4f9d\u8d56\u9879           \u652f\u6301\u7684\u5e73\u53f0\uff1a  Linux    \u5e93\uff1a  \u6b64\u8bed\u8a00\u7ed1\u5b9a\u4ee5 C \u7a0b\u5e8f\u94fe\u63a5\u7684 libxenserver.so \u7684\u5f62\u5f0f\u751f\u6210\u3002    \u4f9d\u8d56\u9879\uff1a       XML \u5e93\uff08GNU Linux \u4e0a\u7684 libxml2.so\uff09  Curl \u5e93 (libcurl2.so)   |  \u4e0b\u9762\u5217\u51fa\u4e86 C \u7ed1\u5b9a\u968f\u9644\u7684\u7b80\u5355\u793a\u4f8b\uff1a    test_vm_async_migrate\uff1a\u8bf4\u660e\u5982\u4f55\u4f7f\u7528\u5f02\u6b65 API \u8c03\u7528\uff0c\u5c06\u8fd0\u884c\u4e2d\u7684 VM \u4ece\u4ece\u5c5e\u4e3b\u673a\u8fc1\u79fb\u5230\u6c60\u4e3b\u670d\u52a1\u5668\u3002    test_vm_ops\uff1a\u8bf4\u660e\u5982\u4f55\u67e5\u8be2\u4e3b\u673a\u7684\u529f\u80fd\u3001\u521b\u5efa VM \u4ee5\u53ca\u5982\u4f55\u5c06\u5168\u65b0\u7684\u7a7a\u78c1\u76d8\u6620\u50cf\u8fde\u63a5\u5230 VM\uff0c\u7136\u540e\u6267\u884c\u5404\u79cd\u91cd\u65b0\u542f\u52a8\u64cd\u4f5c\uff1b    test_failures\uff1a\u8bf4\u660e\u5982\u4f55\u5c06\u9519\u8bef\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a enum_xen_api_failure\uff0c\u53cd\u4e4b\u4ea6\u7136\uff1b    test_event_handling\uff1a\u8bf4\u660e\u5982\u4f55\u4fa6\u542c\u6709\u5173\u8fde\u63a5\u7684\u4e8b\u4ef6\u3002    test_enumerate\uff1a\u8bf4\u660e\u5982\u4f55\u679a\u4e3e\u5404\u79cd API \u5bf9\u8c61\u3002", 
            "title": "C"
        }, 
        {
            "location": "/#csharp", 
            "text": "C# \u7ed1\u5b9a\u5305\u542b\u5728 XenServer-SDK/XenServer.NET \u76ee\u5f55\u4e2d\uff0c\u5e76\u5305\u542b\u9002\u7528\u4e8e\u5728 Microsoft Visual Studio \u4e0b\u6784\u5efa\u7684\u9879\u76ee\u6587\u4ef6\u3002 \u6bcf\u4e2a API \u5bf9\u8c61\u90fd\u4e0e\u4e00\u4e2a C# \u6587\u4ef6\u76f8\u5173\u8054\uff1b\u4f8b\u5982\uff0c\u5b9e\u73b0 VM \u64cd\u4f5c\u7684\u51fd\u6570\u5305\u542b\u5728 VM.cs \u6587\u4ef6\u4e2d\u3002  C# \u7ed1\u5b9a\u4f9d\u8d56\u9879             \u652f\u6301\u7684\u5e73\u53f0\uff1a  \u5b89\u88c5\u4e86 .NET 4.5 \u7248\u7684 Windows     \u5e93\uff1a  \u6b64\u8bed\u8a00\u7ed1\u5b9a\u4ee5 C# \u7a0b\u5e8f\u94fe\u63a5\u7684\u52a8\u6001\u94fe\u63a5\u5e93 XenServer.dll \u7684\u5f62\u5f0f\u751f\u6210\u3002     \u4f9d\u8d56\u9879\uff1a  XenServer.dll \u9700\u8981\u501f\u52a9 CookComputing.XMLRpcV2.dll \u4e0e xml-rpc \u670d\u52a1\u5668\u901a\u4fe1\u3002 \u6211\u4eec\u63d0\u4f9b\u4e86\u4fee\u8865\u7684 2.1.0.6 \u7248\u672c\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528\u6b64\u7248\u672c\uff0c\u5c3d\u7ba1\u5176\u4ed6\u7248\u672c\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u3002     C# \u7ed1\u5b9a\u968f\u9644\u7684\u4e09\u4e2a\u793a\u4f8b\u5305\u542b\u5728 XenServer-SDK/XneServer.NET/samples \u76ee\u5f55\u4e2d\uff0c\u4f5c\u4e3a XenSdkSample.sln \u89e3\u51b3\u65b9\u6848\u7684\u72ec\u7acb\u9879\u76ee\uff1a    GetVariousRecords\uff1a\u767b\u5f55 XenServer \u4e3b\u673a\uff0c\u663e\u793a\u6709\u5173\u4e3b\u673a\u3001\u5b58\u50a8\u548c\u865a\u62df\u673a\u7684\u4fe1\u606f\uff1b    GetVmRecords\uff1a\u767b\u5f55 XenServer \u4e3b\u673a\uff0c\u5217\u51fa\u6240\u6709 VM \u8bb0\u5f55\uff1b    VmPowerStates\uff1a\u767b\u5f55 XenServer \u4e3b\u673a\uff0c\u67e5\u627e VM\uff0c\u4f7f\u5176\u7ecf\u5386\u5404\u79cd\u7535\u6e90\u72b6\u6001\u3002\u8981\u6c42\u5df2\u7ecf\u5b89\u88c5\u5173\u95ed\u7684 VM \u3002", 
            "title": "csharp"
        }, 
        {
            "location": "/#java", 
            "text": "Java \u7ed1\u5b9a\u5305\u542b\u5728 XenServer-SDK/XenServerJava \u76ee\u5f55\u4e2d\uff0c\u5e76\u5305\u542b\u9002\u7528\u4e8e\u5728 Microsoft Visual Studio \u4e0b\u6784\u5efa\u7684\u9879\u76ee\u6587\u4ef6\u3002 \u6bcf\u4e2a API \u5bf9\u8c61\u90fd\u4e0e\u4e00\u4e2a Java\u6587\u4ef6\u76f8\u5173\u8054\uff1b\u4f8b\u5982\uff0c\u5b9e\u73b0 VM \u64cd\u4f5c\u7684\u51fd\u6570\u5305\u542b\u5728 VM.java \u6587\u4ef6\u4e2d\u3002  Java \u7ed1\u5b9a\u4f9d\u8d56\u9879             \u652f\u6301\u7684\u5e73\u53f0\uff1a  Linux \u548c Windows     \u5e93\uff1a  \u6b64\u8bed\u8a00\u7ed1\u5b9a\u4ee5 Java \u7a0b\u5e8f\u94fe\u63a5\u7684 Java \u5b58\u6863\u6587\u4ef6 xenserver-7.0.jar \u7684\u5f62\u5f0f\u751f\u6210\u3002     \u4f9d\u8d56\u9879\uff1a       xenserver.jar \u9700\u8981\u501f\u52a9 xmlrpc-client-3.1.jar \u4e0e xml-rpc \u670d\u52a1\u5668\u901a\u4fe1\u3002  \u8fd0\u884c\u793a\u4f8b\u9700\u8981 ws-commons-util-1.0.2.jar\u3002   |  \u8fd0\u884c\u4e3b\u6587\u4ef6 XenServer-SDK/XenServerJava/samples/RunTests.java \u5c06\u8fd0\u884c\u5305\u542b\u5728\u540c\u4e00\u76ee\u5f55\u4e2d\u7684\u4e00\u7cfb\u5217\u793a\u4f8b\uff1a    AddNetwork\uff1a\u6dfb\u52a0\u672a\u8fde\u63a5\u5230\u4efb\u4f55 NIC \u7684\u65b0\u5185\u90e8\u7f51\u7edc\uff1b    SessionReuse\uff1a\u8bf4\u660e\u5982\u4f55\u5728\u591a\u4e2a\u8fde\u63a5\u4e4b\u95f4\u5171\u4eab\u4f1a\u8bdd\u5bf9\u8c61\uff1b    AsyncVMCreate\uff1a\u4ee5\u5f02\u6784\u65b9\u5f0f\u57fa\u4e8e\u5185\u7f6e\u6a21\u677f\u521b\u5efa\u65b0 VM\uff0c\u7136\u540e\u542f\u52a8\u5e76\u505c\u6b62\u5b83\uff1b    VdiAndSrOps\uff1a\u6267\u884c\u5404\u79cd SR \u548c VDI \u6d4b\u8bd5\uff0c\u5305\u62ec\u521b\u5efa\u865a\u62df SR\uff1b    CreateVM\uff1a\u5229\u7528\u7f51\u7edc\u548c DVD \u9a71\u52a8\u5668\uff0c\u5728\u9ed8\u8ba4 SR \u4e0a\u521b\u5efa VM\uff1b    DeprecatedMethod\uff1a\u6d4b\u8bd5\u8c03\u7528\u88ab\u5f03\u7528\u7684 API \u65b9\u6cd5\u65f6\u662f\u5426\u663e\u793a\u8b66\u544a\uff1b    GetAllRecordsOfAllTypes\uff1a\u68c0\u7d22\u6240\u6709\u5bf9\u8c61\u7c7b\u578b\u7684\u6240\u6709\u8bb0\u5f55\uff1b    SharedStorage\uff1a\u521b\u5efa\u5171\u4eab NFS SR\uff1b    StartAllVMs\uff1a\u8fde\u63a5\u5230\u4e3b\u673a\uff0c\u5e76\u5c1d\u8bd5\u542f\u52a8\u4e3b\u673a\u4e0a\u7684\u6bcf\u4e2a VM\u3002", 
            "title": "Java"
        }, 
        {
            "location": "/#powershell", 
            "text": "PowerShell \u7ed1\u5b9a\u5305\u542b\u5728 XenServer-SDK/XenServerPowerShell \u76ee\u5f55\u4e2d\u3002 \u6211\u4eec\u63d0\u4f9b PowerShell \u6a21\u5757 XenServerPSModule \u548c\u6e90\u4ee3\u7801\uff0c\u4f7f XenServer API \u5448\u73b0\u4e3a Windows PowerShell cmdlet\u3002  PowerShell \u7ed1\u5b9a\u4f9d\u8d56\u9879             \u652f\u6301\u7684\u5e73\u53f0\uff1a  \u5b89\u88c5\u4e86 .NET Framework 4.5 \u548c PowerShell v4.0 \u7684 Windows     \u5e93\uff1a  XenServerPSModule     \u4f9d\u8d56\u9879\uff1a  \u9700\u8981 CookComputing.XMLRpcV2.dll \u624d\u80fd\u4e0e xml-rpc \u670d\u52a1\u5668\u901a\u4fe1\u3002\u6211\u4eec\u63d0\u4f9b\u4e86\u4fee\u8865\u7684 2.1.0.6 \u7248\u672c\uff0c\u5efa\u8bae\u60a8\u4f7f\u7528\u6b64\u7248\u672c\uff0c\u5c3d\u7ba1\u5176\u4ed6\u7248\u672c\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u3002     XenServer-SDK/XenServerPowerShell/samples \u76ee\u5f55\u4e2d\u7684 PowerShell \u7ed1\u5b9a\u968f\u9644\u4ee5\u4e0b\u793a\u4f8b\u811a\u672c\uff1a    AutomatedTestCore.ps1\uff1a\u8bf4\u660e\u5982\u4f55\u767b\u5f55 XenServer \u4e3b\u673a\u3001\u521b\u5efa\u5b58\u50a8\u5e93\u548c VM\uff0c\u7136\u540e\u6267\u884c\u5404\u79cd\u91cd\u542f\u64cd\u4f5c\u3002    HttpTest.ps1\uff1a\u8bf4\u660e\u5982\u4f55\u767b\u5f55 XenServer \u4e3b\u673a\u3001\u521b\u5efa VM\uff0c\u7136\u540e\u6267\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u4f8b\u5982\uff0c\u5bfc\u5165\u548c\u5bfc\u51fa VM\u3001\u4e0a\u8f7d\u4fee\u8865\u7a0b\u5e8f\u4ee5\u53ca\u68c0\u7d22\u6027\u80fd\u7edf\u8ba1\u4fe1\u606f\u3002", 
            "title": "PowerShell"
        }, 
        {
            "location": "/#python", 
            "text": "python \u7ed1\u5b9a\u5305\u542b\u5728\u5355\u4e2a XenServer-SDK/XenServerPython/XenAPI.py \u6587\u4ef6\u4e2d\u3002  Python \u7ed1\u5b9a\u4f9d\u8d56\u9879             \u652f\u6301\u7684\u5e73\u53f0\uff1a  Linux     \u5e93\uff1a  XenAPI.py     \u4f9d\u8d56\u9879\uff1a  \u65e0     SDK \u5305\u542b 7 \u4e2a python \u793a\u4f8b\uff1a    fixpbds.py - \u91cd\u65b0\u914d\u7f6e\u7528\u4e8e\u8bbf\u95ee\u5171\u4eab\u5b58\u50a8\u7684\u8bbe\u7f6e\uff1b    install.py - \u5b89\u88c5 Debian VM\u3001\u5c06\u5176\u8fde\u63a5\u5230\u7f51\u7edc\u3001\u542f\u52a8\u5e76\u7b49\u5f85\u5b83\u62a5\u544a\u5176 IP \u5730\u5740\uff1b    license.py - \u5c06\u5168\u65b0\u8bb8\u53ef\u8bc1\u4e0a\u8f7d\u5230 XenServer \u4e3b\u673a\uff1b    permute.py - \u9009\u62e9\u4e00\u7ec4 VM \u5e76\u4f7f\u7528 XenMotion \u5728\u4e3b\u673a\u4e4b\u95f4\u540c\u65f6\u79fb\u52a8\u5b83\u4eec\uff1b    powercycle.py - \u9009\u62e9\u4e00\u7ec4 VM \u5e76\u5bf9\u5176\u6267\u884c\u91cd\u65b0\u542f\u52a8\u64cd\u4f5c\uff1b    shell.py - \u7528\u4e8e\u6d4b\u8bd5\u7684\u7b80\u5355\u4ea4\u4e92 shell\uff1b    vm_start_async.py - \u8bf4\u660e\u5982\u4f55\u5f02\u6b65\u8c03\u7528\u64cd\u4f5c\uff1b    watch-all-events.py - \u6ce8\u518c\u6240\u6709\u4e8b\u4ef6\uff0c\u5e76\u5728\u8fd9\u4e9b\u4e8b\u4ef6\u53d1\u751f\u65f6\u663e\u793a\u8be6\u7ec6\u4fe1\u606f\u3002", 
            "title": "Python"
        }, 
        {
            "location": "/#cli", 
            "text": "\u9664\u4e86\u4f7f\u7528\u539f\u59cb XML-RPC \u6216\u63d0\u4f9b\u7684\u5176\u4e2d\u4e00\u4e2a\u8bed\u8a00\u7ed1\u5b9a\u4e4b\u5916\uff0c\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u4eba\u5458\u8fd8\u53ef\u4ee5\u4f7f\u7528 XE \u547d\u4ee4\u884c\u63a5\u53e3 xe \u4e0e XenServer \u4e3b\u673a\u96c6\u6210\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cxe CLI \u5b89\u88c5\u5728 XenServer \u4e3b\u673a\u4e0a\uff1b\u5355\u673a\u7248\u8fdc\u7a0b CLI \u4e5f\u9002\u7528\u4e8e Linux\u3002 \u5728 Windows \u4e0a\uff0cxe.exe CLI \u53ef\u6267\u884c\u6587\u4ef6\u968f XenCenter \u4e00\u8d77\u5b89\u88c5\u3002  CLI \u4f9d\u8d56\u9879             \u652f\u6301\u7684\u5e73\u53f0\uff1a  Linux \u548c Windows     \u5e93\uff1a  \u65e0     \u4e8c\u8fdb\u5236\uff1a  xe\uff08Windows \u4e0a\u7684 xe.exe\uff09     \u4f9d\u8d56\u9879\uff1a  \u65e0     CLI \u5141\u8bb8\u4ece\u811a\u672c\u6216\u5176\u4ed6\u7a0b\u5e8f\u76f4\u63a5\u8c03\u7528\u51e0\u4e4e\u6bcf\u4e2a API \u8c03\u7528\uff0c\u4ee5\u9759\u9ed8\u65b9\u5f0f\u5b8c\u6210\u6240\u9700\u7684\u4f1a\u8bdd\u7ba1\u7406\u3002 XE CLI \u8bed\u6cd5\u548c\u529f\u80fd\u5728\u300aXenServer \u7ba1\u7406\u5458\u6307\u5357\u300b\u4e2d\u6709\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u6709\u5173\u66f4\u591a\u8d44\u6e90\u548c\u793a\u4f8b\uff0c\u8bf7\u8bbf\u95ee  Citrix \u77e5\u8bc6\u4e2d\u5fc3 \u3002   \u6ce8\u610f   \u5f53\u4ece XenServer \u4e3b\u673a\u63a7\u5236\u53f0\u8fd0\u884c CLI \u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 Tab \u952e\u81ea\u52a8\u8865\u9f50\u547d\u4ee4\u540d\u79f0\u548c\u53c2\u6570\u3002", 
            "title": "\u547d\u4ee4\u884c\u63a5\u53e3 (CLI)"
        }, 
        {
            "location": "/#_22", 
            "text": "\u672c\u8282\u4ecb\u7ecd\u4e86\u4e24\u4e2a\u4f7f\u7528 API \u7684\u771f\u5b9e\u7a0b\u5e8f\u7684\u5b8c\u6574\u793a\u4f8b\u3002", 
            "title": "\u5b8c\u6574\u7684\u5e94\u7528\u7a0b\u5e8f\u793a\u4f8b"
        }, 
        {
            "location": "/#xenmotion-vm", 
            "text": "\u6b64 python \u793a\u4f8b\uff08\u5305\u542b\u5728 XenServer-SDK/XenServerPython/samples/permute.py \u4e2d\uff09\u8bf4\u660e\u5982\u4f55\u4f7f\u7528 XenMotion \u5728\u8d44\u6e90\u6c60\u4e2d\u7684\u4e3b\u673a\u4e4b\u95f4\u540c\u65f6\u79fb\u52a8 VM\u3002 \u6b64\u793a\u4f8b\u4f7f\u7528\u5f02\u6b65 API \u8c03\u7528\u5e76\u663e\u793a\u5982\u4f55\u7b49\u5f85\u5b8c\u6210\u4e00\u7ec4\u4efb\u52a1\u3002  \u6b64\u7a0b\u5e8f\u5f00\u5934\u90e8\u5206\u662f\u4e00\u4e9b\u6807\u51c6\u6837\u672c\u5e76\u5bfc\u5165 API \u7ed1\u5b9a\u6a21\u5757  import   sys ,   time  import   XenAPI   \u63a5\u4e0b\u6765\u6b64\u7a0b\u5e8f\u89e3\u6790\u5305\u542b\u670d\u52a1\u5668 URL\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u548c\u5927\u91cf\u8fed\u4ee3\u7684\u547d\u4ee4\u884c\u53c2\u6570\u3002 \u7528\u6237\u540d\u548c\u5bc6\u7801\u7528\u4e8e\u5efa\u7acb\u4f20\u9012\u5230\u51fd\u6570 main \u7684\u4f1a\u8bdd\uff0c\u8be5\u51fd\u6570\u4ee5\u5faa\u73af\u5f62\u5f0f\u8fdb\u884c\u591a\u6b21\u8c03\u7528\u3002 \u8bf7\u6ce8\u610f\u4f7f\u7528 try: finally: \u786e\u4fdd\u7a0b\u5e8f\u5728\u7ed3\u675f\u65f6\u4ece\u5176\u4f1a\u8bdd\u6ce8\u9500\u3002  if __name__ ==  __main__ :\n    if len(sys.argv)   5:\n        print  Usage: \n        print sys.argv[0],    url   username   password   iterations \n        sys.exit(1)\n    url = sys.argv[1]\n    username = sys.argv[2]\n    password = sys.argv[3]\n    iterations = int(sys.argv[4])\n    # First acquire a valid session by logging in:\n    session = XenAPI.Session(url)\n    session.xenapi.login_with_password(username, password,  2.3 ,\n                                        Example migration-demo v0.1 )\n    try:\n        for i in range(iterations):\n            main(session, i)\n    finally:\n        session.xenapi.session.logout()  main \u51fd\u6570\u68c0\u67e5\u7cfb\u7edf\u4e2d\u6bcf\u4e2a\u8fd0\u884c\u4e2d\u7684 VM\uff0c\u8fc7\u6ee4\u51fa\u63a7\u5236\u57df\uff08\u63a7\u5236\u57df\u662f\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0c\u4e0d\u53ef\u7531\u7528\u6237\u63a7\u5236\uff09\u3002 \u8be5\u51fd\u6570\u5c06\u6784\u5efa\u8fd0\u884c\u4e2d\u7684 VM \u53ca\u5176\u5f53\u524d\u4e3b\u673a\u7684\u5217\u8868\u3002  def main(session, iteration):\n    # Find a non-template VM object\n    all = session.xenapi.VM.get_all()\n    vms = []\n    hosts = []\n    for vm in all:\n        record = session.xenapi.VM.get_record(vm)\n        if not(record[ is_a_template ]) and \\\n           not(record[ is_control_domain ]) and \\\n           record[ power_state ] ==  Running :\n            vms.append(vm)\n            hosts.append(record[ resident_on ])\n    print  %d: Found %d suitable running VMs  % (iteration, len(vms))  \u63a5\u4e0b\u6765\u5bf9\u4e3b\u673a\u5217\u8868\u6267\u884c\u5faa\u73af\u64cd\u4f5c\uff1a  #use a rotation as a permutation\n    hosts = [hosts[-1]] + hosts[:(len(hosts)-1)]  \u7136\u540e\uff0c\u4f7f\u7528 XenMotion \u5c06\u6bcf\u4e2a VM \u79fb\u52a8\u5230\u6b64\u5faa\u73af\u4e0b\u7684\u65b0\u4e3b\u673a\uff08\u4f8b\u5982\uff0c\u5c06\u5728\u5217\u8868\u4e2d\u4f4d\u7f6e 2 \u7684\u4e3b\u673a\u4e0a\u8fd0\u884c\u7684 VM \u79fb\u52a8\u5230\u4f4d\u4e8e\u5217\u8868\u4e2d\u4f4d\u7f6e 1 \u7684\u4e3b\u673a\u7b49\uff09\u3002\u4e3a\u4e86\u5e76\u884c\u6267\u884c\u6bcf\u4e2a\u79fb\u52a8\uff0c\u4f7f\u7528 VM.pool_migrate \u7684\u5f02\u6b65\u7248\u672c\u5e76\u6784\u5efa\u4efb\u52a1\u5f15\u7528\u5217\u8868\u3002 \u8bf7\u6ce8\u610f\u4f20\u9012\u5230 VM.pool_migrate \u7684 live \u6807\u5fd7\uff1b\u5b83\u4f1a\u4f7f VM \u5728\u79fb\u52a8\u65f6\u4ecd\u4fdd\u6301\u8fd0\u884c\u72b6\u6001\u3002  tasks = []\n    for i in range(0, len(vms)):\n        vm = vms[i]\n        host = hosts[i]\n        task = session.xenapi.Async.VM.pool_migrate(vm, host, {  live :  true  })\n        tasks.append(task)  \u7136\u540e\uff0c\u8f6e\u8be2\u4efb\u52a1\u5217\u8868\u4ee5\u67e5\u770b\u5b8c\u6210\u60c5\u51b5\uff1a  finished = False\n    records = {}\n    while not(finished):\n        finished = True\n        for task in tasks:\n            record = session.xenapi.task.get_record(task)\n            records[task] = record\n            if record[ status ] ==  pending :\n                finished = False\n        time.sleep(1)  \u5f53\u6240\u6709\u4efb\u52a1\u90fd\u9000\u51fa\u6302\u8d77\u72b6\u6001\uff08\u5373\u5df2\u6210\u529f\u5b8c\u6210\u3001\u5df2\u5931\u8d25\u6216\u5df2\u53d6\u6d88\uff09\u540e\uff0c\u5c06\u518d\u6b21\u8f6e\u8be2\u8fd9\u4e9b\u4efb\u52a1\u4ee5\u67e5\u770b\u662f\u5426\u5df2\u5168\u90e8\u6210\u529f\u5b8c\u6210\uff1a  allok = True\n    for task in tasks:\n        record = records[task]\n        if record[ status ]    success :\n            allok = False  \u5982\u679c\u4efb\u4e00\u4efb\u52a1\u5931\u8d25\uff0c\u5219\u4f1a\u6253\u5370\u8be6\u7ec6\u4fe1\u606f\u3001\u5f15\u53d1\u5f02\u5e38\u5e76\u4fdd\u7559\u4efb\u52a1\u5bf9\u8c61\u4ee5\u4f9b\u5c06\u6765\u68c0\u67e5\u3002 \u5982\u679c\u6240\u6709\u4efb\u52a1\u90fd\u6210\u529f\u5b8c\u6210\uff0c\u5219\u9500\u6bc1\u4efb\u52a1\u5bf9\u8c61\uff0c\u4e14\u51fd\u6570\u5c06\u8fd4\u56de\u3002  if   not ( allok ): \n         print   One of the tasks didn t succeed at ,   \\ \n             time .strftime ( %F:%HT%M:%SZ ,   time .gmtime ()) \n         idx   =   0 \n         for   task   in   tasks : \n             record   =   records [ task ] \n             vm_name   =   session .xenapi.VM.get_name_label ( vms [ idx ] ) \n             host_name   =   session .xenapi.host.get_name_label ( hosts [ idx ] ) \n             print   %s : %12s %s -  %s  [   status :   % s ;   result  =   % s ;   error  =   % s   ]   %   \\ \n                   ( record [ uuid ] ,   record [ name_label ] ,   vm_name ,   host_name ,        \\ \n                    record [ status ] ,   record [ result ] ,   repr ( record [ error_info ] )) \n             idx   =   idx   +   1 \n         raise   Task failed \n     else : \n         for   task   in   tasks : \n             session .xenapi.task.destroy ( task )", 
            "title": "\u4f7f\u7528 XenMotion \u540c\u65f6\u8fc1\u79fb VM"
        }, 
        {
            "location": "/#xe-cli-vm", 
            "text": "\u6b64\u793a\u4f8b\u662f\u4e00\u4e2a bash \u811a\u672c\uff0c\u5b83\u4f7f\u7528 XE CLI \u6765\u514b\u9686 VM\uff08\u5982\u679c\u6b64 VM \u5df2\u542f\u52a8\uff0c\u5148\u5c06\u5176\u5173\u95ed\uff09\u3002  \u6b64\u793a\u4f8b\u5f00\u5934\u90e8\u5206\u662f\u4e00\u4e9b\u6837\u672c\uff0c\u8fd9\u4e9b\u6837\u672c\u9996\u5148\u68c0\u67e5\u662f\u5426\u8bbe\u7f6e\u4e86\u73af\u5883\u53d8\u91cf XE\uff1a\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u53d8\u91cf\uff0c\u5219\u5c06\u5176\u89c6\u4e3a\u6307\u5411 CLI \u7684\u5b8c\u6574\u8def\u5f84\uff1b\u5426\u5219\u8ba4\u4e3a XE CLI \u5728\u5f53\u524d\u8def\u5f84\u4e2d\u3002 \u63a5\u4e0b\u6765\uff0c\u8be5\u811a\u672c\u63d0\u793a\u7528\u6237\u8f93\u5165\u670d\u52a1\u5668\u540d\u79f0\u3001\u7528\u6237\u540d\u548c\u5bc6\u7801\uff1a  # Allow the path to the  xe  binary to be overridden by the XE environment variable\nif [ -z  ${ XE }  ]; then\n  XE=xe\nfi\nif [ ! -e  ${ HOME } /.xe  ]; then\n  read -p  Server name:   SERVER\n  read -p  Username:   USERNAME\n  read -p  Password:   PASSWORD\n  XE= ${ XE }  -s  ${ SERVER }  -u  ${ USERNAME }  -pw  ${ PASSWORD } \nfi  \u63a5\u4e0b\u6765\u8be5\u811a\u672c\u4f1a\u68c0\u67e5\u5176\u547d\u4ee4\u884c\u53c2\u6570\u3002\u53ea\u9700\u8981\u4e00\u4e2a\u53c2\u6570\uff1a\u8981\u514b\u9686\u7684 VM \u7684 UUID\uff1a  # Check if there s a VM by the uuid specified ${ XE }  vm-list params=uuid | grep -q    ${ vmuuid } $ \nif [ $? -ne 0 ]; then\n        echo  error: no vm uuid \\ ${ vmuuid } \\  found \n        exit 2\nfi  \u7136\u540e\uff0c\u8be5\u811a\u672c\u68c0\u67e5 VM \u7684\u7535\u6e90\u72b6\u6001\uff0c\u5982\u679c VM \u6b63\u5728\u8fd0\u884c\uff0c\u5219\u5c1d\u8bd5\u5f7b\u5e95\u5173\u95ed\u3002\u4f7f\u7528\u4e8b\u4ef6\u7cfb\u7edf\u4ee5\u7b49\u5f85 VM \u8fdb\u5165\u201c\u5df2\u6682\u505c\u201d\u72b6\u6001\u3002   \u6ce8\u610f   XE CLI \u652f\u6301\u547d\u4ee4\u884c\u53c2\u6570 --minimal\uff0c\u8be5\u53c2\u6570\u4f7f\u6253\u5370\u8f93\u51fa\u6ca1\u6709\u591a\u4f59\u7a7a\u683c\u6216\u683c\u5f0f\uff0c\u4fbf\u4e8e\u811a\u672c\u4f7f\u7528\u3002 \u5982\u679c\u8fd4\u56de\u591a\u4e2a\u503c\uff0c\u5219\u4f7f\u7528\u9017\u53f7\u5206\u9694\u3002  #Check the power state of the vm\nname=$( ${ XE }  vm-list uuid= ${ vmuuid }  params=name-label --minimal)\nstate=$( ${ XE }  vm-list uuid= ${ vmuuid }  params=power-state --minimal)\nwasrunning=0\n# If the VM state is running, we shutdown the vm first\nif [  ${ state }  =  running  ]; then\n         ${ XE }  vm-shutdown uuid= ${ vmuuid } \n         ${ XE }  event-wait class=vm power-state=halted uuid= ${ vmuuid } \n        wasrunning=1\nfi  \u7136\u540e\u514b\u9686 VM\uff0c\u65b0 VM \u7684 name_label \u8bbe\u7f6e\u4e3a cloned_vm\u3002  # Clone the VM\nnewuuid=$( ${ XE }  vm-clone uuid= ${ vmuuid }  new-name-label=cloned_vm)  \u6700\u540e\uff0c\u5982\u679c\u539f\u59cb VM \u539f\u6765\u6b63\u5728\u8fd0\u884c\u800c\u540e\u6765\u88ab\u5173\u95ed\uff0c\u5219\u5b83\u5c06\u548c\u65b0 VM \u4e00\u8d77\u542f\u52a8\u3002  # If the VM state was running before cloning, we start it again\n# along with the new VM.\nif [  $wasrunning  -eq 1 ]; then\n         ${ XE }  vm-start uuid= ${ vmuuid } \n         ${ XE }  vm-start uuid= ${ newuuid } \nfi", 
            "title": "\u4f7f\u7528 XE CLI \u514b\u9686 VM"
        }, 
        {
            "location": "/#http-xenserver", 
            "text": "XenServer \u5728\u6bcf\u4e2a\u4e3b\u673a\u4e0a\u63d0\u4f9b\u4e00\u4e2a HTTP \u63a5\u53e3\uff0c\u8fd9\u4e9b\u63a5\u53e3\u53ef\u7528\u4e8e\u6267\u884c\u5404\u79cd\u64cd\u4f5c\u3002\u672c\u7ae0\u5c06\u4ecb\u7ecd\u53ef\u7528\u673a\u5236\u3002", 
            "title": "\u4f7f\u7528 HTTP \u4e0e XenServer \u4ea4\u4e92"
        }, 
        {
            "location": "/#vm_7", 
            "text": "\u7531\u4e8e\u5bfc\u5165\u548c\u5bfc\u51fa VM \u9700\u8981\u4e00\u4e9b\u65f6\u95f4\u624d\u80fd\u5b8c\u6210\uff0c\u56e0\u6b64\u63d0\u4f9b\u4e86\u7528\u4e8e\u5bfc\u5165\u548c\u5bfc\u51fa\u64cd\u4f5c\u7684\u5f02\u6b65 HTTP \u63a5\u53e3\u3002 \u8981\u4f7f\u7528 XenServer API \u6267\u884c\u5bfc\u51fa\u64cd\u4f5c\uff0c\u53ef\u6784\u5efa\u4e00\u4e2a HTTP GET \u8c03\u7528\u4ee5\u63d0\u4f9b\u6709\u6548\u4f1a\u8bdd ID\u3001\u4efb\u52a1 ID \u548c VM UUID\uff0c\u5982\u4ee5\u4e0b\u4f2a\u4ee3\u7801\u4e2d\u6240\u793a\uff1a  task = Task.create()\nresult = HTTP.get(\n  server, 80,  /export?session_id= session_id task_id= task_id ref= vm_uuid );  \u5bf9\u4e8e\u5bfc\u5165\u64cd\u4f5c\uff0c\u53ef\u4ee5\u4f7f\u7528 HTTP PUT \u8c03\u7528\uff0c\u5982\u4ee5\u4e0b\u4f2a\u4ee3\u7801\u4e2d\u6240\u793a\uff1a  task =  Task . create ()  result =  HTTP . put ( \n  server ,   80 ,   /import?session_id= session_id task_id= task_id ref= vm_uuid );", 
            "title": "VM \u5bfc\u5165\u548c\u5bfc\u51fa"
        }, 
        {
            "location": "/#xenserver", 
            "text": "XenServer \u8bb0\u5f55\u4e0e\u60a8\u7684 XenServer \u5b89\u88c5\u7684\u5404\u4e2a\u65b9\u9762\u7684\u6027\u80fd\u6709\u5173\u7684\u7edf\u8ba1\u4fe1\u606f\u3002 \u8fd9\u4e9b\u6307\u6807\u5c06\u6c38\u4e45\u5b58\u50a8\u4ee5\u4f9b\u957f\u671f\u8bbf\u95ee\u548c\u8fdb\u884c\u5386\u53f2\u8d8b\u52bf\u5206\u6790\u3002 \u5f53\u5b58\u50a8\u5bf9 VM \u53ef\u7528\u65f6\uff0c\u7edf\u8ba1\u4fe1\u606f\u5c06\u5728 VM \u5173\u95ed\u65f6\u5199\u5165\u78c1\u76d8\u3002 \u7edf\u8ba1\u4fe1\u606f\u5b58\u50a8\u5728\u4e3a\u5404\u4e2a VM\uff08\u5305\u542b\u63a7\u5236\u57df\uff09\u548c\u670d\u52a1\u5668\u4fdd\u7559\u7684 RRD\uff08\u5faa\u73af\u6570\u636e\u5e93\uff09\u4e2d\u3002 RRD \u4f4d\u4e8e\u8fd0\u884c VM \u7684\u670d\u52a1\u5668\u4e0a\uff0c\u5982\u679c VM \u672a\u8fd0\u884c\uff0c\u5219\u4f4d\u4e8e\u6c60\u4e3b\u670d\u52a1\u5668\u4e0a\u3002 RRD \u4e5f\u4f1a\u6bcf\u5929\u5907\u4efd\u3002   \u8b66\u544a   \u5728 XenServer API \u7684\u65e9\u671f\u7248\u672c\u4e2d\uff0c\u53ef\u4f7f\u7528 VM_metrics\u3001VM_guest_metrics\u3001host_metrics \u65b9\u6cd5\u53ca\u76f8\u5173\u65b9\u6cd5\u83b7\u53d6\u5373\u65f6\u6027\u80fd\u6307\u6807\u3002 \u8fd9\u4e9b\u65b9\u6cd5\u5df2\u5f03\u7528\uff0c\u800c\u662f\u4f7f\u7528\u672c\u7ae0\u4ecb\u7ecd\u7684 HTTP \u5904\u7406\u7a0b\u5e8f\u4ece VM \u548c\u670d\u52a1\u5668\u4e0a\u7684 RRD \u4e0b\u8f7d\u7edf\u8ba1\u4fe1\u606f\u3002 \u8bf7\u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u65e7\u7684\u6307\u6807\u5c06\u8fd4\u56de\u96f6\u3002 \u8981\u6062\u590d\u4f7f\u7528 XenServer \u65e9\u671f\u7248\u672c\u4e2d\u7684\u5b9a\u671f\u7edf\u8ba1\u8f6e\u8be2\u65b9\u6cd5\uff0c\u8bf7\u5c06\u60a8\u4e3b\u673a\u4e0a\u7684 other- config:rrd_update_interval=  \u53c2\u6570\u8bbe\u7f6e\u4e3a\u4ee5\u4e0b\u503c\u4e4b\u4e00\uff0c\u5e76\u91cd\u65b0\u542f\u52a8\u60a8\u7684\u4e3b\u673a\uff1a  never \uff1a\u8fd9\u662f\u9ed8\u8ba4\u503c\uff0c\u8868\u793a\u4e0d\u6267\u884c\u5b9a\u671f\u8f6e\u8be2\u3002  1 \uff1a\u6bcf 5 \u79d2\u6267\u884c\u4e00\u6b21\u8f6e\u8be2\u3002  2 \uff1a\u6bcf\u5206\u949f\u6267\u884c\u4e00\u6b21\u8f6e\u8be2\u3002  \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e7\u7248\u6307\u6807 API \u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u503c\uff0c\u56e0\u6b64\u8981\u8fd0\u884c\u4f7f\u7528\u65e7\u7248\u76d1\u89c6\u534f\u8bae\u7684\u76d1\u89c6\u5ba2\u6237\u7aef\uff0c\u5fc5\u987b\u542f\u7528\u6b64\u952e\u3002  \u7edf\u8ba1\u4fe1\u606f\u4ee5\u4e0d\u540c\u7684\u7c92\u5ea6\u5b58\u50a8\uff0c\u6700\u957f\u4fdd\u7559\u4e00\u5e74\u65f6\u95f4\u3002\u5e73\u5747\u503c\u548c\u6700\u8fd1\u503c\u4ee5\u4e0b\u9762\u7684\u65f6\u95f4\u95f4\u9694\u5b58\u50a8\uff1a    \u5728\u8fc7\u53bb 10 \u5206\u949f\u5185\u6bcf\u9694 5 \u79d2    \u5728\u8fc7\u53bb 2 \u4e2a\u5c0f\u65f6\u5185\u6bcf\u9694 1 \u5206\u949f    \u5728\u8fc7\u53bb 1 \u5468\u5185\u6bcf\u9694 1 \u5c0f\u65f6    \u5728\u8fc7\u53bb 1 \u5e74\u5185\u6bcf\u9694 1 \u5929    RRD \u4ee5\u672a\u7ecf\u538b\u7f29\u7684 XML \u5f62\u5f0f\u4fdd\u5b58\u5230\u78c1\u76d8\u3002\u5f53 RRD \u5b58\u50a8\u5168\u5e74\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u6bcf\u4e2a RRD \u5199\u5165\u78c1\u76d8\u65f6\u7684\u5927\u5c0f\u8303\u56f4\u4e3a 200 KiB \u5230\u5927\u7ea6 1.2 MiB\u3002   \u8b66\u544a   \u5982\u679c\u7edf\u8ba1\u4fe1\u606f\u65e0\u6cd5\u5199\u5165\u78c1\u76d8\uff08\u4f8b\u5982\uff0c\u5f53\u78c1\u76d8\u5df2\u6ee1\u65f6\uff09\uff0c\u7edf\u8ba1\u4fe1\u606f\u5c06\u4e22\u5931\uff0c\u5e76\u5c06\u4f7f\u7528 RRD \u7684\u4e0a\u6b21\u4fdd\u5b58\u7248\u672c\u3002  \u53ef\u901a\u8fc7 HTTP \u4ee5 XML \u683c\u5f0f\u4e0b\u8f7d\u7edf\u8ba1\u4fe1\u606f\uff0c\u4f8b\u5982\u4f7f\u7528 wget\u3002 \u8bf7\u53c2\u9605  http://oss.oetiker.ch/rrdtool/doc/rrddump.en.html  \u548c  http://oss.oetiker.ch/rrdtool/doc/rrdxport.en.html  \u4e86\u89e3\u6709\u5173 XML \u683c\u5f0f\u7684\u4fe1\u606f\u3002 HTTP \u8eab\u4efd\u9a8c\u8bc1\u53ef\u4ee5\u91c7\u53d6\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u5f62\u5f0f\u6216\u4f1a\u8bdd\u4ee4\u724c\u7684\u5f62\u5f0f\u3002 \u53c2\u6570\u9644\u52a0\u5230 URL\uff0c\u63a5\u5728\u95ee\u53f7 (?) \u4e4b\u540e\uff0c\u5e76\u4ee5\u548c\u53f7 ( ) \u5206\u9694\u3002  \u8981\u83b7\u53d6\u4e3b\u673a\u4e0a\u6240\u6709 VM \u7edf\u8ba1\u4fe1\u606f\u7684\u66f4\u65b0\uff0cURL \u5e94\u4e3a\u5982\u4e0b\u5f62\u5f0f\uff1a  http:// username : password @ host /rrd_updates?start= secondssinceepoch   \u6b64\u8bf7\u6c42\u5c06\u4e3a\u6b63\u5728\u67e5\u8be2\u7684\u7279\u5b9a\u4e3b\u673a\u4e0a\u7684\u6bcf\u4e2a VM \u8fd4\u56de rrdtool xport \u6837\u5f0f XML \u683c\u5f0f\u7684\u6570\u636e\u3002 \u4e3a\u4e86\u533a\u5206\u5bfc\u51fa\u4e2d\u7684\u5217\u4e0e\u54ea\u4e2a VM \u76f8\u5173\u8054\uff0clegend \u5b57\u6bb5\u5c06\u4ee5 VM \u7684 UUID \u4f5c\u4e3a\u524d\u7f00\u3002  \u8981\u540c\u65f6\u83b7\u53d6\u4e3b\u673a\u66f4\u65b0\uff0c\u8bf7\u4f7f\u7528\u67e5\u8be2\u53c2\u6570  host=true \uff1a  http:// username : password @ host /rrd_updates?start= secondssinceepoch host=true  \u65f6\u95f4\u6bb5\u8d8a\u77ed\u5219\u6b65\u957f\u8d8a\u5c0f\uff0c\u8fd9\u610f\u5473\u7740\uff0c\u8bf7\u6c42\u67e5\u8be2\u7edf\u8ba1\u4fe1\u606f\u7684\u65f6\u95f4\u6bb5\u8d8a\u77ed\uff0c\u83b7\u5f97\u7684\u7edf\u8ba1\u4fe1\u606f\u8d8a\u8be6\u7ec6\u3002  \u5176\u4ed6 rrd_updates \u53c2\u6570   cf= ave|min|max  \u6570\u636e\u5408\u5e76\u6a21\u5f0f  interval= interval  \u62a5\u544a\u503c\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694    \u6ce8\u610f   \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709 ave \u7edf\u8ba1\u4fe1\u606f\u53ef\u7528\u3002 \u8981\u83b7\u53d6 VM \u7684 min \u548c max \u7edf\u8ba1\u4fe1\u606f\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a xe pool-param-set uuid= pool_uuid  other-config:create_min_max_in_new_VM_RRDs  \u83b7\u53d6\u4e3b\u673a\u7684\u6240\u6709\u7edf\u8ba1\u4fe1\u606f\uff1a  http:// username:password@host /host_rrd  \u83b7\u53d6 VM \u7684\u6240\u6709\u7edf\u8ba1\u4fe1\u606f\uff1a  http:// username:password@host /vm_rrd?uuid= vm_uuid", 
            "title": "\u83b7\u53d6 XenServer \u6027\u80fd\u7edf\u8ba1\u4fe1\u606f"
        }, 
        {
            "location": "/#xenserver-api_1", 
            "text": "XenAPI \u662f\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u865a\u62df\u673a\u7684\u751f\u547d\u5468\u671f\u7684\u5e38\u89c4\u7efc\u5408\u6027\u63a5\u53e3\uff0c\u5728 XenAPI \u63d0\u4f9b\u7a0b\u5e8f\u5b9e\u73b0\u7279\u5b9a\u529f\u80fd\uff08\u4f8b\u5982\uff0c\u7f6e\u5907\u5b58\u50a8\u6216\u5904\u7406\u63a7\u5236\u53f0\uff09\u7684\u65b9\u5f0f\u65b9\u9762\uff0c\u63d0\u4f9b\u4e86\u5f88\u5927\u7684\u7075\u6d3b\u6027\u3002 XenServer \u5177\u6709\u591a\u4e2a\u6269\u5c55\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u81ea\u5df1\u7684 XenCenter \u754c\u9762\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u6269\u5c55\u63d0\u4f9b\u7684\u6709\u7528\u529f\u80fd\u3002 \u672c\u7ae0\u4ecb\u7ecd\u8fd9\u4e9b\u673a\u5236\u7684\u5de5\u4f5c\u65b9\u6cd5\u3002  \u901a\u5e38\u901a\u8fc7\u4e3a\u5404\u79cd\u5bf9\u8c61\u6307\u5b9a other-config \u6620\u5c04\u952e\u63d0\u4f9b XenAPI \u6269\u5c55\u3002 \u6b64\u53c2\u6570\u7528\u6765\u8868\u793a XenServer \u7684\u7279\u5b9a\u7248\u672c\u652f\u6301\u67d0\u4e00\u529f\u80fd\uff0c\u4f46\u8be5\u529f\u80fd\u4e0d\u662f\u957f\u671f\u529f\u80fd\u3002 \u6211\u4eec\u4e00\u76f4\u5728\u8bc4\u4f30 API \u7684\u529f\u80fd\u4ee5\u8fdb\u884c\u63d0\u5347\uff0c\u8fd9\u9700\u8981\u5bf9\u754c\u9762\u7684\u7279\u6027\u6709\u5f88\u597d\u7684\u4e86\u89e3\u3002 \u6211\u4eec\u59cb\u7ec8\u6b22\u8fce\u60a8\u5c31\u5176\u4e2d\u4e00\u4e9b\u6269\u5c55\u7684\u4f7f\u7528\u60c5\u51b5\u63d0\u4f9b\u5f00\u53d1\u4eba\u5458\u53cd\u9988\uff0c\u4ee5\u5e2e\u52a9\u6211\u4eec\u505a\u51fa\u8fd9\u4e9b\u51b3\u7b56\u3002", 
            "title": "XenServer API \u6269\u5c55"
        }, 
        {
            "location": "/#vm_8", 
            "text": "\u5927\u591a\u6570 XenAPI \u56fe\u5f62\u754c\u9762\u90fd\u5e0c\u671b\u80fd\u591f\u8bbf\u95ee VM \u63a7\u5236\u53f0\uff0c\u4ee5\u4fbf\u5c06\u8fd9\u4e9b\u63a7\u5236\u53f0\u5982\u540c\u7269\u7406\u673a\u4e00\u6837\u5448\u73b0\u7ed9\u7528\u6237\u3002 \u5b58\u5728\u591a\u79cd\u53ef\u7528\u63a7\u5236\u53f0\u7c7b\u578b\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6765\u5bbe\u7cfb\u7edf\u7684\u7c7b\u578b\u6216\u662f\u5426\u6b63\u5728\u8bbf\u95ee\u7269\u7406\u4e3b\u673a\u63a7\u5236\u53f0\uff1a  \u63a7\u5236\u53f0\u8bbf\u95ee     \u64cd\u4f5c\u7cfb\u7edf  \u6587\u672c  \u56fe\u5f62  \u4f18\u5316\u7684\u56fe\u5f62      Windows  \u5426  VNC\uff0c\u4f7f\u7528 API \u8c03\u7528  RDP\uff0c\u76f4\u63a5\u6765\u81ea\u6765\u5bbe\u7cfb\u7edf    Linux  \u662f\uff0c\u901a\u8fc7 VNC \u548c API \u8c03\u7528  \u5426  VNC\uff0c\u76f4\u63a5\u6765\u81ea\u6765\u5bbe\u7cfb\u7edf    \u7269\u7406\u4e3b\u673a  \u662f\uff0c\u901a\u8fc7 VNC \u548c API \u8c03\u7528  \u5426  \u5426     \u786c\u4ef6\u8f85\u52a9 VM\uff08\u4f8b\u5982 Windows\uff09\u901a\u8fc7 VNC \u76f4\u63a5\u63d0\u4f9b\u56fe\u5f62\u63a7\u5236\u53f0\u3002 \u4e0d\u5b58\u5728\u57fa\u4e8e\u6587\u672c\u7684\u63a7\u5236\u53f0\uff0c\u4f7f\u7528\u56fe\u5f62\u63a7\u5236\u53f0\u4e0d\u9700\u8981\u6765\u5bbe\u7cfb\u7edf\u7f51\u7edc\u8fde\u63a5\u3002 \u5efa\u7acb\u6765\u5bbe\u7cfb\u7edf\u7f51\u7edc\u8fde\u63a5\u540e\uff0c\u66f4\u9ad8\u6548\u7684\u65b9\u6cd5\u662f\u8bbe\u7f6e\u201c\u8fdc\u7a0b\u684c\u9762\u8bbf\u95ee\u201d\u5e76\u4f7f\u7528 RDP \u5ba2\u6237\u7aef\u76f4\u63a5\u8fde\u63a5\uff08\u5fc5\u987b\u5728 XenAPI \u5916\u90e8\u6267\u884c\u6b64\u64cd\u4f5c\uff09\u3002  \u534a\u865a\u62df\u5316 VM\uff08\u4f8b\u5982 Linux \u6765\u5bbe\u7cfb\u7edf\uff09\u53ef\u76f4\u63a5\u63d0\u4f9b\u672c\u673a\u6587\u672c\u63a7\u5236\u53f0\u3002 XenServer \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a vncterm \u7684\u5b9e\u7528\u7a0b\u5e8f\uff0c\u7528\u6765\u5c06\u6b64\u57fa\u4e8e\u6587\u672c\u7684\u63a7\u5236\u53f0\u8f6c\u6362\u4e3a\u56fe\u5f62 VNC \u8868\u793a\u5f62\u5f0f\u3002 \u6b64\u63a7\u5236\u53f0\u65e0\u9700\u6765\u5bbe\u7cfb\u7edf\u7f51\u7edc\u8fde\u63a5\u5373\u53ef\u4f7f\u7528\u3002 \u4e0e\u524d\u9762\u7684 Windows \u7248\u672c\u4e00\u6837\uff0cLinux \u7248\u672c\u901a\u5e38\u5728\u6765\u5bbe\u7cfb\u7edf\u5185\u90e8\u914d\u7f6e VNC\uff0c\u7136\u540e\u901a\u8fc7\u6765\u5bbe\u7cfb\u7edf\u7f51\u7edc\u63a5\u53e3\u76f4\u63a5\u4e0e\u5176\u8fde\u63a5\u3002  \u7269\u7406\u4e3b\u673a\u63a7\u5236\u53f0\u4ec5\u53ef\u7528\u4f5c vt100 \u63a7\u5236\u53f0\uff0c\u53ef\u901a\u8fc7\u5728\u63a7\u5236\u57df\u4e2d\u4f7f\u7528 vncterm \u6765\u901a\u8fc7 XenAPI \u5c06\u5176\u4f5c\u4e3a VNC \u63a7\u5236\u53f0\u663e\u793a\u3002  VNC \u57fa\u4e8e RFB\uff08\u8fdc\u7a0b Framebuffer\uff09\u534f\u8bae\uff0c\u8fd9\u662f\u5728 RFB \u534f\u8bae\u4e2d\u6307\u5b9a\u7684\u3002 \u7b2c\u4e09\u65b9\u5f00\u53d1\u4eba\u5458\u5e94\u63d0\u4f9b\u4ed6\u4eec\u81ea\u5df1\u7684 VNC \u67e5\u770b\u5668\uff0c\u8bb8\u591a\u514d\u8d39\u63d0\u4f9b\u7684\u5b9e\u65bd\u53ef\u7528\u6765\u5b9e\u73b0\u6b64\u76ee\u7684\u3002 \u67e5\u770b\u5668\u5fc5\u987b\u652f\u6301\u7684\u6700\u4f4e\u7248\u672c\u662f RFB 3.3\u3002", 
            "title": "VM \u63a7\u5236\u53f0\u8f6c\u53d1"
        }, 
        {
            "location": "/#api-vnc", 
            "text": "\u4f7f\u7528\u4f20\u9012\u5230\u4e3b\u673a\u4ee3\u7406\u7684\u7279\u6b8a URL \u53ef\u4ee5\u68c0\u7d22 VNC \u63a7\u5236\u53f0\u3002API \u8c03\u7528\u5e8f\u5217\u5982\u4e0b\u6240\u793a\uff1a    \u5ba2\u6237\u7aef\u5230\u4e3b\u670d\u52a1\u5668/443\uff1aXML-RPC\uff1aSession.login_with_password()\u3002    \u4e3b\u670d\u52a1\u5668/443 \u5230\u5ba2\u6237\u7aef\uff1a\u8fd4\u56de\u7528\u4e8e\u540e\u7eed\u8c03\u7528\u7684\u4f1a\u8bdd\u5f15\u7528\u3002    \u5ba2\u6237\u7aef\u5230\u4e3b\u670d\u52a1\u5668/443\uff1aXML-RPC\uff1aVM.get_by_name_label()\u3002    \u4e3b\u670d\u52a1\u5668/443 \u5230\u5ba2\u6237\u7aef\uff1a\u8fd4\u56de\u5bf9\u7279\u5b9a VM\uff08\u6216\u201c\u63a7\u5236\u57df\u201d- \u5982\u679c\u60a8\u5e0c\u671b\u68c0\u7d22\u7269\u7406\u4e3b\u673a\u63a7\u5236\u53f0\uff09\u7684\u5f15\u7528\u3002    \u5ba2\u6237\u7aef\u5230\u4e3b\u670d\u52a1\u5668/443\uff1aXML-RPC\uff1aVM.get_consoles()\u3002    \u4e3b\u670d\u52a1\u5668/443 \u5230\u5ba2\u6237\u7aef\uff1a\u8fd4\u56de\u4e0e VM \u76f8\u5173\u8054\u7684\u63a7\u5236\u53f0\u5bf9\u8c61\u7684\u5217\u8868\u3002    \u5ba2\u6237\u7aef\u5230\u4e3b\u670d\u52a1\u5668/443\uff1aXML-RPC\uff1aVM.get_location()\u3002    \u8fd4\u56de\u4e00\u4e2a URI\uff0c\u63cf\u8ff0\u6240\u8bf7\u6c42\u63a7\u5236\u53f0\u7684\u4f4d\u7f6e\u3002\u8fd9\u4e9b URI \u7684\u5f62\u5f0f\u4e3a\uff1ahttps://192.168.0.1/console?ref=OpaqueRef:c038533a-af99-a0ff-9095-c1159f2dc6a0\u3002    \u5ba2\u6237\u7aef\u5230 192.168.0.1\uff1aHTTP CONNECT \"/console?ref=(...)\"    \u6700\u7ec8\u7684 HTTP CONNECT \u4e0e\u6807\u51c6\u7565\u6709\u4e0d\u7b26\uff0c\u56e0\u4e3a HTTP/1.1 RFC \u6307\u5b9a\u5b83\u5e94\u8be5\u53ea\u662f\u4e3b\u673a\u548c\u7aef\u53e3\uff0c\u800c\u4e0d\u662f URL\u3002 \u5b8c\u6210 HTTP \u8fde\u63a5\u540e\uff0c\u8be5\u8fde\u63a5\u968f\u540e\u53ef\u4ee5\u76f4\u63a5\u7528\u4f5c VNC \u670d\u52a1\u5668\uff0c\u65e0\u9700\u5176\u4ed6 HTTP \u534f\u8bae\u64cd\u4f5c\u3002  \u6b64\u65b9\u6848\u9700\u8981\u4ece\u5ba2\u6237\u7aef\u76f4\u63a5\u8bbf\u95ee\u63a7\u5236\u57df\u7684 IP\uff0c\u5982\u679c\u5b58\u5728\u963b\u6b62\u6b64\u7c7b\u8fde\u63a5\u7684\u7f51\u7edc\u5730\u5740\u8f6c\u6362 (NAT) \u8bbe\u5907\uff0c\u5219\u65e0\u6cd5\u6b63\u786e\u8fd0\u884c\u3002 \u53ef\u4ee5\u4f7f\u7528 CLI \u4ece\u5ba2\u6237\u7aef\u68c0\u7d22\u63a7\u5236\u53f0 URI\uff0c\u7136\u540e\u6267\u884c\u8fde\u63a5\u68c0\u67e5\u3002  \u4f7f\u7528 CLI \u68c0\u7d22\u63a7\u5236\u53f0 URI    \u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u68c0\u7d22 VM UUID\uff1a  xe vm-list params=uuid --minimal name-label=name    \u68c0\u7d22\u63a7\u5236\u53f0\u4fe1\u606f\uff1a  xe console-list vm-uuid=uuid\nuuid ( RO): 714f388b-31ed-67cb-617b-0276e35155ef\nvm-uuid ( RO): 8acb7723-a5f0-5fc5-cd53-9f1e3a7d3069\nvm-name-label ( RO): etch\nprotocol ( RO): RFB\nlocation ( RO): https://192.168.0.1/console?ref=(...)\nUse command-line utilities like ping to test connectivity to the IP address provided in the location field.", 
            "title": "\u4f7f\u7528 API \u68c0\u7d22 VNC \u63a7\u5236\u53f0"
        }, 
        {
            "location": "/#linux-vm-vnc", 
            "text": "\u521b\u5efa\u548c\u9500\u6bc1 Linux VM \u65f6\uff0c\u4e3b\u673a\u4ee3\u7406\u4f1a\u81ea\u52a8\u7ba1\u7406\u5c06\u6587\u672c\u63a7\u5236\u53f0\u8f6c\u6362\u4e3a VNC \u7684 vncterm \u8fdb\u7a0b\u3002 \u5e0c\u671b\u76f4\u63a5\u8bbf\u95ee\u6587\u672c\u63a7\u5236\u53f0\u7684\u9ad8\u7ea7\u7528\u6237\u53ef\u4ee5\u7981\u7528\u8be5 VM \u7684 VNC \u8f6c\u53d1\u3002 \u4e4b\u540e\uff0c\u53ea\u80fd\u4ece\u63a7\u5236\u57df\u76f4\u63a5\u8bbf\u95ee\u6587\u672c\u63a7\u5236\u53f0\uff0cXenCenter \u7b49\u56fe\u5f62\u754c\u9762\u5c06\u65e0\u6cd5\u5448\u73b0\u8be5 VM \u7684\u63a7\u5236\u53f0\u3002  \u4f7f\u7528 CLI \u7981\u7528 Linux VNC \u63a7\u5236\u53f0   \u542f\u52a8\u6765\u5bbe\u7cfb\u7edf\u4e4b\u524d\uff0c\u5728 VM \u8bb0\u5f55\u4e0a\u8bbe\u7f6e\u4ee5\u4e0b\u53c2\u6570\uff1a  xe vm-param-set uuid=uuid other-config:disable_pv_vnc=1   \u542f\u52a8 VM\u3002    \u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u4f7f\u7528 CLI \u68c0\u7d22 VM \u7684\u57fa\u7840\u57df ID\uff1a  xe vm-list params=dom-id uuid= uuid  --minimal    \u5728\u4e3b\u673a\u63a7\u5236\u53f0\u4e0a\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u76f4\u63a5\u8fde\u63a5\u5230\u6587\u672c\u63a7\u5236\u53f0\uff1a /usr/lib/xen/bin/xenconsole  domain_id    \u6b64\u914d\u7f6e\u662f\u4e00\u4e2a\u9ad8\u7ea7\u8fc7\u7a0b\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u4e0d\u8981\u5c06\u6587\u672c\u63a7\u5236\u53f0\u76f4\u63a5\u7528\u4e8e\u5927\u91cf\u7684 I/O \u64cd\u4f5c\uff0c \u800c\u662f\u901a\u8fc7 SSH \u6216\u5176\u4ed6\u4e00\u4e9b\u57fa\u4e8e\u7f51\u7edc\u7684\u8fde\u63a5\u673a\u5236\u8fde\u63a5\u5230\u6765\u5bbe\u7cfb\u7edf\u3002", 
            "title": "\u7981\u7528 Linux VM \u7684 VNC \u8f6c\u53d1"
        }, 
        {
            "location": "/#linux", 
            "text": "\u7531\u4e8e\u5fc5\u987b\u5f15\u5bfc Xen \u611f\u77e5\u5185\u6838\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u786c\u4ef6\u8f85\u52a9\u6280\u672f\u7b80\u5355\u5730\u5b89\u88c5\u6765\u5bbe\u7cfb\u7edf\uff0c\u534a\u865a\u62df\u5316 Linux \u6765\u5bbe\u7cfb\u7edf\u7684\u5b89\u88c5\u8f83\u4e3a\u590d\u6742\u3002 \u800c\u8fd9\u5177\u6709\u5728\u4eff\u771f\u5f00\u9500\u4e0d\u8db3\u65f6\u4f7f\u5b89\u88c5\u901f\u5ea6\u63a5\u8fd1\u4e8e\u672c\u673a\u5b89\u88c5\u901f\u5ea6\u7684\u597d\u5904\u3002 XenServer \u652f\u6301\u5b89\u88c5\u591a\u4e2a\u4e0d\u540c\u7684 Linux \u7248\u672c\uff0c\u5e76\u5c3d\u53ef\u80fd\u7cbe\u7b80\u6b64\u8fc7\u7a0b\u3002  \u6700\u540e\uff0c\u5728\u63a7\u5236\u57df\u4e2d\u5c06\u51fa\u73b0\u4e00\u4e2a\u540d\u4e3a eliloader \u7684\u7279\u6b8a\u5f15\u5bfc\u52a0\u8f7d\u5668\uff0c\u5b83\u542f\u52a8\u65f6\u4f1a\u8bfb\u53d6 VM \u8bb0\u5f55\u4e2d\u7684\u5404\u79cd other-config \u952e\uff0c\u5e76\u6267\u884c\u7279\u5b9a\u4e8e\u7248\u672c\u7684\u5b89\u88c5\u884c\u4e3a\u3002    install-repository - \u5fc5\u9700\u3002\u5b58\u50a8\u5e93\u7684\u8def\u5f84\uff1b\u201chttp\u201d\u3001\u201chttps\u201d\u3001\u201cftp\u201d\u6216\u201cnfs\u201d\u3002\u5e94\u6307\u5b9a\u4e3a\u76ee\u6807\u5b89\u88c5\u7a0b\u5e8f\u5c06\u4f7f\u7528\u7684\u5f62\u5f0f\uff0c\u4f46\u4e0d\u5e94\u5305\u542b\u524d\u7f00\uff0c\u4f8b\u5982 method=\u3002    install-vnc - \u9ed8\u8ba4\u503c\uff1afalse\u3002\u5728\u5b89\u88c5\u671f\u95f4\uff0c\u53ef\u7528\u65f6\u4f7f\u7528 VNC\u3002    install-vncpasswd - \u9ed8\u8ba4\u503c\uff1aempty\u3002\u8981\u4f7f\u7528\u7684 VNC \u5bc6\u7801\uff08\u5982\u679c\u53ef\u4ee5\u4f7f\u7528\u76ee\u6807\u7248\u672c\u7684\u547d\u4ee4\u884c\u63d0\u4f9b\u4e00\u4e2a\u5bc6\u7801\uff09\u3002    install-round - \u9ed8\u8ba4\u503c\uff1a1\u3002\u5f53\u524d\u5f15\u5bfc\u52a0\u8f7d\u5668\u5faa\u73af\u3002\u7528\u6237\u65e0\u6cd5\u7f16\u8f91\uff08\u5982\u4e0b\u6240\u793a\uff09\u3002", 
            "title": "\u534a\u865a\u62df\u5316 Linux \u5b89\u88c5"
        }, 
        {
            "location": "/#red-hat-enterprise-linux-4144", 
            "text": "eliloader \u7528\u4e8e\u8fdb\u884c\u4e24\u8f6e\u5f15\u5bfc\u3002 \u5728\u7b2c\u4e00\u8f6e\u5f15\u5bfc\u4e2d\uff0c\u5b83\u901a\u8fc7 /opt/xensource/packages/files/guest-installer \u8fd4\u56de\u5b89\u88c5\u7a0b\u5e8f initrd \u548c\u5185\u6838\u3002 \u7136\u540e\uff0c\u5728\u7b2c\u4e8c\u8f6e\u5f15\u5bfc\u4e2d\uff0c\u5b83\u4ece VM \u4e2d\u5220\u9664\u9644\u52a0\u66f4\u65b0\u78c1\u76d8\uff0c\u63a5\u7740\u5c06\u5f15\u5bfc\u52a0\u8f7d\u5668\u5207\u6362\u5230 pygrub\uff0c\u7136\u540e\u5f00\u59cb\u6b63\u5e38\u5f15\u5bfc\u3002  \u6b64\u5e8f\u5217\u662f\u5fc5\u9700\u7684\uff0c\u56e0\u4e3a Red Hat \u6ca1\u6709\u4e3a\u8fd9\u4e9b\u7248\u672c\u63d0\u4f9b Xen \u5185\u6838\uff0c\u56e0\u800c\u6539\u7528\u8fd9\u4e9b\u7248\u672c\u7684 XenServer \u81ea\u5b9a\u4e49\u5185\u6838\u3002", 
            "title": "Red Hat Enterprise Linux 4.1/4.4"
        }, 
        {
            "location": "/#red-hat-enterprise-linux-4550", 
            "text": "\u4e0e RHEL4.4 \u5b89\u88c5\u7c7b\u4f3c\uff0c\u4e0d\u540c\u4e4b\u5904\u53ea\u662f\u76f4\u63a5\u4ece\u7528\u6237\u6307\u5b9a\u7684\u7f51\u7edc\u5b58\u50a8\u5e93\u4e0b\u8f7d\u5185\u6838\u548c Ramdisk\uff0c\u4ee5\u53ca\u7acb\u5373\u5c06\u5f15\u5bfc\u52a0\u8f7d\u5668\u5207\u6362\u5230 pygrub\u3002 \u8bf7\u6ce8\u610f\uff0cpygrub \u4e0d\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u800c\u4ec5\u4f1a\u5728\u4e0b\u4e00\u6b21\u5f15\u5bfc\u65f6\u89e3\u6790\u3002  \u901a\u8fc7\u7f51\u7edc\u68c0\u7d22\uff0c\u7528\u6237\u53ef\u76f4\u63a5\u4ece\u5176\u7f51\u7edc\u5b58\u50a8\u5e93\u5b89\u88c5\u4e0a\u6e38 Red Hat \u4f9b\u5e94\u5546\u5185\u6838\u3002 xs-tools.iso \u5185\u7f6e ISO \u6620\u50cf\u4e2d\u8fd8\u63d0\u4f9b\u4e86\u66f4\u65b0\u7684 XenServer \u5185\u6838\uff0c\u4fee\u590d\u4e86\u5404\u79cd\u4e0e Xen \u76f8\u5173\u7684\u9519\u8bef\u3002", 
            "title": "Red Hat Enterprise Linux 4.5/5.0"
        }, 
        {
            "location": "/#suse-enterprise-linux-10-sp1", 
            "text": "\u8981\u6c42\u4e24\u8f6e\u5f15\u5bfc\u8fc7\u7a0b\u3002 \u7b2c\u4e00\u8f6e\u5f15\u5bfc\u8fc7\u7a0b\u4ece\u7f51\u7edc\u5b58\u50a8\u5e93\u4e0b\u8f7d\u5185\u6838\u548c Ramdisk\uff0c\u7136\u540e\u5f15\u5bfc\u5b83\u4eec\u3002 \u63a5\u7740\uff0c\u7b2c\u4e8c\u8f6e\u5f15\u5bfc\u8fc7\u7a0b\u5c06\u68c0\u67e5\u78c1\u76d8\u4ee5\u67e5\u627e\u5b89\u88c5\u7684\u5185\u6838\u548c Ramdisk\uff0c\u5e76\u8bbe\u7f6e PV-bootloader-args \u4ee5\u53cd\u6620\u6765\u5bbe\u6587\u4ef6\u7cfb\u7edf\u5185\u7684\u90a3\u4e9b\u8def\u5f84\u3002 \u6b64\u8fdb\u7a0b\u6a21\u62df domUloader\uff0cSUSE \u5c06\u5176\u7528\u4f5c\u66ff\u4ee3 pygrub \u7684\u65b9\u6cd5\u3002 \u6700\u540e\uff0c\u5c06\u5f15\u5bfc\u52a0\u8f7d\u5668\u8bbe\u7f6e\u4e3a pygrub\uff0c\u5e76\u6267\u884c\u4ee5\u5f00\u59cb\u6b63\u5e38\u5f15\u5bfc\u3002  SLES 10 \u5b89\u88c5\u65b9\u6cd5\u8868\u793a\u5185\u6838\u548c Ramdisk \u7684\u8def\u5f84\u5b58\u50a8\u5728 VM \u8bb0\u5f55\u4e2d\u800c\u4e0d\u662f\u6765\u5bbe\u7cfb\u7edf menu.lst \u4e2d\uff0c\u4f46\u8fd9\u662f\u5b83\u8fd0\u884c\u7684\u552f\u4e00\u65b9\u5f0f\uff0c\u56e0\u4e3a YAST \u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\u672a\u5199\u5165\u6709\u6548\u7684 menu.lst\u3002", 
            "title": "SUSE Enterprise Linux 10 SP1"
        }, 
        {
            "location": "/#centos-45-50", 
            "text": "CentOS \u5b89\u88c5\u673a\u5236\u4e0e\u524d\u9762\u63d0\u5230\u7684 Red Hat \u5b89\u88c5\u8bf4\u660e\u7c7b\u4f3c\uff0c\u53ea\u662f eliloader \u8bc6\u522b\u7684\u4e00\u4e9b MD5 \u6821\u9a8c\u548c\u4e0d\u540c\u3002", 
            "title": "CentOS 4.5 / 5.0"
        }, 
        {
            "location": "/#vm-xenstore", 
            "text": "\u5f00\u53d1\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u5728 VM \u4e2d\u5b89\u88c5\u6765\u5bbe\u7cfb\u7edf\u4ee3\u7406\uff0c\u4ee5\u6839\u636e VM \u7c7b\u578b\u6267\u884c\u7279\u6b8a\u7684\u64cd\u4f5c\u3002 \u4e3a\u5c06\u6b64\u4fe1\u606f\u544a\u77e5\u6765\u5bbe\u7cfb\u7edf\uff0c\u53ef\u4f7f\u7528\u540d\u4e3a vm-data \u7684\u7279\u6b8a Xenstore \u547d\u540d\u7a7a\u95f4\uff0c\u6b64\u547d\u540d\u7a7a\u95f4\u5728\u521b\u5efa VM \u65f6\u586b\u5145\uff0c \u5b83\u662f\u901a\u8fc7 VM \u8bb0\u5f55\u4e2d\u7684 xenstore-data \u6620\u5c04\u586b\u5145\u7684\u3002  \u5728 VM \u4e2d\u586b\u5145 Xenstore \u8282\u70b9 foo    \u8bbe\u7f6e VM \u8bb0\u5f55\u4e2d\u7684 xenstore-data \u53c2\u6570\uff1a  xe vm-param-set uuid= vm_uuid  xenstore-data:vm-data/foo=bar\u00a1\u00a4    \u542f\u52a8 VM\u3002    \u5982\u679c\u662f\u57fa\u4e8e Linux \u7684 VM\uff0c\u8bf7\u5b89\u88c5 XenServer Tools\uff0c\u7136\u540e\u4f7f\u7528 xenstore-read \u9a8c\u8bc1 Xenstore \u4e2d\u662f\u5426\u5b58\u5728\u8be5\u8282\u70b9\u3002     \u6ce8\u610f   \u4ec5\u5141\u8bb8\u4f7f\u7528\u4ee5 vm-data \u5f00\u5934\u7684\u524d\u7f00\uff0c\u542f\u52a8 VM \u65f6\u5c06\u9ed8\u8ba4\u5ffd\u7565\u4efb\u4f55\u4e0d\u5728\u6b64\u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u5185\u5bb9\u3002", 
            "title": "\u5411 VM \u6dfb\u52a0 Xenstore \u6761\u76ee"
        }, 
        {
            "location": "/#_23", 
            "text": "XenServer 7.0 \u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u7684\u63a7\u5236\u57df\u5177\u6709\u591a\u79cd\u5b89\u5168\u589e\u5f3a\u529f\u80fd\uff0c\u4ee5\u52a0\u5f3a\u62b5\u5fa1\u6076\u610f\u6765\u5bbe\u7cfb\u7edf\u653b\u51fb\u7684\u80fd\u529b\u3002 \u5f00\u53d1\u4eba\u5458\u4e0d\u5e94\u5c06\u4efb\u4f55\u6b63\u5e38\u529f\u80fd\u7684\u4e22\u5931\u89c6\u4e3a\u8fd9\u4e9b\u66f4\u6539\u5bfc\u81f4\u7684\u7ed3\u679c\uff0c\u4e0d\u8fc7\u4e0b\u9762\u5c06\u8fd9\u4e9b\u66f4\u6539\u4f5c\u4e3a\u5176\u4ed6\u7248\u672c\u884c\u4e3a\u7684\u53d8\u4f53\u8fdb\u884c\u4e86\u5f52\u6863\u3002    \u5957\u63a5\u5b57\u63a5\u53e3 xenstored\uff0c\u53ef\u4f7f\u7528 libxenstore \u8fdb\u884c\u8bbf\u95ee\u3002\u53ef\u4f7f\u7528 xs_restrict() \u9650\u5236\u63a5\u53e3\u3002    \u8bbe\u5907 /dev/xen/evtchn\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 libxenctrl \u4e2d\u7684 xs_evtchn_open() \u8bbf\u95ee\u3002\u53ef\u4ee5\u4f7f\u7528 xs_evtchn_restrict() \u9650\u5236\u53e5\u67c4\u3002    \u8bbe\u5907 /proc/xen/privcmd\uff0c\u53ef\u901a\u8fc7 libxenctrl \u4e2d\u7684 xs_interface_open() \u8bbf\u95ee\u3002 \u53ef\u4ee5\u4f7f\u7528 xc_interface_restrict() \u9650\u5236\u53e5\u67c4\u3002 \u4e00\u4e9b\u6743\u9650\u547d\u4ee4\u5f88\u96be\u52a0\u4ee5\u9650\u5236\uff08\u4f8b\u5982\uff0c\u751f\u6210\u4efb\u610f\u5c42\u7684\u8d85\u7ea7\u8c03\u7528\uff09\uff0c\u53ea\u662f\u5728\u53d7\u9650\u53e5\u67c4\u4e0a\u7981\u7528\u8fd9\u4e9b\u547d\u4ee4\u3002    \u53d7\u9650\u53e5\u67c4\u4ee5\u540e\u65e0\u6cd5\u88ab\u6388\u4e88\u66f4\u591a\u6743\u9650\uff0c\u56e0\u6b64\u5fc5\u987b\u5173\u95ed\u5e76\u91cd\u65b0\u6253\u5f00\u63a5\u53e3\u3002\u4ec5\u5f53\u6b64\u8fdb\u7a0b\u968f\u540e\u65e0\u6cd5\u6253\u5f00\u66f4\u591a\u53e5\u67c4\u65f6\uff0c\u624d\u80fd\u4fdd\u8bc1\u5b89\u5168\u3002    \u73b0\u5728\u53ef\u4ee5\u5c06\u63a7\u5236\u57df\u6743\u9650\u7528\u6237\u7a7a\u95f4\u63a5\u53e3\u9650\u5236\u4e3a\u4ec5\u9002\u7528\u4e8e\u7279\u5b9a\u57df\u3002\u4e0b\u9762\u662f\u53d7\u6b64\u66f4\u6539\u5f71\u54cd\u7684\u4e09\u4e2a\u63a5\u53e3\uff1a    qemu \u8bbe\u5907\u4eff\u771f\u8fdb\u7a0b\u548c vncterm \u7ec8\u7aef\u4eff\u771f\u8fdb\u7a0b\u4f5c\u4e3a\u975e root \u7528\u6237 ID \u8fd0\u884c\uff0c\u5e76\u88ab\u9650\u5236\u4e3a\u5728\u7a7a\u76ee\u5f55\u4e2d\u8fd0\u884c\u3002 \u5b83\u4eec\u4f7f\u7528\u4e0a\u8ff0\u7684\u9650\u5236 API \u4ee5\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\u653e\u5f03\u6743\u9650\u3002    \u5bf9 xenstore \u7684\u8bbf\u95ee\u53d7\u901f\u7387\u9650\u5236\uff0c\u4ee5\u9632\u6b62\u6076\u610f\u6765\u5bbe\u7cfb\u7edf\u9020\u6210\u63a7\u5236\u57df\u4e0a\u53d1\u751f\u62d2\u7edd\u670d\u52a1\u7684\u60c5\u51b5\u3002 \u8fd9\u53ef\u4ee5\u4f5c\u4e3a\u5177\u6709\u53d7\u9650\u586b\u5145\u901f\u7387\u7684\u4ee4\u724c\u6876\u5b9e\u73b0\uff0c\u5176\u4e2d\u5927\u591a\u6570\u64cd\u4f5c\u4f7f\u7528\u4e00\u4e2a\u4ee4\u724c\uff0c\u6253\u5f00\u4e00\u4e2a\u4e8b\u52a1\u9700\u8981 20 \u4e2a\u4ee4\u724c\u3002 \u8fd9\u4e9b\u9650\u5236\u8bbe\u7f6e\u5f97\u5f88\u9ad8\uff0c\u5373\u4f7f\u662f\u5728\u8d1f\u8f7d\u64cd\u4f5c\u4e0b\u8fd0\u884c\u5927\u91cf\u5e76\u53d1\u6765\u5bbe\u7cfb\u7edf\uff0c\u4e5f\u6c38\u8fdc\u8fbe\u4e0d\u5230\u8fd9\u4e9b\u9650\u5236\u3002    VNC \u6765\u5bbe\u7cfb\u7edf\u63a7\u5236\u53f0\u4ec5\u7ed1\u5b9a\u5230 localhost \u63a5\u53e3\uff0c\u4ee5\u4f7f\u5b83\u4eec\u4e0d\u4f1a\u5bf9\u5916\u90e8\u516c\u5f00\uff0c\u5373\u4f7f\u5df2\u901a\u8fc7\u7528\u6237\u5e72\u9884\u7981\u7528\u4e86\u63a7\u5236\u57df\u7a0b\u5e8f\u5305\u8fc7\u6ee4\u5668\u4e5f\u4e0d\u4f1a\u516c\u5f00\u3002", 
            "title": "\u5b89\u5168\u589e\u5f3a\u529f\u80fd"
        }, 
        {
            "location": "/#_24", 
            "text": "\u865a\u62df\u7f51\u7edc\u63a5\u53e3\u548c\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u5177\u6709\u4e00\u4e9b\u9ad8\u7ea7\u8bbe\u7f6e\uff0c\u53ef\u4f7f\u7528 other-config \u6620\u5c04\u53c2\u6570\u914d\u7f6e\u8fd9\u4e9b\u8bbe\u7f6e\u3002 \u8fd9\u5305\u542b\u4e00\u7ec4\u81ea\u5b9a\u4e49 ethtool \u8bbe\u7f6e\u53ca\u4e00\u4e9b\u5176\u4ed6\u8bbe\u7f6e\u3002", 
            "title": "\u7f51\u7edc\u63a5\u53e3\u7684\u9ad8\u7ea7\u8bbe\u7f6e"
        }, 
        {
            "location": "/#ethtool", 
            "text": "\u5f00\u53d1\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u4e3a\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u548c\u865a\u62df\u7f51\u7edc\u63a5\u53e3\u914d\u7f6e\u81ea\u5b9a\u4e49 ethtool \u8bbe\u7f6e\u3002\u8fd9\u901a\u8fc7\u4f7f\u7528 ethtool- \u5b8c\u6210\u3002  other-config \u6620\u5c04\u53c2\u6570\u4e2d\u7684\u952e     \u952e  \u8bf4\u660e  \u6709\u6548\u8bbe\u7f6e      ethtool-rx  \u6307\u5b9a\u662f\u5426\u542f\u7528 RX \u6821\u9a8c\u548c\u68c0\u67e5  \u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e    ethtool-tx  \u6307\u5b9a\u662f\u5426\u542f\u7528 TX \u6821\u9a8c\u548c\u68c0\u67e5  \u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e    ethtool-sg  \u6307\u5b9a\u662f\u5426\u542f\u7528\u5206\u6563/\u96c6\u4e2d  \u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e    ethtool-tso  \u6307\u5b9a\u662f\u5426\u542f\u7528 tcp \u5206\u6bb5\u5378\u8f7d  \u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e    ethtool-ufo  \u6307\u5b9a\u662f\u5426\u542f\u7528 UDP \u6bb5\u5378\u8f7d  \u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e    ethtool-gso  \u6307\u5b9a\u662f\u5426\u542f\u7528\u901a\u7528\u5206\u6bb5\u5378\u8f7d  \u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e    ethtool-autoneg  \u6307\u5b9a\u662f\u5426\u542f\u7528\u81ea\u52a8\u534f\u5546  \u5982\u679c\u4e3a on \u6216 true\uff0c\u5219\u542f\u7528\u8be5\u8bbe\u7f6e\uff0c\u5982\u679c\u4e3a off \u6216 false\uff0c\u5219\u7981\u7528\u8be5\u8bbe\u7f6e    ethtool-speed  \u8bbe\u7f6e\u8bbe\u5907\u901f\u5ea6\uff08\u4ee5 Mb/\u79d2\u4e3a\u5355\u4f4d\uff09  10\u3001100 \u6216 1000    ethtool-duplex  \u8bbe\u7f6e\u5168\u53cc\u5de5\u6216\u534a\u53cc\u5de5\u6a21\u5f0f  half \u6216 full     \u4f8b\u5982\uff0c\u4f7f\u7528 xe CLI \u5bf9\u865a\u62df NIC \u542f\u7528 TX \u6821\u9a8c\u548c\u68c0\u67e5\uff1a  xe vif-param-set uuid= VIF UUID  other-config:ethtool-tx= on   \u6216\uff1a  xe vif-param-set uuid= VIF UUID  other-config:ethtool-tx= true   \u4f7f\u7528 xe CLI \u5c06\u7269\u7406 NIC \u4e0a\u7684\u53cc\u5de5\u8bbe\u7f6e\u8bbe\u4e3a\u534a\u53cc\u5de5\uff1a  xe vif-param-set uuid= VIF UUID  other-config:ethtool-duplex= half", 
            "title": "ethtool \u8bbe\u7f6e"
        }, 
        {
            "location": "/#_25", 
            "text": "\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5c06 promiscuous \u952e\u8bbe\u7f6e\u4e3a on\uff0c\u5728 VIF \u6216 PIF \u4e0a\u8bbe\u7f6e\u6df7\u6742\u6a21\u5f0f\u3002\u4f8b\u5982\uff0c\u4f7f\u7528 xe CLI \u5bf9\u7269\u7406 NIC \u542f\u7528\u6df7\u6742\u6a21\u5f0f\uff1a  xe pif-param-set uuid= PIF UUID  other-config:promiscuous= on   \u6216\uff1a  xe pif-param-set uuid= PIF UUID  other-config:promiscuous= true   VIF \u5bf9\u8c61\u548c PIF \u5bf9\u8c61\u90fd\u5177\u6709 MTU \u53c2\u6570\uff0c\u8be5\u53c2\u6570\u662f\u53ea\u8bfb\u7684\uff0c\u53ef\u63d0\u4f9b\u63a5\u53e3\u7684\u6700\u5927\u4f20\u8f93\u5355\u4f4d\u7684\u5f53\u524d\u8bbe\u7f6e\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 other-config \u6620\u5c04\u53c2\u6570\u4e2d\u7684 mtu \u952e\u8986\u76d6\u7269\u7406\u6216\u865a\u62df\u7f51\u5361\u7684\u9ed8\u8ba4\u6700\u5927\u4f20\u8f93\u5355\u4f4d\u3002 \u4f8b\u5982\uff0c\u4f7f\u7528 xe CLI \u5c06\u865a\u62df\u7f51\u5361\u4e0a\u7684 MTU \u91cd\u7f6e\u4e3a\u4f7f\u7528 jumbo \u5e27\uff1a  xe vif-param-set uuid= VIF UUID  other-config:mtu=9000  \u8bf7\u6ce8\u610f\uff0c\u66f4\u6539\u57fa\u7840\u63a5\u53e3\u7684 MTU \u662f\u4e00\u4e2a\u9ad8\u7ea7\u5b9e\u9a8c\u529f\u80fd\uff0c\u5982\u679c\u5355\u4e2a\u8d44\u6e90\u6c60\u4e2d\u7684 NIC \u4e0a\u5b58\u5728\u4e0d\u540c\u7684 MTU\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u5916\u7684\u526f\u9762\u5f71\u54cd\u3002", 
            "title": "\u5176\u4ed6\u8bbe\u7f6e"
        }, 
        {
            "location": "/#sr", 
            "text": "\u5728\u5b89\u88c5\u65f6\u521b\u5efa\u7684 SR \u73b0\u5728\u5305\u542b\u4e00\u4e2a other_config \u952e\uff0c\u6307\u793a SR \u540d\u79f0\u56fd\u9645\u5316\u7684\u65b9\u5f0f\u3002  other_config[\u201di18n-key\u201d] \u53ef\u80fd\u662f\u4e0b\u5217\u9879\u4e4b\u4e00    local-hotplug-cd    local-hotplug-disk    local-storage    xenserver-tools    \u6b64\u5916\uff0c\u5728\u521b\u5efa SR \u65f6\uff0cother_config[\"i18n-original-value- \"] \u63d0\u4f9b\u8be5\u5b57\u6bb5\u7684\u503c\u3002 \u5982\u679c XenCenter \u53d1\u73b0\u4e00\u4e2a\u8bb0\u5f55\uff0c\u5176\u4e2d SR.name_label \u7b49\u4e8e other_config[\u201di18n-original-value-name_label\u201d]\uff08\u5373\u6b64\u8bb0\u5f55\u81ea\u4ece\u5728 XenServer \u5b89\u88c5\u671f\u95f4\u521b\u5efa\u540e\u672a\u66f4\u6539\uff09\uff0c\u5219\u5c06\u5e94\u7528\u56fd\u9645\u5316\u3002 \u6362\u8a00\u4e4b\uff0cXenCenter \u5c06\u5ffd\u7565\u8be5\u5b57\u6bb5\u7684\u5f53\u524d\u5185\u5bb9\uff0c\u800c\u4f7f\u7528\u4e0e\u7528\u6237\u81ea\u5df1\u7684\u8bed\u8a00\u76f8\u5bf9\u5e94\u7684\u503c\u3002  \u5982\u679c\u60a8\u6309\u81ea\u5df1\u7684\u9700\u8981\u66f4\u6539 SR.name_label\uff0c\u5b83\u5c06\u4e0d\u518d\u4e0e other_config[\u201di18n-original-value-name_label\u201d] \u76f8\u540c\u3002 \u56e0\u6b64\uff0cXenCenter \u5c06\u4e0d\u5e94\u7528\u56fd\u9645\u5316\uff0c\u800c\u662f\u4fdd\u7559\u60a8\u6307\u5b9a\u7684\u540d\u79f0\u3002", 
            "title": "SR \u540d\u79f0\u7684\u56fd\u9645\u5316"
        }, 
        {
            "location": "/#xencenter", 
            "text": "\u901a\u8fc7\u5c06\u952e HideFromXenCenter=true \u6dfb\u52a0\u5230\u5bf9\u8c61\u7684 other_config \u53c2\u6570\uff0c\u53ef\u4ee5\u4ece XenCenter \u9690\u85cf\u7f51\u7edc\u3001PIF \u548c VM\u3002 \u6b64\u529f\u80fd\u9762\u5411\u4e86\u89e3\u81ea\u5df1\u6b63\u5728\u6267\u884c\u4ec0\u4e48\u64cd\u4f5c\u7684 ISV\uff0c\u800c\u4e0d\u662f\u4f9b\u65e5\u5e38\u7528\u6237\u7684\u5e38\u89c4\u4f7f\u7528\u3002 \u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u60f3\u9690\u85cf\u67d0\u4e9b VM\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u60a8\u7684\u73af\u5883\u4e2d\u662f\u4e0d\u5e94\u7531\u5e38\u89c4\u7528\u6237\u76f4\u63a5\u4f7f\u7528\u7684\u514b\u9686 VM\u3002  \u5728 XenCenter \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 \u67e5\u770b \u83dc\u5355\u6765\u67e5\u770b\u9690\u85cf\u7684\u7f51\u7edc\u3001PIF \u548c VM\u3002", 
            "title": "\u4ece XenCenter \u9690\u85cf\u5bf9\u8c61"
        }, 
        {
            "location": "/#xencenter-api", 
            "text": "\u9664\u4e86\u8bb0\u5f55\u7684 API \u4e4b\u5916\uff0c\u4e0b\u9762\u5404\u8282\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u6211\u4eec\u6240\u505a\u7684\u5047\u8bbe\u548c API \u6269\u5c55\u3002 \u6269\u5c55\u5728\u8bcd\u5178\u4e2d\u7f16\u7801\u4e3a\u7279\u6b8a\u952e\u503c\u5bf9\uff0c\u5982 VM.other_config\u3002", 
            "title": "XenCenter API \u6269\u5c55"
        }, 
        {
            "location": "/#_26", 
            "text": "\u952e  \u8bed\u4e49      pool.name_label  \u7a7a name_label \u8868\u660e\u6c60\u5e94\u5728\u6811\u89c6\u56fe\u4e2d\u9690\u85cf\u3002    pool.rolling_upgrade_in_progress  \u5982\u679c\u6c60\u5904\u4e8e\u6eda\u52a8\u5347\u7ea7\u671f\u95f4\uff0c\u5219\u663e\u793a\u8be5\u6c60\u3002", 
            "title": "\u6c60"
        }, 
        {
            "location": "/#_27", 
            "text": "\u952e  \u8bed\u4e49      host.other_config[\"iscsi_iqn\"]  \u4e3b\u673a\u7684 iSCSI IQN\u3002    host.license_params[\"expiry\"]  \u4e3b\u673a\u8bb8\u53ef\u8bc1\u7684\u5230\u671f\u65e5\u671f\uff0c\u91c7\u7528 UTC ISO 8601 \u65f6\u95f4\u3002    host.license_params[\"sku_type\"]  \u4e3b\u673a\u8bb8\u53ef\u8bc1\u7c7b\u578b\uff0c\u4f8b\u5982 Server \u6216 Enterprise\u3002    host.license_params[\"restrict_pooling\"]  \u5982\u679c\u6c60\u529f\u80fd\u53d7\u4e3b\u673a\u7684\u9650\u5236\uff0c\u5219\u8fd4\u56de true\u3002    host.license_params[\"restrict_connection\"]  \u53ef\u4ee5\u4ece XenCenter \u8fdb\u884c\u8fde\u63a5\u7684\u8fde\u63a5\u6570\u53d7\u9650\u5236\u3002    host.license_params[\"restrict_qos\"]  \u5982\u679c\u5df2\u5728\u4e3b\u673a\u4e0a\u542f\u7528\u201c\u670d\u52a1\u8d28\u91cf\u201d\u8bbe\u7f6e\uff0c\u5219\u8fd4\u56de true\u3002    host.license_params[\"restrict_vlan\"]  \u5982\u679c\u5728\u4e3b\u673a\u4e0a\u521b\u5efa\u865a\u62df\u7f51\u7edc\u53d7\u9650\u5236\uff0c\u5219\u8fd4\u56de true\u3002    host.license_params[\"restrict_pool_attached_storage\"]  \u5982\u679c\u5728\u6b64\u4e3b\u673a\u4e0a\u521b\u5efa\u5171\u4eab\u5b58\u50a8\u53d7\u9650\u5236\uff0c\u5219\u8fd4\u56de true\u3002    host.software_version[\"product_version\"]  \u8fd4\u56de\u4e3b\u673a\u7684\u4ea7\u54c1\u7248\u672c\u3002    host.software_version[\"build_number\"]  \u8fd4\u56de\u4e3b\u673a\u7684\u5185\u90e8\u7248\u672c\u53f7\u3002    host.software_version[\"xapi\"]  \u8fd4\u56de\u4e3b\u673a\u7684 API \u4fee\u8ba2\u53f7\u3002    host.software_version[\"package-linux\"]  \u5982\u679c\u5df2\u5b89\u88c5 Linux Pack\uff0c\u5219\u8fd4\u56de\u201cinstalled\u201d\u3002    host.software_version[\"oem_build_number\"]  \u5982\u679c\u4e3b\u673a\u662f OEM \u7248\u672c\uff0c\u5219\u8fd4\u56de\u5176\u4fee\u8ba2\u53f7\u3002    host.logging[\"syslog_destination\"]  \u4e3a XenServer \u7cfb\u7edf\u8bb0\u5f55\u7a0b\u5e8f\u83b7\u53d6\u6216\u8bbe\u7f6e\u76ee\u6807\uff08\u7a7a\u503c\u8868\u793a\u672c\u5730\u65e5\u5fd7\u8bb0\u5f55\uff09\u3002    host.logging[\"multipathing\"]  \u5982\u679c\u5df2\u5728\u6b64\u4e3b\u673a\u4e0a\u542f\u7528\u5b58\u50a8\u591a\u8def\u5f84\uff0c\u5219\u4e3a\u201ctrue\u201d\u3002    host.logging[\"boot_time\"]  \u63d0\u4f9b\u4e3b\u673a\u5f15\u5bfc\u65f6\u95f4\u7684\u6d6e\u70b9 Unix \u65f6\u95f4\u3002    host.logging[\"agent_start_time\"]  \u63d0\u4f9b\u63a7\u5236\u57df\u7ba1\u7406\u5b88\u62a4\u7a0b\u5e8f\u542f\u52a8\u65f6\u95f4\u7684\u6d6e\u70b9 Unix \u65f6\u95f4\u3002", 
            "title": "\u4e3b\u673a"
        }, 
        {
            "location": "/#vm_9", 
            "text": "\u952e  \u8bed\u4e49      VM.other_config[\"default_template\"]  \u6b64\u6a21\u677f\u662f Citrix \u5b89\u88c5\u7684\u4e00\u4e2a\u6a21\u677f\u3002\u5b83\u7528\u4e8e\u9009\u62e9\u6027\u5730\u5728\u6811\u89c6\u56fe\u4e2d\u9690\u85cf\u5bf9\u8c61\u3001\u4e3a\u5b83\u4eec\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u6807\u4ee5\u53ca\u7981\u6b62\u5220\u9664\u3002    VM.other_config[\"xensource_internal\"]  \u6b64\u6a21\u677f\u662f\u7279\u6b8a\u6a21\u677f\uff0c\u4f8b\u5982 P2V \u670d\u52a1\u5668\u6a21\u677f\u3002\u8fd9\u4e9b\u5185\u5bb9\u88ab UI \u5b8c\u5168\u9690\u85cf\u3002    VM.other_config[\"install_distro\"] == \"rhlike\"  \u6b64\u6a21\u677f\u9002\u7528\u4e8e RHEL 4.5\u3001RHEL 5 \u6216 CentOS \u7b49\u6548\u952e\u3002 \u5b83\u7528\u4e8e\u5728\u5b89\u88c5\u671f\u95f4\u63d0\u793a\u5b89\u88c5\u5b58\u50a8\u5e93\uff0c\u5176\u4e2d\u5305\u62ec\u652f\u6301\u5728 Miami \u4e0a\u4ece ISO/CD \u5b89\u88c5\uff0c\u4ee5\u53ca\u4fee\u6539 NFS URL \u4ee5\u9002\u7528\u4e8e\u8fd9\u4e9b\u5b89\u88c5\u7a0b\u5e8f\u3002    VM.other_config[\"install_distro\"] in { \"rhel41\" or \"rhel44\" }  \u6b64\u6a21\u677f\u9002\u7528\u4e8e RHEL 4.1\u3001RHEL 4.4 \u6216 CentOS \u7b49\u6548\u952e\u3002 \u5b83\u7528\u4e8e\u5728\u5b89\u88c5\u671f\u95f4\u63d0\u793a\u5b89\u88c5\u5b58\u50a8\u5e93\uff0c\u4ee5\u53ca\u4fee\u6539 NFS URL \u4ee5\u9002\u7528\u4e8e\u8fd9\u4e9b\u5b89\u88c5\u7a0b\u5e8f\u3002 \u5bf9\u4e8e\u8fd9\u4e9b\u6a21\u677f\u4e0d\u63d0\u4f9b ISO \u652f\u6301\u3002    VM.other_config[\"install_distro\"] == \"sleslike\"  \u6b64\u6a21\u677f\u9002\u7528\u4e8e SLES 10 \u548c SLES 9\u3002 \u5b83\u7528\u4e8e\u5728\u5b89\u88c5\u671f\u95f4\u63d0\u793a\u5b89\u88c5\u5b58\u50a8\u5e93\uff0c\u8fd9\u4e00\u70b9\u4e0e EL5 \u76f8\u540c\uff0c\u4f46\u5b83\u4e0d\u4fee\u6539 NFS URL\u3002 XenServer 7.0 \u4e2d\u63d0\u4f9b\u5bf9 SLES 10 \u7684 ISO \u652f\u6301\u3002\u4f7f\u7528 install-methods \u533a\u5206\u8be5\u5e73\u53f0\u4e0a\u7684 SLES 9 \u548c SLES 10\u3002    VM.other_config[\"install-repository\"] == \"cdrom\"  \u8bf7\u6c42\u4ece VM \u7684\u9644\u52a0 CD \u9a71\u52a8\u5668\u4e2d\u7684\u5b58\u50a8\u5e93\uff08\u800c\u4e0d\u662f URL\uff09\u5b89\u88c5\u3002    VM.other_config[\"auto_poweron\"]  \u83b7\u53d6\u6216\u8bbe\u7f6e\u5f15\u5bfc\u670d\u52a1\u5668\u65f6\u662f\u5426\u542f\u52a8 VM\uff0c\u201ctrue\u201d\u6216\u201cfalse\u201d\u3002    VM.other_config[\"ignore_excessive_vcpus\"]  \u83b7\u53d6\u6216\u8bbe\u7f6e\u5f53 VM \u6240\u5305\u542b\u7684 VCPU \u591a\u4e8e\u5176\u4e3b\u673a\u6240\u5305\u542b\u7684\u7269\u7406 CPU \u65f6\u662f\u5426\u5ffd\u7565 XenCenter \u7684\u8b66\u544a\uff0c\u8bbe\u7f6e\u4e3a true \u8868\u793a\u5ffd\u7565\u3002    VM.other_config[\"HideFromXenCenter\"]  \u83b7\u53d6\u6216\u8bbe\u7f6e XenCenter \u662f\u5426\u5728\u6811\u89c6\u56fe\u4e2d\u663e\u793a VM\uff0c\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\u8868\u793a\u9690\u85cf\u3002    VM.other_config[\"import_task\"]  \u83b7\u53d6\u521b\u5efa\u6b64 VM \u7684\u5bfc\u5165\u4efb\u52a1\u3002    VM.HVM_boot_params[\"order\"]  \u4ec5\u83b7\u53d6\u6216\u8bbe\u7f6e HVM VM \u4e0a\u7684 VM \u5f15\u5bfc\u987a\u5e8f\uff0c\u4f8b\u5982\uff0c\u201cCDN\u201d\u5c06\u6309\u7167\u4ee5\u4e0b\u987a\u5e8f\u5f15\u5bfc\uff1a\u9996\u5148\u5f15\u5bfc\u78c1\u76d8\uff0c\u518d\u5f15\u5bfc CD \u9a71\u52a8\u5668\uff0c\u7136\u540e\u5f15\u5bfc\u7f51\u7edc\u3002    VM.VCPU_params[\"weight\"]  \u4e3a VM \u7684 VCPU \u83b7\u53d6\u6216\u8bbe\u7f6e IONice \u503c\uff0c\u8303\u56f4\u4e3a 1 \u5230 65536\uff0c65536 \u662f\u6700\u9ad8\u503c\u3002    VM.pool_migrate(..., options['live'])  true \u8868\u793a\u5b9e\u65f6\u8fc1\u79fb\u3002XenCenter \u59cb\u7ec8\u4f7f\u7528\u5b83\u3002    VM.other_config[\"install-methods\"]  \u6b64\u6a21\u677f\u4e2d\u663e\u793a\u5b89\u88c5\u65b9\u6cd5\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u53ef\u4ee5\u5305\u62ec\u201ccdrom\u201d\u3001\u201cnfs\u201d\u3001\u201chttp\u201d\u6216\u201cftp\u201d\u3002    VM.other_config[\"last_shutdown_time\"]  \u4e0a\u6b21\u5173\u95ed\u6216\u91cd\u65b0\u542f\u52a8\u6b64 VM \u7684\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UTC ISO8601 \u65e5\u671f\u65f6\u95f4\u3002    VM.other_config[\"p2v_source_machine\"]  \u901a\u8fc7 P2V \u8fc7\u7a0b\u5bfc\u5165\u6b64 VM \u6240\u7528\u7684\u6e90\u8ba1\u7b97\u673a\u3002    VM.other_config[\"p2v_import_date\"]  \u901a\u8fc7 P2V \u8fc7\u7a0b\u5bfc\u5165 VM \u7684\u65e5\u671f\u3002\u683c\u5f0f\u4e3a UTC ISO8601 \u65e5\u671f\u65f6\u95f4\u3002", 
            "title": "VM"
        }, 
        {
            "location": "/#sr_1", 
            "text": "\u952e  \u8bed\u4e49      SR.other_config[\"auto-scan\"]  \u5c06\u81ea\u52a8\u626b\u63cf SR \u4ee5\u67e5\u770b\u66f4\u6539\u3002\u5728 XenCenter \u521b\u5efa\u7684\u6240\u6709 SR \u4e0a\u8fdb\u884c\u8bbe\u7f6e\u3002    SR.sm_config[\"type\"]  \u8bbe\u7f6e\u7c7b\u578b\uff0c\u4f8b\u5982\u5c06\u7269\u7406 CD \u9a71\u52a8\u5668 SR \u7684\u7c7b\u578b\u8bbe\u7f6e\u4e3a cd\u3002", 
            "title": "SR"
        }, 
        {
            "location": "/#vdi", 
            "text": "\u952e  \u8bed\u4e49      VDI.type  user\uff08\u800c\u4e0d\u662f system\uff09\u7528\u4e8e\u8868\u793a\u201c\u5982\u679c\u5c06\u6b64\u78c1\u76d8\u8fde\u63a5\u5230 VM\uff0c\u5141\u8bb8/\u4e0d\u5141\u8bb8\u901a\u8fc7 GUI \u5220\u9664 VDI\u201d\u3002 \u76ee\u7684\u662f\u9632\u6b62\u60a8\u635f\u574f VM\uff08\u60a8\u5e94\u5c06\u5176\u5378\u8f7d\uff09\u3002 suspend \u548c crashdump \u5206\u522b\u8bb0\u5f55\u6302\u8d77\u548c\u5185\u6838\u8f6c\u50a8\u3002 \u5f53\u524d\u5c1a\u672a\u4f7f\u7528 ephemeral\u3002    VDI.managed  \u6240\u6709\u975e\u6258\u7ba1 VDI \u90fd\u5b8c\u5168\u9690\u85cf\u5728 UI \u4e2d\u3002\u5b83\u4eec\u662f VHD \u94fe\u4e2d\u7684\u5206\u652f\u70b9\u6216\u672a\u4f7f\u7528\u7684 LUN-per-VDI \u78c1\u76d8\u3002    VDI.sm_config[\"vmhint\"]  \u6b64 VDI \u652f\u6301\u7684 VM \u7684 UUID\u3002\u8fd9\u662f\u5728\u901a\u8fc7\u7528\u6237\u754c\u9762\u521b\u5efa VDI \u65f6\u8bbe\u7f6e\u7684\uff0c\u76ee\u7684\u662f\u63d0\u9ad8\u67d0\u4e9b\u5b58\u50a8\u540e\u7aef\u7684\u6027\u80fd\u3002", 
            "title": "VDI"
        }, 
        {
            "location": "/#vbd_1", 
            "text": "\u952e  \u8bed\u4e49      VBD.other_config[\"is_owner\"]  \u5982\u679c\u5df2\u8bbe\u7f6e\u8be5\u952e\uff0c\u5219\u53ef\u80fd\u5728\u5378\u8f7d VM \u65f6\u5220\u9664\u6b64\u78c1\u76d8\u3002    VBD.other_config[\"class\"]  \u8bbe\u7f6e\u4e3a\u4e0e ionice \u7684\u201c\u6700\u4f73\u6548\u679c\u201d\u8bbe\u7f6e\u76f8\u5bf9\u5e94\u7684\u6574\u6570\u3002", 
            "title": "VBD"
        }, 
        {
            "location": "/#_28", 
            "text": "\u952e  \u8bed\u4e49      network.other_config[\"automatic\"]  \u5982\u679c\u6b64\u952e\u7684\u503c\u662f false \u4ee5\u5916\u7684\u4efb\u4f55\u503c\uff0c\u65b0 VM \u5411\u5bfc\u5c06\u9ed8\u8ba4\u521b\u5efa\u8fde\u63a5\u5230\u6b64\u7f51\u7edc\u7684 VIF\u3002    network.other_config[\"import_task\"]  \u83b7\u53d6\u521b\u5efa\u6b64\u7f51\u7edc\u7684\u5bfc\u5165\u4efb\u52a1\u3002", 
            "title": "\u7f51\u7edc"
        }, 
        {
            "location": "/#vm_guest_metrics", 
            "text": "\u952e  \u8bed\u4e49      PV_drivers_version[\"major\"]  \u83b7\u53d6 VM \u7684 PV \u9a71\u52a8\u7a0b\u5e8f\u7248\u672c\u7684\u4e3b\u8981\u7248\u672c\u53f7\u3002    PV_drivers_version[\"minor\"]  \u83b7\u53d6 VM \u7684 PV \u9a71\u52a8\u7a0b\u5e8f\u7248\u672c\u7684\u6b21\u8981\u7248\u672c\u53f7\u3002    PV_drivers_version[\"micro\"]  \u83b7\u53d6 VM \u7684 PV \u9a71\u52a8\u7a0b\u5e8f\u7248\u672c\u7684 Micro\uff08\u5185\u90e8\u7248\u672c\u53f7\uff09\u3002", 
            "title": "VM_guest_metrics"
        }, 
        {
            "location": "/#_29", 
            "text": "\u952e  \u8bed\u4e49      task.other_config[\"object_creation\"] == \"complete\"  \u5bf9\u4e8e\u4e0e VM \u5bfc\u5165\u76f8\u5173\u7684\u4efb\u52a1\uff0c\u5c06\u5728\u521b\u5efa\u6240\u6709\u5bf9\u8c61\uff08VM \u548c\u7f51\u7edc\uff09\u540e\u8bbe\u7f6e\u6b64\u6807\u5fd7\u3002 \u5728\u5bfc\u5165 VM \u5411\u5bfc\u4e2d\uff0c\u8fd9\u5bf9\u4e8e\u6211\u4eec\u968f\u540e\u7ee7\u7eed\u64cd\u4f5c\u5e76\u91cd\u65b0\u6620\u5c04\u6240\u6709\u9700\u8981\u5b83\u7684\u7f51\u7edc\u5f88\u6709\u7528\u3002", 
            "title": "\u4efb\u52a1"
        }
    ]
}